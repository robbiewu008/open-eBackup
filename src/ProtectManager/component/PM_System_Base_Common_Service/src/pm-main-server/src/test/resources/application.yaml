NODE_NAME: 0A
server:
  port: 8081
  address: 0.0.0.0
spring:
  application:
    name: PM_System_Base
  profiles:
    active: real, token
  servlet:
    multipart:
      max-file-size: 4096MB # 可下载4G
      max-request-size: 4096MB # 可上传4G
  datasource:
    url: jdbc:postgresql://gaussdb:6432/postgres
    username: generaldb
    password:
    userdb: protect_manager
    driverClassName: org.postgresql.Driver
  redis:
    port: 6379
    host: infrastructure
  kafka:
    bootstrap-servers: infrastructure-zk-kafka:9092
    listener:
      missing-topics-fatal: false
      ack-mode: MANUAL_IMMEDIATE
      monitor-interval: 20
    producer:
      retries: 0
      batch-size: 16384
      buffer-memory: 33554432
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
      properties:
        linger.ms: 1
    consumer:
      enable-auto-commit: false
      auto-commit-interval: 100ms
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      max-poll-records: 1
      auto-offset-reset: earliest
    properties:
      session.timeout.ms: 20000
      max.poll.interval.ms: 800000
security:
  sensitive:
    fields: '%password%,%pwd%,%passwd%,%key%,%sharekey%,%crypto%,%checkpwd%,%session%,%token%,%card%,%cardno%,%phone%,%tel%,%telphone%,%email%,%address%,@ip,@age,%idcard%,%fingerprints%,%sessionid%,%auth%,%encrypt%,%enc%,%dec%,%decrypt%,%publickey%,%privatekey%,%tgt%,%iqn%,%initiatorname%,%tgtname%,@sk,%secret%,%username%,%user_name%'
zookeeper:
  client:
    url: infrastructure-zk-kafka:2181
  session:
    timeout: 30000
  connection:
    timeout: 30000
logging:
  file:
    path: /opt/OceanProtect/logs/${NODE_NAME}/protectmanager/${spring.application.name}/
mybatis-plus:
  mapper-locations: classpath*:mapper/**/*.xml
  configuration:
    # 驼峰命名规则
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.nologging.NoLoggingImpl
  type-aliases-package: com.huawei.oceanprotect.system.base.**.entity
pagehelper:
  helperDialect: postgresql
  reasonable: true
  supportMethodsArguments: true
  params: count=countSql
# 通用自定义配置
deploying_environment: dorado
pm-resource-manager.url: http://pm-protection-service:30092
pm-system-base.url: http://pm-system-base:30081
pm-data-protection-service.url: http://pm-protection-service:30092
pm-copies-catalog.url: http://pm-protection-service:30092
pm-scheduler-service.url: http://pm-system-base:30081
pm-dm-access-point.url: http://pm-system-base:30081
protectengine-e-dms.url: http://protectengine:18089
protectengine.url: http://protectengine:8086
pm-dm-access-point:
  url: http://pm-system-base:30081
cluster:
  datamover:
    url: http://pm-system-base:30081
infrastructure:
  config:
    url: http://infrastructure:80
service:
  url:
    pm-system-base: http://pm-system-base:30081
    user-manager: http://pm-system-base:30081
    alarm-manager: http://pm-system-base:30081
    backup-repo-manager: http://pm-system-base:30081
    local-cluster-manager: http://pm-system-base:30081
    pm-copies-catalog: http://pm-protection-service:30092
    pm-resource-manager: http://pm-protection-service:30092
    pm-dm-access-point: http://pm-system-base:30081
    pm-live-mount: http://pm-system-base:30081
    infra: http://infrastructure:8088
    pm-scheduler-service.url: http://pm-system-base:30081
#license模块自定义配置
license:
  key: OceanProtect A8000:1:0:3900F52FE906122FCA00980068002B00EA007000AF0076008400990026004B002D0032000800F500C000A600CA009A008300DD00F8003600F200C4004700E6003300A600EA007E00B000550074008A005F00F500AC00BD003A0012004000FD007000AB003E008D00CD00890023006300D900E3007B00D8004A00B400E80032009F00D40000008B00270019004B006B003200B500F200C9003500F70056006500A1003C000E004400B600970025001C009400A80087001400C2000D006A00180093005A00B800AA00F400A600C1006B00AA0080002700CF00FB005A006300AF005300500050003000E1004800130024003000D1004B00F900BC004D00ED00CB009A003800B70011001B00A70081002D007E00D0008200C500C7002800B400120009007800F100A700E500F300FD00E0009F00A700880066004E00D5006E008200B3001000B400B9004700A5000A00D7005B0042005000E500880036006E0043003B006900F400C8000D00D8004E003B00C8009A001600F300BE006F0037007400D200A800F900E200E10012002B009500DF00920070003200DF003D000800FE00D7007C00EC007200D80017004100A0000600BB00DE0006008A00C1006A0061005E006D0067000E0003003D000B001600A000280058006A00240058004A000400C000AE0005004900FB00B50065000000250040006000400063005D00FB000900B100EC00F00002007800E000A4008A00A6000A00100018006100880054001900C900A00079003400DC001D009F004F00E70002002D000C00AC003400B500B2001B005B001D00C800C4001700C300A9006C00E300B2000600D400B2001B008100BC0018001C00620098001B00A5000600040000006A0017007E009C00B20027005E008D008700B0001C00E0008C002F006200060072004300F1009F00E2000C000000000000000000C5BB8E8090C9B8520B3D11F4B74E6CB2FC12717A02C61248F65A07FE8DAFDBA589E8D5D9AD02862F0F35BDC953287B7D186F0757B05F38EECCE844A7FE46D7CFCDD579ED2783C549EE2B39954D608ABFEC11B760A237C1F60D4555BC8B99B34DE11FE99A23AAE54C4CE24AAA3B167E86E5CC56F27EBE8EEA5CE902B5FB5386C301A3287F07938B68ECFF78BC0C403FECAA99EE85539B9855E832891D1964F32A735371E80D02D0AD52D4A180942299FDDF7CCC0588B57D9E59BAB3005D7A4D8C2574CA70A0E39B02124BB5B827949CF04C833963EADE835006F70195E152F0530A40DB676360FBFCF2AB3211CC2A08E590BE9FE30E9A142F8FB3A8C4E0E749AA9E2ED06F96D28BCC05209C309B4F2666EFCC49B69ED055C73608FEC159190697484F8DBBCC23E222BC5F41985C48B7C5A3EE6CF306E03E8147D79C4D523D23B6EF3C577CBE640759A620E008AD6B8BB6075B31DD713477348FF8BA6161366157EEBDDFF77B771A5AE15B1DDB48951D6EAFB7FF8DD3CEE2102DF87C9CDC9D0E02A6DC8F1674B3EA4D9B0741A290A89B583C19B4D17058E1EF73050676D7C6B3D7970295FCA8C27BF2653BBA0F5CEDCF46F9864CF3C689ED2ADA2F641308310155C2B075158CB7FAD9C83FCB82F21C6EB74FAFF3FD1D0A856A1B3B2C667A184B7754057E939BEA810E08F87685719A769A97263DD94F033D738331A98101D4EE1CDE4F1BC35B375829905D5C6FDA90EB4D63A84EC6C8A0643748B1487AC5806FED660C1AE524B3E39770645DE917B9A0FF0212CA1BB73865F71EB0429993EAF2821F63878B7A20484693B7B8B888C678A88348CBDF38BB3DC5805800190BDD940C14EF034A258B1382A7497AE2A8B48302B4097D4ED5D647CB31F868BDA0784553DCCF39807A079B69098CFF884A55794A7B104387EEC3A7245F44F2ABB67B24F2F517B88180F89CB2AC7DC765B75339DB3B3148F04E6597E03C27F05476B521A7BC5A587D1D926D1F3A5E9179B4768766EB76388F746C51B1A9BE49EDE9373A30245B5C7131ED31B01B1E0881929EA19FCA48E0ACBFE420E869D0B4A690C0D8F318F970CB005F673A126F72E4F6E83230159CBA9351592C50097F89AB85A5A83822AE9F8ECE3854EBEF6F31C57947298EB4FBCAF2E409C9C500367A463B44B7EFB5B6CDABE1DD35017175F4AD3767602CBABC71430E13058295D2DB972EF1B3D7A9A24AF373471837D6E6F3B3AF22CBFC7C3D76C994C84B663CE392D5D7C7AEC8EC057C9C16CE82350FD104DF3432055501F3376F5EF9B2C80F4BAA68987F8E9423752C591A612B0598619BBEDF9378252C21447BB1F5700B1361603612B69D4F419750C2050B14386D5FB8EE5502A28819D19EB283027EFA5BC014F6B0165478CD492679FD0B7C00EA8E9D8D6E16723662357419D7E675B84B80B63CEB179D102D90C6B551CFAA08DE827B9419C3116DEC2F01E16CF5CFC0F615E92D62A9D4A2BC2E13FEBC33E1949D0D4AFA9F9DBDC4FF140D0C4886E3F5074C1AF8363663C89CEB5F6602137713145B05ABCCA20B5B136C28077635B1F1B2C630FB3B5551A81645B2834BD103E4602E2A4F8DC0255B7AA328AE9053E9E89CA2393D746191FBF7A2B8BA564C63B19D9472E99A063F71DD3BA9C9CAF6D29A9E0FAD83A7CCBCF093D0B974B1D97509CD717FE725A91EF259851DEB1F1D756668DAC7CEAAADF51953B8E517F1E2F8CE913C39D506ABBC77F53ABCFE2D5ED6227AB33F1A97A1778B9197DD7615696798292E871DDF638AD302FBAAED90C6EB7CFE252E28781CD5474BF6C601847C7EC4CDE54C8A353BB252AEA29A66885FB1FC161FC0442F4052E27F7CDD28D188E0DC1DF25AED9C02F26C09B2065C2AFBFC454D190923F58C7B7404EB653733546FC21A1BCBCE2B57F7D124EA2AF63E42A6D169BDF258B5829E67F78832CE2A417FA9E2B7B50AE40AC09252F03D16E0A7DDE7C0F733F79D36B1F796F170443AC6A234AE43FBDBC26BA6D6B1EEE91AEDE2DC7D11B7D6117C3E271539A5204746C07158CE3247C26E2FAA93F73FB0102668EA1A8D5D5A68EFF01DD20FCE7A1B850E1002C3A04DE5B6E4AB68421492263D7A87C444937BFCA0FB75376FB72E6780ED6B732941A2BD0AB1C7BCAB787E391444EB3B18C2CF8DAFDB78CCCA598FA936C54CF05E253355923AACF68542DDBE25DD77D2562C82CD5CB2135B037182CD6571B868099EFCB245BAE857C91C0268F2B15884B7AA9AECECB42F39D188C0C7D8FD7E0DD0E1BC467BAB44D32E1332D9AFCF063174EE71FCBC2BBD7C298A1282F12D02BF477CD2204A506E3A38B7BE9DC96591187C6A768B5A2439EA9C003FD6B4B4067989EFEC3C07D11B09F14D616884C651E173C03552580579B7C82EF0D71352BCEEBC4F2AFEB2D6C2C18959240DDF85B68BDA5A2FC511058EC4B1100BFC461C318A9FA830F4EFC40A120978ECBC33090DF991259CA253A89311CC7A44021CA06074A7FA41A654B9BE8F49B1B0C0DCC4372A86066FD70EC8EB54A42BF6C83CF42133009F0574FC58ED428A3227BDE8CAC368C45485D2FFC5B57A35C1FE93CC974B59A69136A893A429F4A3D632B43A641F21B1E88EDB100D261F616A3EEFB6ED4BDC68B7C118ACDA06FC367495300F5F9259E3DB98F35303C28C2D4898DF72CA5FC1826E35A86B2E60CC0A6144835E009D6852854BDE627EB7668F6AED110B202C15AF86737B9CE62C1D7F76AAED7D8360740DAEA0423716D189F738A83007EE0E6DD1D49596D453BD4ED553477BDF5C802B55CF92C3501490505BEC4A9456AE719EB92161EDB0C192446CF012548B83D0E4B6C2B8D371DA5879F65A7AC0272D753A39794163E1C202E610AAE6B4673E526CE9A34ABE4385FA82A300B1008700F200EB000700C0006700610021003B000500A5002F00E20060003200E40087009300E500580091002200B2008800ABABB0C900C841A144EEF661F401F3BE0C44500F00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000:1414973430
  # 1024*1024*2 = 2MB
  file_size: 2097152
  product:
    name: OceanProtect A8000
    version: 1
    id: 8000
  capacity:
    alarm-threshold: 0.8
  mode:
    dev:
      enable: ${DEV_MODE:true}
  advance-resource:
    list: ORACLE,VMWARE,IMPORT_COPY,NAS_SHARE,NAS_FILESYSTEM,HBASE_BACKUPSET
    check-license-import-function: BACKUP,INSTANT_RECOVERY,FINE_GRAINED_RECOVERY,LIVE_MOUNT,ARCHIVE,REPLICATION,DATA_MANANGE_GLOBALE_SEARCH,DATA_PROTECT_DATA_DESENSITIZATION,DATA_WAREHOUSE_SERVICE
    check-license-active-function: BACKUP,INSTANT_RECOVERY,FINE_GRAINED_RECOVERY,LIVE_MOUNT,ARCHIVE,REPLICATION,DATA_MANANGE_GLOBALE_SEARCH,DATA_PROTECT_DATA_DESENSITIZATION,DATA_WAREHOUSE_SERVICE
  other-resource:
    check-license-import-function: BACKUP,ARCHIVE,REPLICATION,DATA_MANANGE_GLOBALE_SEARCH,DATA_PROTECT_DATA_DESENSITIZATION
    check-license-active-function: BACKUP,ARCHIVE,REPLICATION,DATA_MANANGE_GLOBALE_SEARCH,DATA_PROTECT_DATA_DESENSITIZATION
    check-capacity-function: BACKUP,ARCHIVE
#user模块自定义配置
user:
  dpa:
    config: classpath:conf/
  jwt:
    expiration: 600000
#告警模块自定义配置
alarm:
  user_authentication_url: http://127.0.0.1:8080/v1/auth/resource
  user_privilege_url: http://127.0.0.1:8080/v1/users/inner/checkrbac
#存储模块自定义配置
repository:
  storage:
    ip:
    port: 8088
    username: admin
    password:
#anybackup自定义配置
anybackup:
  url:
  port: 9088
  force_stop_port: 9990
  dem_admin:
  authorizations:
ab:
  volume:
    expand:
      leftrate: 0.2
    threshold: 30TB
    settings: "{'ofs':'10GB,10GB','metadata':'11GB,11GB','ddcache':'12GB,12GB','selfbackup_volume':'13GB,13GB'}"
#ebackup自定义配置
dme:
  ip: protectengine
  port: 18089
agent.port: 59526
#cert模块自定义配置
# 1024*64 = 64kb
crl.file_size: 65536
# 1024*1024 = 1mb
cert.file_size: 1048576
secret:
  file:
    valid:
      day: 30
#crm服务自定义配置
crm:
  client:
    pmCaFilesPath: /opt/OceanProtect/protectmanager/cert/client/
    pmAgentZipFile: /opt/ProtectManager/agent/client/DataProtect_${APP_VERSION}_client.zip
    agentInitZipPath: /app/agent/initPath/zipFile/
    agentPackageName: DataProtect_${APP_VERSION}_client
    agentInitUnzipPath: /app/agent/initPath/unZipFiles/
    realFilePath: /app/agent/realPath/
    noCopyCertNames: ca.cert
    pluginSchemaDir: /opt/ProtectManager/agent/plugin/capabilities
# kerberos模块自定义配置
conf:
  file_size: 65536
keytab:
  file_size: 1048576
#sftp自定义配置
feign:
  client:
    config:
      InfrastructureRestApi:
        connectTimeout: 10000 # 连接10s
        readTimeout: 3600000 # 读取选择1小时
      DtreeRest:
        connectTimeout: 10000 # 连接10s
        readTimeout: 3600000 # 读取选择1小时
---
spring:
  profiles: real
---
spring:
  profiles: fake
