server:
  port: 8081
  address: 0.0.0.0
  ssl:
    key-alias: internalCertKey
    key-store: /opt/OceanProtect/infrastructure/cert/internal/internal.ks
    key-store-type: PKCS12
    enabled: true
    trust-store: /opt/OceanProtect/infrastructure/cert/internal/internal.ks
    trust-store-type: PKCS12
    client-auth: need
    key-store-password-file: /opt/OceanProtect/infrastructure/cert/internal/internal_cert
    ciphers: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256, TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
  tomcat:
    connection-timeout: 600000
    remoteip:
      remote-ip-header: "X-Real-IP"
    threads:
      max: 400
spring:
  # springboot2.6.7默认禁止循环依赖
  main:
    allow-circular-references: true
  # swagger兼容springboot 2.6.x配置
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
  config:
    use-legacy-processing: true
    activate:
      on-profile: real, token
  application:
    name: PM_System_Base
  servlet:
    multipart:
      enabled: true
      max-file-size: 4096MB # 可下载4G
      max-request-size: 4096MB # 可上传4G
      file-size-threshold: 10MB
      location: /opt/ProtectManager/
  datasource:
    url: jdbc:postgresql://gaussdb:6432/postgres
    username: generaldb
    password:
    userdb: protect_manager
    driverClassName: org.postgresql.Driver
  redis:
    port: 6369
    host: infrastructure
    url: rediss://infrastructure:6369
    ssl: true
    key-store: /opt/OceanProtect/infrastructure/cert/redis/redis.ks
    key-store-password-file: /opt/OceanProtect/infrastructure/cert/redis/redis_cert
    key-alias: redisCertKey
    redisson:
      file: classpath:redisson.yaml
    cluster:
      nodes: rediss://infrastructure-0.infrastructure.dpa.svc.cluster.local:6369, rediss://infrastructure-1.infrastructure.dpa.svc.cluster.local:6369, rediss://infrastructure-2.infrastructure.dpa.svc.cluster.local:6369, rediss://infrastructure-0.infrastructure.dpa.svc.cluster.local:6370, rediss://infrastructure-1.infrastructure.dpa.svc.cluster.local:6370, rediss://infrastructure-2.infrastructure.dpa.svc.cluster.local:6370
  kafka:
    bootstrap-servers: infrastructure-zk-kafka:9092
    listener:
      missing-topics-fatal: false
      ack-mode: MANUAL_IMMEDIATE
      monitor-interval: 20
      idle-between-polls: 1000
      poll-timeout: 4000
    producer:
      retries: 3
      batch-size: 16384
      buffer-memory: 33554432
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
      properties:
        linger.ms: 1
        max.request.size: 2097152
    consumer:
      enable-auto-commit: false
      auto-commit-interval: 100ms
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      max-poll-records: 1
      auto-offset-reset: earliest
    properties:
      session.timeout.ms: 20000
      max.poll.interval.ms: 1800000
    ssl:
      protocol: TLSv1.2
      trust-store-location: /opt/OceanProtect/infrastructure/cert/internal/internal.ks
      trust-store-type: PKCS12
      key-store-location: /opt/OceanProtect/infrastructure/cert/internal/internal.ks
      key-store-type: PKCS12
# springfox自动启动禁用
springfox:
  documentation:
    auto-startup: false
security:
  sensitive:
    fields: '%password%,%pwd%,%passwd%,%key%,%sharekey%,%crypto%,%checkpwd%,%session%,%token%,%card%,%cardno%,%phone%,%tel%,%telphone%,%email%,%address%,@ip,@age,%idcard%,%fingerprints%,%sessionid%,%auth%,%encrypt%,%enc%,%dec%,%decrypt%,%publickey%,%privatekey%,%tgt%,%iqn%,%initiatorname%,%tgtname%,@sk,%secret%,%username%,%user_name%'
zookeeper:
  client:
    url: infrastructure-zk-kafka:2181
  session:
    timeout: 30000
  connection:
    timeout: 30000
logging:
  file:
    path: /opt/OceanProtect/logs/${NODE_NAME}/protectmanager/${spring.application.name}/
mybatis-plus:
  mapper-locations: classpath*:mapper/**/*.xml
  configuration:
    # 驼峰命名规则
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.nologging.NoLoggingImpl
  type-aliases-package: com.huawei.oceanprotect.system.base.**.entity, com.huawei.oceanprotect.**.entity, com.huawei.oceanprotect.**.valueobj
pagehelper:
  helperDialect: postgresql
  reasonable: true
  supportMethodsArguments: true
  params: count=countSql
# 通用自定义配置
deploying_environment: dorado
pm-resource-manager.url: https://pm-protection-service:30092
pm-system-base.url: https://pm-system-base:30081
pm-data-protection-service.url: https://pm-protection-service:30092
pm-copies-catalog.url: https://pm-protection-service:30092
pm-scheduler-service.url: https://pm-system-base:30081
pm-dm-access-point.url: https://pm-system-base:30081
protectengine-e-dms.url: https://protectengine:18089
protectengine.url: https://protectengine:8086
dme-archive.url: https://dme-archive:8089
data-enable-engine-server.url: https://dataenableengine-server:8083
protectengine-e-dee.url: https://protectengine:8084
protectengine-e-dee-base-parser.url: https://dataenableengine-server:8085
protectengine-e-dee-db-anonymization.url: https://dee-db-anonymization:8087
dee-base-parser.url: https://protectengine:8085
open-storage.url: https://%s:30173/v1/internal
# 注册客户端需要区分具体的节点，这里采用名称来区分，例如node-0和node-1
node-identify: ${NODE_NAME}
#license模块自定义配置
license:
  key: OceanCyber 300:1:5:A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E980D71A86E10C3287280B5BB045A75CCBA8FD3E5ECCF6398031A5D56FF107540DF8B8455F8CBF0959A0D3A69D49167A478ED79C61446920536F1A7C56928DA4A5A8B98C826AD3DBB338F80253574CFCA7F369B9CE07CB3BC3CB089A974018D41A8F51655DF53F90367E264C6AA5C350B55316322D6DC153B14B765B6D8C6AF01946F48426F4EB9F6108C1A31D65CC984B69E4F571F043BAA62C3DD2DB90457A752DD4CBF9B978EC191279613F8010EB4E26E62766F0A02651810024EED5A514016191949FE2D961D36D97DC2CDDE4909BFD516D8F16E86B82B5790D5E92AD7A341923287C1545833B7080B15B8E58E088450C49345E039FF090EBC988CA44CB91B9D55A63A4119C81D5195C0F9623C1B6B7B8A4CA694D2783949A65F2CED0994FD69EDFB4A0BB3A578C77FB95925CFD5B1F4245B1E1EF2CD665CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C761AE864B50674AE54E2664476F0F5EEC873C143DCF75D4AEC9BA70141449521B91E96C1B93E6980289A0A8ED994659E38C0F4E42D884FE36F36145023FB4CFA4B19B4BBF7DE4C3EFDB2E3A11271D1AD9E2E2828C43E26B1F41C107CD65FC756BF700176845D80AC5C66D3DA5B584986D016D6ED1B20FB7C1EAB2F695EE3D9673DD951AE90E90A2DCFB5D203FFB5771D40FD9F3C8A0FD524A0CA1CD441D2709051EBC99BFBB3D3B7A69E2BAD8BEA406B39BFDFB674BB6AB611DF77DBFD127E90A3E6024D7B54460E32D601D5D014D1B28D0A9DCD56815B5B539D5405FB6E73BF87F0F52EF5AAF63E6BB4BA46CD8E984C761284DCEEE896F542ED77B67B9F5234E994A0C07FD19A39B54DC81960E1EBF29E30FA5BD9284364B221CB62CC7F5A4816686C87ADED01A1F88ACEF027B3666F4000000000000000065CD079B76CF9FDE2CF51BE04ECDF1F57F1DAE88022D46CF879374F819E870CDD399E8C4F16D1BB3F78DA782EFA365494B08F70B0E8FC3D10D4DB70EE2981B49086027D59FC50E9DE3BCED81F3307ACEA0DA62DED2C85D2493B4A50EC66A6D9EB882BF81618D0E7585C9B68D3DE61ED2112BAEDE9971A69DF202B30C4E4DAAA1F7BD0C40E3C644D9C104925F5DF64EC66DB9548C2A279918B62612C24C43E1A52146BE45942B7533CBD8728EC461520C96546E2C0A869694AAE142699019A3D7B6242C53B93367507D7F8C2B4A1FEB4A0710CC95E14A399C554E264ED7B8C2483B0650D7EA82C5194EE8AF88F2B8891F929AC550D5F3619E58DD95A4DE7FE0648D3D14A2C774005D8B13C9031E10EC1A499944BB9A331B55614B81ED8D8FF5699E0C4944981A7518B8F6D0A51BA8BED2AEC9324DC28A6EC08A5819176214AEEE8734FD23C06A7E5ABF729B4A560B4FA166B615FA134AD79DA1A84EFB9E92D9BA4C92F9B1CCAD80334A9AE671E947249BCC02CE485CF3EFCEA1E4A380046B97B513F07DEE3C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF289209A267FAA7B166E3E0A6303C4C94BCF2665C760CD0B9BBFA76AF289209A267FAB7B17F5A40F1B308BE93385C360BF96B20B9B0F894A8A7A5F9A267FAB7B176E3E0A63C3F4E9333C5965C765CD0B9BBFA76AF228209A267FAB7B17FE94031B308BE9332C6845BF96B20B9BBFA76AF289209A26FEAB7B176E3E0A6333DAC94BCF2665C7E5CD0BE34CD86AF2A9209A267FAB7B174A3E0A63C3F4E9331C6945BF96B20B9BDAA76A8A7A5F9A267FAB7B176E3E0A6382F4E9333C5965C795E32BE34CD86AF209209A5E8CD47B176E3E0A63C3F4E9331D5965C765CD0B9B4F894A8A7A5F9A263F9B5B6F9D410A635372E9333C5965C731CD0B9BBFA76AF27911BA5E8CD47B17A0E2A7F8573347A78FDA2BB1DA7F74E3FED325AE4B6BABA8D0BAF477D841108F609FE0A243A36CA006B9ECFCC6D51340481ECC9B4347AA43A5D4E6A7B71992CD2BFA653AB4C397B48B11F53CC9F264AFB91B8E1F3A2BF301E88649372F09DEAAB5D446D3E41B5222883B2AB97FEC152BE8F86A137274AA24B5881314A69CDCE05B8EB893717F2B51E34F4024D96C6A3662DCA5BC1774A12F6237FECDBC2BDCBED7E20EE12FB7844C449C2ACA52002F5D6C27010AA31F2C0E46A66987B851CB1AB82B7844D8E9C2BB3BCF397ADB249CD95B95A7CAB4901DD1CBC197A3809E61A4A6D5E953253BDB018C263E09642B0882C98069B683A408816274B89782B29269438DE7562D3DE636CEE7BC2C9504C4FE23EC1500AEAE10D436E7D6746CDFA9EFBBB01CF3F14478D71D221337AC50750CD0C62C6B39CACF2B6E0FDC33D7FFF310B2C9D03A13043F19E9C1BA27FB94E814637E567DCA7A7223F887A19E62F45B6633A008CB819CFA852FC5608D993B4CD7654D0DA36B483153953DC7C36F9FFD7155B15D1F958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5248531C732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179BA5258531C7328E5FE53666F855E920E2AB800B48B415D93CC0D3179AA524A431C732DE6CC54ED5B57591539DABF87837B46D2A43C0D3F713A5248531C7328A6CC54E958755E9A0D78B800B48B415DC3CC0D3179AA5248531C732DE6CC54EE21C5091539DABF86DACB16D2A43C0D3E7A8855C764EC732DE6CC54E958755E9A0E2ABF8F837B415D93CC0D3179AA5242431C732DE6CC54E052D5C91539DABF8A802946D2A43C0D3179AA5248531C7325F6CC54E958755E990D18B800B48B415593CC0ABE4E5A524A531C732DE6CC54EB18755E9A0E2ABF89803946D2A43C0D3729AA55C764EC732DE6CC54E958755E9E1E2ABF8F837B415E90FE0ABE4E5A524312E320045D1A9769C0313D46D989C3AE59E847C03056A94559E0CD2FB359643F892F405ADC0DE57B234965277DE46DA3C46DF7626F5BE0C6A9836B40AC164A00D565A484920155D4C298B4CA3958A31EE8CF726829CC38E51926251F2B63CE775FA86D99C0948F56FA1725BC15E7840B78BCE113C5EB804AC8AA5A4A83F1C4831ABFFB000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
  # 1024*1024*2 = 2MB
  file_size: 2097152
  product:
    name: OceanCyber 300
    version: 1
#e1000 license模块自定义配置
e1000-license:
  key: OceanProtect E1000:1:5:BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE6090BA4234C48F911E0D9203AB64F228BD71C6F1FC1F776560A671EB0204F813689187C8610245AAABB2DB5F363CC3D96520C4F40CC6F6381E6D995D93B2C7BD9D1F69C2278227D049EF61DED7DF8FB35022E26EE19CCB14D7034C1E9EA32ED675E34C97DEF058AE667CFEE446E4A45DC60090A33BAFA57D7EBBCB6E3CB5249F99F2C6B236AEFC036C3AFDD304F046753FC87E87740F3EAC03D78DF7BE1D5103E718B9F7A172A7D42DEC3FD2DBEC8629B6169D42DB165D5ECCA6941CACF8680E8A4C08EEDB736BC97F9FDEA605ED98DEF7061A847DAB8916523916CB4242AA19A3D55F9A8056150427019A8995BE64BFE0277FC58DCF4880613892C7CFBCF85BCF57E351745AB4ADFD5A385BBC5809D89D26754CDC8785A36321C9C56E0870C28BFFBB5E4285B37B51707BCBD8E8CCCABB0C7117C2B482899BCBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4FB7CE804FAB87852380A22D72C90F4D80BE3F96F05E78A61E743D4FF6883914006CFA3F5121EB99D666BFA267CD085F71469A8A71189FB811EA98CBCCD0E07B485572FAA1666842FF115772C22CF98857C06DD51C52A124EFC0F4E471BE879EB5F3F8F249C40B63B17EAEBC014BFE2D8804131281E0AB637AF84BCE1F683D9FA2C6BDB856CA805B6D8615C9577926154C8FDC3342BFD323CD3BDAFF7850449D6914D0251901DBD934273030FE2AC796F4A1DCA80ED5C20DF3D7A826B2557BE6719C648BB0DD7B8D64A09795B50D9EFBFE456997A3B4D0FF5C83C018D5E9C2810DC524FDE877AB417E023BEBE58DAD27D555574E892984A181127B8253773A7034B9E6C4326EF13CCF68B5949D1F25133AEA62457371B6C13E73A0FDF26EE2378F76461210F23FDEA73D592FA64E3D3DC9E7FE2DE960EC82ECBB4E3FBA3875CE95384277298689147AED0C376CE550963F436B58BB79194AD06D12BF38E1C27212128C7303E6E08B78770B8A77D2A02A2A334536E37D0D87E77111B4749606E2F3271807F3F483562D37FA3AD7CB1B94446FC6639B91B510C6E27DF33B040638B49B1F9214E43DFA1BF524ABE4C3965AA8D738F9E98E8CA13267061BE2FBE0B75B2A1532CF38FAAA6B8F197BB5556A58A608372709D8E8C5BED3EF1E9E78EB44065A196EE1129913BE92552BEDC23F6267B2C2F975C61EC7BC581ED20174A8330A8374F1C356ED7D8D1B5AC2730875462993669E2A41D033B957FB4B73FCA062E3199931A241DE9AD4357A8AE198B2E322B7854D7700604045875D795B8053CCF5DB6A9B1CFDD81E485E10B17E996DA26CF32658D58C7365EE17D75D64EBF15AA693BBD5BD7D0F17EDD6CF33E6CF38AA05F10DA201D65927C51919D9111A713A4730AD4E625AE8ED2C8CFF19AC60214AADED972694837B9089D5F944F00D5CF9F393F2702473EC0FB194A0D7F2382D35C7741C332D5A6FA4BDF8832424FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90E1BA5BFF3679D0F8CA69F4FFCA4B4CBB4EFFB6AEFA9C5F651A6B4A90F1BA47399C4560E3AE7423F7D57665604D929189959DBECFEB88ED3C4FD617336B7602C1BFB133F0C181E999847CD2FDAC70106837B86C9B2E17F36B13A8C66D3AD2D78A94DEF69A2FDD0E9882D09BA4C2AC65850D2F5995897CD28975E84601E2D82EF8AE6842ABFCD5756C8C0A4FDC4E6A46F21DAD0BC7B476A71A99998BCC0D7D30FF45D386C1B8250A55B503A893406F2CEA9A374BA20B0F774F36ED5236815B0DB7E3AC3F88A52395685594329194467DA911EDEDA90DC395D34CD271949D332266AEDECA0D499CFFACBD452FC288DF549EF1261308F3B5D2042543EC1D911E0C7E5301CC9D2EAA6C81B76209DC5B2C88FA1828C4B0592B40C08CBBDBA9ED9186CABE7B2283A5875B58CDA73562B0D85632BAD16A9A91609DFA0570453399FA012AC2C040870A97C33CD92B1D0EC8EBC85522C997E346C65CE01B14B444D15A49A43D302C428F4594D69B65F92CB66B63E964AD6E782FBFD20AB21DD2E7A70E4CDFB7D33A064115171A873FAA2333A11F4B8339EB707BBB651A6549D1C42F86FB396825040C476CBC56DD92F960F1C37E4FD0EE26B7B26DE48A8DCCEC3DF38EA0A94F4C823DBFA37E11D3924B1AE51C1AF7182CE35BCA9F2D59A72506F068E7F4CAF1726B31CA3742BCEA3AC0E4AB4B7E4F5C86379B9BF5CB3D89A3AC8171667BF106BF5CEF87B879E98439BB58E67845FA8C49863BE31BA5CBEF442E94BF2C8BE8D3296A55C584D7E8E1897E5FDB2299C7D370F7B4A4E0468D388E45D6D79C2770DEBE8AB9019801C0E0B73FD8F4C1061702CB0301B564234899770D96C31DF73C048AB80C5D1C3ED9FD252EEF7F1B45F3B3BA95C365E3991FE7DD48DC8AC2A2842B0A84E0424720B358669AA5BF8A9310F47642C92C0BF76A5B3DC827C334F809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA90B00A9CAEB39ED39CF4F8809AFE60BA9ED518A2E9E2B104B87B2FDA91B00BE334E11FFBD7DD349E986E187673F3A55AE77439C5E314B16BBD95EA96C215A7640C1C3611931A3A5E958D73D767DC1A0333DE4D77CC139AF5414AFEE3BD205908ECC6C985E38692FDEC58A20C5F2C6ACE4219810DC087642A3CF36DB9C54AEDCFE026A3FB05AA44AAAF947E42A40A65582D9D3BDD2BFCF9E34A363028FF5286AAEC1EC2CC8591FCFB157A183C342E26D56AEDB03B6483CD0E3DF92F97692170C11CD67873368E8A937CAE07C1DF42608F4465C12C942D469FD6F0240D2646216A1EBD391CC362F0D470B876B093B5AC92F3955586F8184CACFEB84055EC45C11DFEB0FF2EF0A8C3E08C80B64A1E2CC943C5C6E778FE2CDE1F900AA9312E3200F0B1D201320DBF0F8E75E74B7F5DE94E5DF0D545FFE87447FAF2E6C625D414EA466FAA7E4A74AAACB2559CBC8968FC642CB655F259EBD67E2B6406456294CA9A7512744B1604E0576BB5916C6F4D644381DA051E4363FB7354BE58980E9C6385B3D974DBD4F85D62DD17CA4975E6EB7211FAE27ED32158928F5AC1B038A3A48200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
  # 1024*1024*2 = 2MB
  file_size: 2097152
  product:
    name: OceanProtect E1000
    version: 1
#资源接入模块自定义配置
resource-access:
  oceancyber:
    device-whitelist-file: /opt/ProtectManager/oceancyber/device_whitelist.txt
    # 1024B = 1KB
    device-whitelist-limit-size: 1024
    device-whitelist-limit-line: 8
dma:
  host:
    protectengine-e-dma
  port:
    30071
pm-config-server:
  host:
    https://pm-config
  port:
    30175
pm-dm-access-point:
  url: https://pm-system-base:30081
cluster:
  datamover:
    url: https://pm-system-base:30081
infrastructure:
  config:
    url: https://infrastructure:80
service:
  url:
    pm-system-base: https://pm-system-base:30081
    user-manager: https://pm-system-base:30081
    alarm-manager: https://pm-system-base:30081
    backup-repo-manager: https://pm-system-base:30081
    local-cluster-manager: https://pm-system-base:30081
    pm-copies-catalog: https://pm-protection-service:30092
    pm-resource-manager: https://pm-protection-service:30092
    pm-dm-access-point: https://pm-system-base:30081
    pm-live-mount: https://pm-system-base:30081
    infra: https://infrastructure:8088
    sftp: https://sftp:9888
    pm-scheduler-service.url: https://pm-system-base:30081
    cloud-backup-plugin: https://pm-system-base:30081
    pm-repository: https://pm-system-base:30081
    dme-openstorage-api: https://dme-openstorageapi:30173
    dme-openstorageapi-controller: https://dme-openstorageapi-controller:30174
#统一定义请求地址配置，后续替代上面风格各异的配置规则，规则如下：
#配置键为：services.enpoints.服务名.子服务（服务名、子服务全部小写加下划线）
services:
  endpoints:
    protectengine:
      dme: https://protectengine:18089
      dme-jobmanager: https://dme-jobmanager:8089
      dee: https://protectengine:8084
      archive: https://dme-archive:8089
      replication: https://dme-replication:8089
      ubc: https://dme-ubc:8089
    protectmanager:
      protection-service: https://pm-protection-service:30092
      system-base: https://pm-system-base:30081
    proxy:
      agent:
        host: protectengine
        port: 8090
#user模块自定义配置
user:
  dpa:
    config: classpath:conf/
  jwt:
    expiration: 600000
  dynamicCode:
    expiration: 1
#额度模块自定义配置
quota:
  alarmThresholdPercentage: 0.8 #已用额度超过总额度的80%上报提示告警
#告警模块自定义配置
alarm:
  user_authentication_url: http://127.0.0.1:8080/v1/auth/resource
  user_privilege_url: http://127.0.0.1:8080/v1/users/inner/checkrbac
#存储模块自定义配置
repository:
  storage:
    ip:
    port: 8088
    username: admin
    password:
#anybackup自定义配置
anybackup:
  url:
  port: 9088
  force_stop_port: 9990
  dem_admin:
  authorizations:
ab:
  volume:
    expand:
      leftrate: 0.2
    threshold: 30TB
    settings: "{'ofs':'10GB,10GB','metadata':'11GB,11GB','ddcache':'12GB,12GB','selfbackup_volume':'13GB,13GB'}"
#ebackup自定义配置
dme:
  ip: dme-nginx
  port: 8089
  proxyPort: 8090
  protectengine:
    port: 18089
agent.port: 59526
#cert模块自定义配置
# 1024*64 = 64kb
pem.file_size: 65536
# 1024*1024 = 1mb
cert.file_size: 1048576
# 是否开启域名校验
cert.is_verify_hostName: false
# 1024*5 = 5kb
crl.file_size: 5120
secret:
  file:
    valid:
      day: 30
#crm服务自定义配置
crm:
  client:
    pmCaFilesPath: /opt/OceanProtect/protectmanager/cert/client/
    pmAgentZipFile: /img/agent/client/DataProtect_${APP_VERSION}_client.zip
    agentInitZipPath: /app/agent/initPath/zipFile/
    agentPackageName: DataProtect_${APP_VERSION}_client
    agentInitUnzipPath: /app/agent/initPath/unZipFiles/
    realFilePath: /app/agent/realPath/
    noCopyCertNames: ca.cert
    pluginSchemaDir: /opt/ProtectManager/agent/plugin/capabilities
    agentLogFilesPath: /opt/ProtectManagerAgentLog/
    publicKeyPath: /app/agent/keyfile/publickey/
    privateKeyPath: /app/agent/keyfile/privatekey/
# kerberos模块自定义配置
conf:
  file_size: 65536
keytab:
  file_size: 1048576
#sftp自定义配置
feign:
  client:
    config:
      InfrastructureRestApi:
        connectTimeout: 10000 # 连接10s
        readTimeout: 3600000 # 读取选择1小时
      DtreeRest:
        connectTimeout: 10000 # 连接10s
        readTimeout: 3600000 # 读取选择1小时
  httpclient:
    hc5:
      enabled: false
#系统统一规格配置，后续规格项的配置，全部放到此配置项下面
system:
  saml-sso:
    total-limit: 10
    metadata-size: 1MB
  specs:
    retry:
      maxAttempts: 5
      maxDelay: 120000
    job:
      jobOverDueTime: 7776000000 # 三个月（毫秒）
      historyJobOverDueTime: 15552000000 # 六个月（毫秒）
      jobMaxLimit: 200000 # 20万
      historyJobMaxLimit: 400000 # 40万
      summaryInterval: 5000 # 5秒（毫秒）
  schedule:
    protectobject:
      consistent:
        refresh: 0 0 10 1,15 * ?
        check: 0 30 10 * * ?
    job:
      dumpJobsCron: 0 0 12 * * ? # 每天中午12点开始转储历史任务
      deleteHistoryCron: 0 0 14 ? * WED  # 每周三下午2点开始删除过期任务
    resource:
      refreshScanJob: 0 0/15 * * * ?
    systembackup:
      checkConfig: 0 0 12 * * ? # 每天中午12点检测管理数据备份策略是否配置
    user:
      deleteJob: 0 0/10 * * * ?

#cloud back up plugin 自定义配置
cloud.backup:
  perResourceCopiesSpec: 4096
  totalResourcesCopiesSpec: 64000

#临时文件下载模块自定义配置
exportfile:
  instances:
    - type: LOG
      url: https://infrastructure.dpa.svc.cluster.local:8088/v1/infra/logs/export_package
      requestType: GET
      authorities:
        - Role_SYS_Admin
      keepSize: 5
      keepStrategy: NODE
      isOpenFileSizeLimit: false
    - type: COPY_FILE
      url: https://pm-protection-service.dpa.svc.cluster.local:30092/v1/internal/restores/action/download
      requestType: POST
      authorities:
        - Role_SYS_Admin
        - Role_DP_Admin
      keepSize: 20
      keepStrategy: PER_USER
      isOpenFileSizeLimit: true
      sizeLimit: 21474836480 # 20GB
    - type: REALTIME_DETECT_ALARM
      url: https://dataenableengine-server.dpa.svc.cluster.local:8083/v1/internal/anti/ransomware/io-detect-alarm/action/download
      requestType: POST
      authorities:
        - Role_SYS_Admin
        - Role_DP_Admi
      keepSize: 1
      keepStrategy: UNIQUE_KEY
      isOpenFileSizeLimit: false
    - type: AGENT_LOG
      url: https://pm-system-base.dpa.svc.cluster.local:30081/v1/internal/host-agent/log/action/export
      requestType: POST
      authorities:
        - Role_SYS_Admin
        - Role_DP_Admin
      keepSize: 10
      keepStrategy: PER_USER
      isOpenFileSizeLimit: false
    - type: STORAGE_DEVICE_CONFIG
      url: https://protectengine.dpa.svc.cluster.local:30173/v1/internal/deviceManager/rest/{device_id}/export_config_file
      requestType: GET
      authorities:
        - Role_SYS_Admin
      keepSize: 1
      keepStrategy: NODE
      isOpenFileSizeLimit: false
---
spring:
  profiles: real
---
spring:
  profiles: fake
