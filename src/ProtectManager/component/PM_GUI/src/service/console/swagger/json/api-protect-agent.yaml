swagger: '2.0'
info:
  version: v1
  title: 客户端管理接口
  contact: {}
  license: {}
host: localhost
basePath: /
tags:
  - name: client-manager-api
    description: Host Agent Manager Controller
  - name: host-agent-update-controller
    description: Host Agent Update Controller
  - name: agent-lan-free-controller
  - name: host-agent-internal-controller
  - name: check-health-controller
  - name: agent-lan-free-aix-controller
    description: AIX主机配置LAN-Free相关接口
  - name: agent-lan-free-aix-internal-controller
paths:
  /v1/host-agent:
    post:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 上传保护代理
      operationId: uploadAgentClientUsingPOST
      consumes:
        - multipart/form-data
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: agentClient
          in: formData
          description: 保护代理
          required: false
          type: file
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 查询agent信息列表
      operationId: queryAgentListInfoUsingGET
      consumes:
        - multipart/form-data
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: pageNo
          in: query
          required: false
          description: 页索引，默认0
          type: integer
          format: int32
        - name: pageSize
          in: query
          required: false
          description: 页大小，默认10
          type: integer
          format: int32
        - name: conditions
          in: query
          required: false
          description: 查询条件(json格式)，如：{"type":"Host","subType":["DBBackupAgent","VMBackupAgent","UBackupAgent","SBackupAgent"],"isCluster":false}
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/ProtectedResourcePageListResponse'
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/host-agent/{uuid}/vmware:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 查询VMware agent信息列表
      operationId: queryVMwareAgentListInfoUsingGET
      consumes:
        - multipart/form-data
      produces:
        - '*/*'
      parameters:
        - name: uuid
          in: path
          required: true
          type: string
          description: 主机或集群ID
          minLength: 1
          maxLength: 64
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: pageNo
          in: query
          required: false
          description: 页索引，默认0
          type: integer
          format: int32
        - name: pageSize
          in: query
          required: false
          description: 页大小，默认10
          type: integer
          format: int32
        - name: conditions
          in: query
          required: false
          description: 查询条件(json格式)，如：{"type":"Host","subType":["DBBackupAgent","VMBackupAgent","UBackupAgent","SBackupAgent"],"isCluster":false}
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/ProtectedResourcePageListResponse'
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/host-agent/action/update:
    post:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - host-agent-update-controller
      summary: 批量更新代理客户端
      operationId: batchUpdateAgentClientUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: request
          description: 批量更新代理客户端请求参数
          required: true
          schema:
            $ref: '#/definitions/AgentsUpdateRequest'
            originalRef: AgentsUpdateRequest
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/host-agent/agents:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 查询保护代理信息
      operationId: queryAgentEntitiesUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: index
          in: query
          description: 页数
          required: false
          type: integer
          default: 1
          minimum: 0.0
          format: int32
        - name: size
          in: query
          description: 每页数量
          required: false
          type: integer
          default: 5
          maximum: 200.0
          minimum: 0.0
          format: int32
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/BasePage«AgentEntityDTO»'
            originalRef: BasePage«AgentEntityDTO»
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/host-agent/download:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      tags:
        - client-manager-api
      summary: 下载链接接口，前端不涉及
      operationId: temporaryDownloadUsingGET
      produces:
        - '*/*'
      parameters:
        - name: uuid
          in: query
          description: 下载链接唯一标识
          required: false
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/FileSystemResource'
            originalRef: FileSystemResource
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
    post:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 下载保护代理
      operationId: downloadAgentClientUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: params
          description: 保护代理下载参数
          required: true
          schema:
            $ref: '#/definitions/AgentDownloadParams'
            originalRef: AgentDownloadParams
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/FileSystemResource'
            originalRef: FileSystemResource
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/host-agent/register:
    post:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 客户端代理自动注册
      operationId: registerHostAgentUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: params
          description: 客户端代理自动注册参数
          required: true
          schema:
            $ref: '#/definitions/AgentRegisterParam'
            originalRef: AgentRegisterParam
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/host-agent/register/connection:
    post:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 客户端代理自动注册连通性检查
      operationId: checkRegisterConnectionUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: params
          description: 客户端代理自动注册参数
          required: true
          schema:
            $ref: '#/definitions/AgentRegisterConnectionParam'
            originalRef: AgentRegisterConnectionParam
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/internal/agent/cluster-ip:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      tags:
        - client-manager-api
      summary: 自动更新Agent当前Server
      description: 内部接口，自动更新Agent当前Server
      operationId: updateAgentClusterIpPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - in: body
          name: params
          description: Agent当前控制器IP列表
          required: true
          schema:
            $ref: '#/definitions/MangerIpDto'
            originalRef: AgentRegisterConnectionParam
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/host-agent/{agentId}/log/configuration:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 更新代理日志配置
      description: 更新代理日志配置
      operationId: updateAgentLogConfigurationPUT
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: 代理ID
          minLength: 1
          maxLength: 64
        - name: configParam
          in: body
          required: true
          description: 日志配置参数
          schema:
            $ref: '#/definitions/AgentLogConfigParam'
        - name: X-Auth-Token
          in: header
          required: true
          description: Access token
          type: string
      responses:
        '200':
          description: 无返回值
  /v1/host-agent/{agentId}/lan-free/configuration:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-controller
      description: 配置lan-free信息
      operationId: configurationLanFreePUT
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: 主机资源id
        - name: agentLanFreeDTO
          in: body
          required: true
          description: lan-free配置页面信息
          schema:
            $ref: '#/definitions/AgentLanFreeDTO'
        - name: X-Auth-Token
          in: header
          required: false
          description: Access token
          type: string
        - name: targetEsn
          in: query
          required: false
          description: 软硬解耦场景外部存储设备esn
          type: string
      responses:
        '200':
          description: OK
          schema:
            type: string
        '201':
          description: Created
          schema:
            type: string
        '401':
          description: Unauthorized
          schema:
            type: string
        '403':
          description: Forbidden
          schema:
            type: string
        '404':
          description: Not Found
          schema:
            type: string
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-controller
      summary: 初始化lan-free配置页面
      description: 初始化配置界面
      operationId: configurationLanFreeGET
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: 主机资源id
        - name: X-Auth-Token
          in: header
          required: true
          description: Access token
          type: string
        - name: targetEsn
          in: query
          required: false
          description: 软硬解耦场景外部存储设备esn
          type: string
      responses:
        '200':
          description: 初始化页面时前端返回对象和为主机配置LanFree时前端发送对象
          schema:
            $ref: '#/definitions/AgentLanFreeDTO'
        '401':
          description: Unauthorized
          schema:
            type: string
        '403':
          description: Forbidden
          schema:
            type: string
        '404':
          description: Not Found
          schema:
            type: string
    delete:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-controller
      summary: 删除lan-free信息
      description: 删除lan-free信息
      operationId: configurationLanFreeDELETE
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: 主机资源id
          maxLength: 256
        - name: X-Auth-Token
          in: header
          required: true
          description: Access token
          type: string
      responses:
        '200':
          description: OK
        '201':
          description: Created
          schema:
            type: string
        '401':
          description: Unauthorized
          schema:
            type: string
        '403':
          description: Forbidden
          schema:
            type: string
        '404':
          description: Not Found
          schema:
            type: string
  /v1/host-agent/{agentId}/lan-free/info:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-controller
      description: 查询lan-free配置信息请求
      operationId: queryLanFreeGET
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: agent主机资源id
        - name: X-Auth-Token
          in: header
          required: true
          description: Access token
          type: string
      responses:
        '200':
          description: LAN-Free 展示页面信息 OK
          schema:
            $ref: '#/definitions/AgentLanFreeViewDTO'
        '401':
          description: Unauthorized
          schema:
            type: string
        '403':
          description: Forbidden
          schema:
            type: string
        '404':
          description: Not Found
          schema:
            type: string
  /v1/host-agent/tag:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      summary: 批量设置备注信息
      description: 批量为主机设置备注信息，主机可以是在线、离线、迁移中等各种状态
      operationId: updateTagInfoUsingPUT
      parameters:
        - name: X-Auth-Token
          in: header
          required: true
          description: Access token
          type: string
        - name: resourceIds
          in: query
          required: true
          type: string
          description: 主机resourceIdList，以,隔开
        - name: tagInfo
          in: query
          required: false
          type: string
          description: 批量为主机设置的备注信息，最大64字符，不传入的话默认值是空字符串""
      responses:
        '200':
          description: 无返回值
  /v1/internal/host-agent/log/action/export:
    post:
      tags:
        - host-agent-internal-controller
      summary: 导出Agent日志
      description: 导出Agent日志
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      operationId: exportAgentLogUsingPost
      parameters:
        - name: exportLogParam
          in: body
          required: false
          schema:
            $ref: '#/definitions/AgentExportLogParam'
      responses:
        '200':
          description: 无返回值
  /v1/host-agent/update/download:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'N'
      tags:
        - client-manager-api
      summary: 用于agent 更新下载接口（证书双向认证），加入白名单
      description: 用于agent 更新下载接口（证书双向认证），加入白名单
      operationId: temporaryUpdateDownloadUsingGET
      parameters:
        - name: uuid
          in: query
          required: true
          description: uuid
          type: string
          minLength: 1
          maxLength: 1024
      responses:
        '200':
          description: ResponseEntity<FileSystemResource>
          schema:
            $ref: '#/definitions/ResponseEntity'
  /internal/crm/health:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      tags:
        - check-health-controller
      summary: 内部调用接口，k8s探针检测服务不可用时，重启
      description: 内部调用接口，k8s探针检测服务不可用时，重启
      operationId: checkHealthUsingGet
      responses:
        '200':
          description: return "ok"
          schema:
            type: string
  /v1/host-agent/{agentId}/lan-free/cluster/members:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-controller
      description: 查询LAN-FREE已选节点
      operationId: queryClusterNodeInfoGET
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: 主机ID
      responses:
        '200':
          description: 集群节点信息
          schema:
            type: array
            items:
              $ref: '#/definitions/AgentLanFreeClusterMembersDTO'
  /v1/host-agent/{agentId}/lan-free/iqn/action/scan:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-controller
      description: 查询lan-free配置信息请求
      operationId: querySanClientIqnUsingGET
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: SanClient资源id
      responses:
        '200':
          description: SanClient IQN信息
          schema:
            type: array
            items:
              type: string
  /v1/host-agent/{agentId}/aix/lan-free/configuration:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-aix-controller
      summary: 初始化lan-free AIX配置页面
      description: 初始化AIX配置界面
      operationId: configurationLanFreeAixUsingGET
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: AIX主机资源id
      responses:
        '200':
          description: 查询AIX LAN-Free配置信息成功
          schema:
            $ref: '#/definitions/AgentLanFreeAixDTO'
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-aix-controller
      summary: 为AIX主机配置lan-free
      description: 为AIX主机配置lan-free
      operationId: configurationLanFreeAixUsingPUT
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: AIX主机资源id
        - name: agentLanFreeAixDTO
          in: body
          required: true
          description: AIX主机配置LAN-Free信息
          schema:
            $ref: '#/definitions/AgentLanFreeAixDTO'
      responses:
        '200':
          description: 为AIX主机配置LAN-Free成功
          schema:
            type: string
  /v1/host-agent/{agentId}/aix/lan-free/info:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - agent-lan-free-aix-controller
      summary: 查询lan-free配置信息请求
      description: 查询lan-free配置信息请求
      operationId: queryLanFreeAixUsingGET
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: AIX主机资源id
      responses:
        '200':
          description: 为AIX主机配置LAN-Free成功
          schema:
            $ref: '#/definitions/AgentLanFreeAixViewDTO'
  /v1/host-agent/applications:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      description: agent安装包选择应用列表
      operationId: queryAgentApplicationsGET
      parameters:
        - name: lang
          in: query
          required: true
          description: 语言
          type: string
        - name: osType
          in: query
          required: true
          description: 操作系统类型 WINDOWS/LINUX/UNIX/OTHERS
          type: string
        - name: hostId
          in: query
          required: false
          description: 主机id
          type: string
          minLength: 0
          maxLength: 64
      responses:
        '200':
          description: 菜单信息
          schema:
            items:
              $ref: '#/definitions/AgentMenu'
            type: array
        '401':
          description: Unauthorized
          schema:
            type: string
        '403':
          description: Forbidden
          schema:
            type: string
        '404':
          description: Not Found
          schema:
            type: string
  /v1/host-agent/action/update-plugin-type:
    post:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - host-agent-update-controller
      summary: 修改主机资源类型
      description: 修改主机资源类型
      operationId: UpdateAgentClientPluginTypeUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: request
          in: body
          required: true
          description: Agent更新资源类型请求参数
          schema:
            $ref: '#/definitions/AgentUpdatePluginTypeRequest'
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/host-agent/support-applications:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      description: 详情页面查看支持应用
      operationId: querySupportApplicationGET
      parameters:
        - name: lang
          in: query
          required: true
          description: 语言
          type: string
        - name: uuid
          in: query
          required: false
          description: 代理主机唯一标识
          type: string
      responses:
        '200':
          description: ''
          schema:
            type: array
            items:
              $ref: '#/definitions/AgentMenu'
  /v1/internal/agent/task/available-service:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      tags:
        - host-agent-internal-controller
      description: 获取agent的任务可用的服务
      operationId: agentTaskAvailableServiceGET
      parameters:
        - name: agentIds
          in: query
          required: false
          description: agent uuid列表
          type: array
          items:
            type: string
      responses:
        '200':
          description: ''
          schema:
            $ref: '#/definitions/AgentManagementDomain'
  /v1/host-agent/heartbeat:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25082
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'N'
      tags:
        - host-agent-internal-controller
      summary: agent心跳上报
      operationId: heartbeatUsingPUT
      parameters:
        - name: heartBeatParam
          in: body
          required: true
          schema:
            $ref: '#/definitions/AgentHeartBeatParam'
      responses:
        '200':
          description: ''
          schema:
            type: string
  /v1/internal/host-agent/monitor/statistics:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25082
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'N'
      tags:
        - host-agent-internal-controller
      summary: agent上报cpu和内存占用率
      description: agent上报cpu和内存占用率
      operationId: monitorStatisticsUsingPUT
      parameters:
        - name: agentResourceMonitorParams
          in: body
          required: true
          schema:
            $ref: '#/definitions/AgentResourceMonitorParams'
          description: agent上报信息
      responses:
        '200':
          description: ''
          schema:
            type: string
  /v1/internal/host-agent/{agentId}/aix/lan-free/configuration:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      tags:
        - agent-lan-free-aix-internal-controller
      operationId: getLanFreeByAgentId
      parameters:
        - name: agentId
          in: path
          required: true
          type: string
          description: 资源ID
      responses:
        '200':
          description: ''
          schema:
            type: string
  /v1/internal/host-agent/action/umount:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 25082
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'N'
      tags:
        - host-agent-internal-controller
      summary: 根据resource id移除agent的挂载
      description: 根据resource id移除agent的挂载
      operationId: actionUmountUsingPUT
      parameters:
        - name: resourceId
          in: query
          required: false
          description: 主机资源ID
          type: string
      responses:
        '200':
          description: ''
          schema:
            type: string
  /v1/host-agent/support:
    post:
      x-dr-role: 'Y'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000,OceanProtect E6000,OceanProtect DataBackup,OceanProtect for HCS
      x-dm-role: 'Y'
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'N'
      x-rd-admin-role: 'Y'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      description: 查询agent是否支持开关
      operationId: queryAgentApplicationUsingPOST
      parameters:
        - name: AgentCheckSupportParam
          in: body
          required: true
          description: 按钮判断请求体
          schema:
            $ref: '#/definitions/AgentCheckSupportParam'
      responses:
        '200':
          description: 应用支持信息
          schema:
            type: object
            additionalProperties:
              type: boolean
  /v1/host-agent/action/update-backup-service-ip:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000,OceanProtect E6000
      x-dm-role: 'N'
      x-impact-subsystem: 影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - client-manager-api
      description: 同步op环境上的业务网络地址给当前用户所有的主机
      operationId: updateAgentContainerFrontEndIpPUT
      responses:
        '200':
          description: ''
          schema:
            type: string
securityDefinitions:
  Authorization:
    type: apiKey
    name: TOKEN
    in: header
definitions:
  AgentClientInfo:
    type: object
    properties:
      agentId:
        type: string
        description: agent的ID
      uuid:
        type: string
        description: 资源id
    title: AgentClientInfo
  AgentDownloadParams:
    properties:
      agentID:
        type: string
        description: 保护代理id
        pattern: ^\d{1,32}$
      osType:
        type: string
        description: 操作系统类型Windows/Linux/Unix/Others
        enum:
          - WINDOWS
          - LINUX
          - UNIX
          - OTHERS
        x-impact-subsystem: 不影响
        x-access-port: 25081
        x-auth-required: 'Y'
        x-public-api: 'Y'
      privateKey:
        type: string
        description: 私钥
      type:
        type: string
        description: 代理类型 主机Oracle/主机通用/外置VM/外置通用
        enum:
          - HOST_AGENT_ORACLE
          - HOST_AGENT
          - REMOTE_AGENT_VMWARE
          - REMOTE_AGENT
        x-impact-subsystem: 不影响
        x-access-port: 25081
        x-auth-required: 'Y'
        x-public-api: 'Y'
      agentApplicationMenu:
        description: 选择应用信息
        $ref: '#/definitions/AgentApplicationMenu'
      availableZone:
        type: string
        description: op服务化availableZone id
        maxLength: 255
        minLength: 0
      isShared:
        type: boolean
        description: 是否多租户共享
    title: AgentDownloadParams
    required:
      - agentID
      - osType
      - privateKey
      - type
    type: object
  AgentEntityDTO:
    type: object
    properties:
      agentName:
        type: string
      id:
        type: string
      status:
        type: integer
        format: int32
      uploadTime:
        type: string
      version:
        type: string
    title: AgentEntityDTO
  AgentInfo:
    type: object
    properties:
      agentId:
        type: string
      agentName:
        type: string
      releaseVersion:
        type: string
      versionDependencyRegexp:
        type: string
      versionTimeStamp:
        type: string
    title: AgentInfo
  AgentRegisterConnectionParam:
    properties:
      ips:
        type: string
        description: >-
          IPV4(支持网段或以逗号分隔):192.168.100.10-192.168.100.20,192.167.0.1，IPV6（只支持逗号分隔）:fe80::20c:29ff:fecb:d50a,fe80::20c:29ff:fecb:d514
      osType:
        type: string
        description: 操作系统类型 WINDOWS/LINUX/UNIX/OTHERS
        enum:
          - WINDOWS
          - LINUX
          - UNIX
          - OTHERS
        x-impact-subsystem: 不影响
        x-access-port: 25081
        x-auth-required: 'Y'
        x-public-api: 'Y'
      password:
        type: string
        description: 远程连接用户密码
        minLength: 1
        maxLength: 255
      username:
        type: string
        description: 远程连接用户名
        minLength: 1
        maxLength: 255
      ipType:
        type: string
        description: ip类型 IPV4,IPV6
        enum:
          - IPV4
          - IPV6
        x-impact-subsystem: 不影响
        x-access-port: 25081
        x-auth-required: 'Y'
        x-public-api: 'Y'
      ipInfos:
        type: array
        items:
          $ref: '#/definitions/IpInfoParam'
    title: AgentRegisterConnectionParam
    type: object
  AgentRegisterParam:
    properties:
      ips:
        type: string
        description: IPV4(支持网段或以逗号分隔):192.168.100.10-192.168.100.20,192.167.0.1，IPV6（只支持逗号分隔）:fe80::20c:29ff:fecb:d50a,fe80::20c:29ff:fecb:d514
      osType:
        type: string
        description: 操作系统类型 Windows/Linux/Unix/Others
        enum:
          - WINDOWS
          - LINUX
          - UNIX
          - OTHERS
        x-impact-subsystem: 不影响
        x-access-port: 25081
        x-auth-required: 'Y'
        x-public-api: 'Y'
      password:
        type: string
        description: 远程连接用户密码
        minLength: 1
        maxLength: 255
      type:
        type: string
        description: 业务类型 主机Oracle/主机通用/外置VM/外置通用
        enum:
          - HOST_AGENT_ORACLE
          - HOST_AGENT
          - REMOTE_AGENT_VMWARE
          - REMOTE_AGENT
        x-impact-subsystem: 不影响
        x-access-port: 25081
        x-auth-required: 'Y'
        x-public-api: 'Y'
      username:
        type: string
        description: 远程连接用户名
        minLength: 1
        maxLength: 255
      ipType:
        type: string
        description: 类型 IPV4,IPV6
        enum:
          - IPV4
          - IPV6
        x-impact-subsystem: 不影响
        x-access-port: 25081
        x-auth-required: 'Y'
        x-public-api: 'Y'
      agentApplicationMenu:
        type: array
        items:
          $ref: '#/definitions/AgentApplicationMenu'
        description: 选择应用信息
      availableZone:
        type: string
        description: op服务化availableZone id
        minLength: 0
        maxLength: 255
      ipInfos:
        type: array
        items:
          $ref: '#/definitions/IpInfoParam'
        description: ipInfos
      isShared:
        type: boolean
        description: 是否多租户共享
    title: AgentRegisterParam
    type: object
  AgentsUpdateRequest:
    type: object
    properties:
      agentClientInfoList:
        type: array
        items:
          $ref: '#/definitions/AgentClientInfo'
        description: 客户端更新信息列表
    title: AgentsUpdateRequest
    required:
      - agentClientInfoList
  BasePage«AgentEntityDTO»:
    type: object
    properties:
      items:
        type: array
        description: 详情
        items:
          $ref: '#/definitions/AgentEntityDTO'
          originalRef: AgentEntityDTO
      page_no:
        type: integer
        format: int64
        description: 页码
      page_size:
        type: integer
        format: int64
        description: 每页总数
      pages:
        type: integer
        format: int64
        description: 总页数
      total:
        type: integer
        format: int64
        description: 总数
    title: BasePage«AgentEntityDTO»
  File:
    type: object
    properties:
      absolute:
        type: boolean
      absoluteFile:
        $ref: '#/definitions/File'
        originalRef: File
      absolutePath:
        type: string
      canonicalFile:
        $ref: '#/definitions/File'
        originalRef: File
      canonicalPath:
        type: string
      directory:
        type: boolean
      file:
        type: boolean
      freeSpace:
        type: integer
        format: int64
      hidden:
        type: boolean
      name:
        type: string
      parent:
        type: string
      parentFile:
        $ref: '#/definitions/File'
        originalRef: File
      path:
        type: string
      totalSpace:
        type: integer
        format: int64
      usableSpace:
        type: integer
        format: int64
    title: File
  FileSystemResource:
    type: object
    properties:
      description:
        type: string
      file:
        $ref: '#/definitions/File'
        originalRef: File
      filename:
        type: string
      inputStream:
        $ref: '#/definitions/InputStream'
        originalRef: InputStream
      open:
        type: boolean
      outputStream:
        $ref: '#/definitions/OutputStream'
        originalRef: OutputStream
      path:
        type: string
      readable:
        type: boolean
      uri:
        $ref: '#/definitions/URI'
        originalRef: URI
      url:
        $ref: '#/definitions/URL'
        originalRef: URL
      writable:
        type: boolean
    title: FileSystemResource
  InputStream:
    type: object
    title: InputStream
  OutputStream:
    type: object
    title: OutputStream
  URI:
    type: object
    properties:
      absolute:
        type: boolean
      authority:
        type: string
      fragment:
        type: string
      host:
        type: string
      opaque:
        type: boolean
      path:
        type: string
      port:
        type: integer
        format: int32
      query:
        type: string
      rawAuthority:
        type: string
      rawFragment:
        type: string
      rawPath:
        type: string
      rawQuery:
        type: string
      rawSchemeSpecificPart:
        type: string
      rawUserInfo:
        type: string
      scheme:
        type: string
      schemeSpecificPart:
        type: string
      userInfo:
        type: string
    title: URI
  URL:
    type: object
    properties:
      authority:
        type: string
      content:
        type: object
      defaultPort:
        type: integer
        format: int32
      file:
        type: string
      host:
        type: string
      path:
        type: string
      port:
        type: integer
        format: int32
      protocol:
        type: string
      query:
        type: string
      ref:
        type: string
      userInfo:
        type: string
    title: URL
  HostRegisterInfo:
    required:
      - registerType
      - type
      - osType
      - ips
    properties:
      registerType:
        type: string
        example: 注册方式
        description: 注册方式 AGENT , AGENTLESS
      type:
        type: string
        example: 代理类型
        description: 代理类型
      osType:
        type: string
        example: 操作系统
        description: 操作系统
      ips:
        type: string
        example: ip地址,同时支持ipv4和ipv6
        description: ip地址,同时支持ipv4和ipv6
      password:
        type: string
        example: string
        description: 用户
      username:
        type: string
        example: string
        description: 密码
      port:
        type: string
        example: 端口
        description: 端口
      authMode:
        type: string
        example: 认证模式
        description: 认证模式 BASIC , NTLM, CREDSSP, KERBEROS, CERTIFICATE
      kerberos:
        type: string
        example: Kerberos认证模式下的值
        description: Kerberos认证模式下的值
      publicCertificate:
        type: string
        example: windows证书模式下的公钥证书
        description: windows证书模式下的公钥证书
      privateCertificate:
        type: string
        example: windows证书模式下的私钥证书
        description: windows证书模式下的私钥证书
      certificate:
        type: string
        example: 非windwos证书模式下的证书
        description: 非windwos证书模式下的证书
  MangerIpDto:
    description: Agent当前所有Server列表
    properties:
      mangerServerList:
        type: array
        items:
          type: string
        description: 实际当前Server列表
    required:
      - mangerServerList
  AgentLogConfigParam:
    type: object
    required:
      - logLevel
    properties:
      logLevel:
        type: string
        description: 日志级别
        minLength: 1
        maxLength: 32
  AgentLogConfigInfo:
    type: object
    required:
      - logLevel
    properties:
      logLevel:
        type: string
  AgentLanFreeWwpn:
    type: object
    description: LAN-FREE wwpn请求体
    required:
      - wwpn
      - manualAdd
      - chosen
      - runningStatus
    properties:
      wwpn:
        type: string
        description: wwpn
        minLength: 16
        maxLength: 32
      manualAdd:
        type: boolean
        description: 是否客户手动添加
      chosen:
        type: boolean
        description: 是否被选择
      runningStatus:
        description: "运行状态：\n\t0：未知\n\t1：正常\n\t2：运行\n\t10：已连接\n\t11：未连接\n\t14：预拷贝\n\t16：重构\n\t27：在线\n\t28：离线\n\t32：正在均衡\n\t53：初始化中\n\t106：删除中"
        required: true
        type: string
        maxLength: 32
  AgentLanFreeFcPort:
    type: object
    description: lan-free FC请求体
    required:
      - id
      - location
      - runningStatus
      - wwpn
      - chosen
    properties:
      id:
        type: string
        description: FC端口编码
      location:
        type: string
        description: FC端口位置
      runningStatus:
        description: 运行状态： 0：未知 1：正常 2：运行 10：已连接 11：未连接 14：预拷贝 16：重构 27：在线 28：离线 32：正在均衡 53：初始化中 106：删除中
        required: true
        type: string
      wwpn:
        type: string
        description: FC端口wwpn
        minLength: 16
        maxLength: 32
      chosen:
        type: boolean
        description: 是否被选择
  AgentLanFreeDTO:
    type: object
    description: lan-free 请求结构体
    required:
      - delete
      - wwpns
      - fcPorts
    properties:
      delete:
        type: boolean
        description: 是否删除lan-free
      wwpns:
        items:
          $ref: '#/definitions/AgentLanFreeWwpn'
        description: 客户端WWPN信息
        type: array
      fcPorts:
        items:
          $ref: '#/definitions/AgentLanFreeFcPort'
        description: FC端口信息,configType为LanFree时必填
        type: array
      sanClientWwpns:
        type: array
        items:
          $ref: '#/definitions/AgentLanFreeWwpn'
        description: initPage页面回显代理主机配置-客户端WWPN下拉列表
      sanClientIqns:
        type: array
        items:
          type: string
        description: initPage页面回显代理主机配置-SanClient客户端WWPN下拉列表
  AgentLanFreeWwpnView:
    type: object
    properties:
      wwpn:
        type: string
        description: AIX客户端wwpn
      runningStatus:
        type: string
        description: 运行状态
  AgentLanFreeFcPortView:
    type: object
    required:
      - location
      - runningStatus
    properties:
      location:
        type: string
        description: 位置
      runningStatus:
        type: string
        description: 状态
      wwpn:
        type: string
        description: FC端口wwpn
  AgentLanFreeViewDTO:
    type: object
    properties:
      sanClientWwpns:
        type: array
        items:
          $ref: '#/definitions/AgentLanFreeWwpnView'
        description: SanClient主机选中用于与AIX主机建立FC组网的wwpn信息
      wwpns:
        items:
          $ref: '#/definitions/AgentLanFreeWwpnView'
        description: LAN-Free展示页面SanClient主机选中用于与本地存储建立FC组网的wwpn信息
        type: array
      fcPorts:
        items:
          $ref: '#/definitions/AgentLanFreeFcPortView'
        description: LAN-Free展示页面本地存储FC端口信息
        type: array
      sanClientIqns:
        items:
          type: string
        description: SanClient主机选中用于与AIX主机建立ISCSI组网的Iqn信息
        type: array
      clusterNodeName:
        type: string
        description: 节点名称
      clusterEsn:
        type: string
        description: 节点ESN
  AgentExportLogParam:
    type: object
    required:
      - recordId
      - agentIds
    properties:
      recordId:
        type: string
        description: 记录ID
      agentIds:
        type: string
        description: 主机列表
  ResponseEntity:
    type: object
    properties:
      status:
        type: object
  IqnConfig:
    type: object
    required:
      - clientIqn
      - sanClientIqn
    properties:
      clientIqn:
        type: array
        items:
          type: string
        description: 选择ISCSI数据协议时AIX主机IQN配置信息，配置方式为SanClient并且数据协议为ISCSI时必填
      sanClientIqn:
        type: array
        items:
          type: string
        description: 选择ISCSI数据协议时SanClient代理IQN配置信息，配置方式为SanClient并且数据协议为ISCSI时必填
  WwpnConfigInfo:
    type: object
    required:
      - clientWwpn
      - sanClientWwpn
    properties:
      clientWwpn:
        type: string
        description: AIX客户端和SanClient 一对一WWPN，configType为SanClient时为必填
      sanClientWwpn:
        type: string
        description: AIX客户端和SanClient 一对一WWPN，configType为SanClient时为必填
  AgentConfig:
    type: object
    properties:
      wwpnConfig:
        type: array
        items:
          $ref: '#/definitions/WwpnConfigInfo'
        description: 选择FC数据协议时AIX主机WWPn和SanClient代理一对一WWPN配置信息，configType为SanClient为必填
      iqnConfig:
        description: 选择ISCSI数据协议时AIX主机IQN和SanClient代理IQN配置信息，configType为SanClient为必填
        $ref: '#/definitions/IqnConfig'
      sanClientWwpnsList:
        type: array
        items:
          $ref: '#/definitions/AgentLanFreeWwpn'
        description: 页面上选中的SanClient WWPN用来入库
      fcPorts:
        type: array
        items:
          $ref: '#/definitions/AgentLanFreeFcPort'
  SanClientConfig:
    type: object
    required:
      - resourceId
      - sanClientIp
      - dataProtocol
      - agentConfig
    properties:
      resourceId:
        type: string
        description: sanClient客户端资源id，配置方式为SanClient时必填
      sanClientIp:
        type: string
        description: anClient客户端ip, 参数值符合ip正则要求，配置方式为SanClient时必填
      dataProtocol:
        type: string
        description: 数据协议 ，值为FC或者ISCSI，配置方式为SanClient时必填
      agentConfig:
        description: 选择FC或ISCSI数据协议时配置信息，配置方式为SanClient时必填
        $ref: '#/definitions/AgentConfig'
  AgentLanFreeClusterMembersDTO:
    type: object
    properties:
      esn:
        type: string
        description: 集群节点esn号
      nodeName:
        type: string
        description: 节点名称
      chosen:
        type: boolean
        description: 是否已选
  AgentLanFreeAixDTO:
    type: object
    required:
      - delete
      - dataProtocol
      - sanclientResourceIds
    properties:
      delete:
        type: boolean
        description: 是否执行删除LAN-Free操作
      dataProtocol:
        type: string
        description: 数据协议，FC或ISCSI
      sanclientResourceIds:
        type: array
        items:
          type: string
        description: 选择的SanClient主机id
      clientWwpns:
        type: array
        items:
          $ref: '#/definitions/AgentLanFreeWwpn'
        description: AIX主机 WWPN信息，用于与SanClient主机建立FC组网
      clientIqns:
        type: array
        items:
          type: string
        description: AIX主机 IQN信息，用于与SanClient主机建立ISCSI组网
  AgentLanFreeAixViewDTO:
    type: object
    required:
      - dataProtocol
      - sanclientResourceIds
    properties:
      dataProtocol:
        type: string
        description: FC或ISCSI
      sanclientResourceIds:
        type: array
        items:
          type: string
        description: 选择的SanClient主机id
      clientWwpns:
        items:
          $ref: '#/definitions/AgentLanFreeWwpnView'
        description: AIX主机 WWPN信息
        type: array
      clientIqns:
        type: array
        items:
          type: string
        description: AIX主机 IQN信息
  ProtectedEnvironment:
    type: object
    properties:
      endpoint:
        type: string
      port:
        type: integer
        format: int32
      linkStatus:
        type: string
      userName:
        type: string
      location:
        type: string
      osType:
        type: string
      osName:
        type: string
      scanInterval:
        type: string
  ProtectedObject:
    type: object
    properties:
      slaId:
        type: string
      slaName:
        type: string
      slaCompliance:
        type: boolean
      status:
        type: integer
        format: int32
      envId:
        type: string
      envType:
        type: string
      resourceId:
        type: string
      extParameters:
        type: object
        additionalProperties:
          type: object
      latestTime:
        type: string
        format: date-time
      earliestTime:
        type: string
        format: date-time
      chainId:
        type: string
  AuthTypeInfo:
    type: object
    required:
      - authType
    properties:
      authType:
        type: integer
        format: int32
        description: >-
          0-NO_AUTH, 1-OS_PASSWORD, 2-APP_PASSWORD，3-LADP, 4-AKSK, 5-KERBEROS,
          6-TOKEN, 7-OAUTH2, 8-OTHER。1到3,authKey填用户名,authPwd填密码， 4 authKey填AK，
          authPwd填SK, 5,6,7,8认证认证信息在扩展字段中扩充。
  ProtectedResourceResponse:
    type: object
    description: 创建资源请求体
    properties:
      uuid:
        type: string
      name:
        type: string
      type:
        type: string
      subType:
        type: string
      path:
        type: string
      rootUuid:
        type: string
      parentUuid:
        type: string
      extendInfo:
        type: object
        additionalProperties:
          type: string
      createdTime:
        type: string
        format: date-time
      version:
        type: string
      parentName:
        type: string
      userId:
        type: string
      authorizedUser:
        type: string
      protectedObject:
        $ref: '#/definitions/ProtectedObject'
      environment:
        $ref: '#/definitions/ProtectedEnvironment'
      auth:
        $ref: '#/definitions/AuthTypeInfo'
      protectedAgentExtend:
        $ref: '#/definitions/ProtectedAgentExtend'
  ProtectedAgentExtend:
    type: object
    properties:
      cpuRate:
        type: number
        format: double
        description: CPU占用率
      memRate:
        type: number
        format: double
        description: 内存占用率
      lastUpdateTime:
        type: integer
        format: int64
        description: 最近一次更新时间
      isShared:
        type: boolean
        description: 是否多租户共享
  ProtectedResourcePageListResponse:
    type: object
    properties:
      totalCount:
        type: integer
        format: int32
      records:
        type: array
        items:
          $ref: '#/definitions/ProtectedResourceResponse'
  AgentApplicationMenu:
    type: object
    description: agent注册，下载 应用选择菜单
    properties:
      menus:
        items:
          $ref: '#/definitions/AgentMenu'
        description: 应用一级菜单信息
        type: array
  AgentApplication:
    type: object
    description: agent应用信息
    required:
      - appDesc
      - appValue
      - appLabel
      - pluginName
    properties:
      appDesc:
        type: string
        description: 应用名称
      appValue:
        type: string
        description: 应用对用子类型
      appLabel:
        type: string
        description: 应用label
      pluginName:
        type: string
        description: 插件名称
  AgentMenu:
    type: object
    required:
      - menuDesc
      - menuValue
      - menuLabel
    properties:
      menuDesc:
        type: string
        description: 菜单名称
      menuValue:
        type: string
        description: 菜单value
      menuLabel:
        type: string
        description: 菜单label
      applications:
        items:
          $ref: '#/definitions/AgentApplication'
        description: 菜单下应用信息
        type: array
  AgentUpdatePluginTypeRequest:
    type: object
    required:
      - uuid
      - agentApplicationMenu
    properties:
      uuid:
        type: string
        description: 主机ID
      agentApplicationMenu:
        description: 应用类型列表
        $ref: '#/definitions/AgentApplicationMenu'
  AgentManagementDomain:
    type: object
    properties:
      domain:
        type: string
        description: 域名
      port:
        type: integer
        format: int32
        description: 端口号
  AgentHeartBeatParam:
    type: object
    required:
      - uuid
      - connectedBusinessIps
    properties:
      uuid:
        type: string
        description: 主机资源ID
      connectedBusinessIps:
        type: array
        items:
          type: string
        description: 能联通的代理ip
      extendInfo:
        type: string
        description: agent扩展信息
        maxLength: 2048
      hostname:
        type: string
        description: agent hostname
        maxLength: 512
  AgentResourceMonitorParams:
    type: object
    properties:
      uuid:
        type: string
        description: agent资源id
      cpuRate:
        type: number
        format: double
        description: agent上报的资源占用率
      memRate:
        type: number
        format: double
        description: agent上报的内存占用率
  IpInfoParam:
    type: object
    required:
      - ip
      - port
      - sftpPort
    properties:
      ip:
        type: string
        description: ip
        maxLength: 1024
        minLength: 0
      port:
        type: integer
        format: int32
        description: port
        minimum: 0
        maximum: 65535
      sftpPort:
        type: integer
        format: int32
        description: sftpPort
        minimum: 0
        maximum: 65535
      businessIpFlag:
        type: string
        description: 是否为业务Ip
        maxLength: 256
        minLength: 0
      availableZone:
        type: string
        description: Available Zone的id
        minLength: 0
        maxLength: 256
      username:
        type: string
        description: 远程连接用户名
        minLength: 1
        maxLength: 255
      password:
        type: string
        description: 远程连接用户密码
        minLength: 1
        maxLength: 255
      isSuperUser:
        type: boolean
        description: 是否是超级管理员
      superPassword:
        type: string
        minLength: 1
        maxLength: 255
  AgentCheckSupportParam:
    type: object
    required:
      - hostUuidsAndIps
      - applicationType
      - scene
      - buttonNames
    properties:
      hostUuidsAndIps:
        type: array
        items:
          type: string
        description: 字符串数组，相关agent的uuid
      applicationType:
        type: string
        description: 应用类型
      scene:
        type: integer
        format: int32
        description: 使用场景：1、注册；2、备份；3、恢复
      buttonNames:
        type: array
        items:
          type: string
        description: 按钮名称列表
