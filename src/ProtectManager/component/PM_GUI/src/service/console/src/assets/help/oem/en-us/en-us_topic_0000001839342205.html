<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Restoring OceanBase">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001839342145.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
  <meta name="DC.Publisher" content="20240608">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="EN-US_TOPIC_0000001839342205">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Restoring OceanBase</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="EN-US_TOPIC_0000001839342205"></a><a name="EN-US_TOPIC_0000001839342205"></a>
  <h1 class="topictitle1">Restoring OceanBase</h1>
  <div>
   <p>This section describes how to use copies to restore an OceanBase resource to the original or a different host when you need to restore a cluster or tenant set that has been backed up.</p>
   <div class="section">
    <h4 class="sectiontitle">Prerequisites</h4>
    <ul>
     <li>Before restoration, ensure that the remaining space of the data directory at the target location for restoration is greater than the size of the copy used for restoration before reduction. Otherwise, restoration will fail.</li>
    </ul>
    <ul>
     <li>During the first restoration, ensure that the value of <strong>restore_concurrency</strong> of the OceanBase database is not <strong>0</strong>. The recommended value is <strong>10</strong>.</li>
     <li>Ensure that at least one idle resource pool exists in the OceanBase database and its CPUs and memory are greater than or equal to those of the original tenant. Otherwise, create a resource pool. For details about how to create a resource pool, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001167105" target="_blank" rel="noopener noreferrer">OceanBase official document</a>.</li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001839142377_uicontrol4958517162719"><b><span id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001839142377_text695841713270"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001839142377_text1595819176270"><strong>Copy Data</strong></span> &gt; <span id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001839142377_text14787949194912"><strong>Databases</strong></span> &gt; OceanBase</b></span>.</span></li>
     <li><span>Search for OceanBase copies by resource or copy.</span><p></p>
      <ul>
       <li>On the <span class="uicontrol"><b><span><strong>Resources</strong></span></b></span> page, find the cluster or tenant set to be restored by name and click the name.</li>
       <li>On the <span class="uicontrol"><b><span><strong>Copy</strong></span></b></span> page, find the target copy based on the copy information, and choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>Restore</strong></span></b></span> in the row where the copy is located.</li>
      </ul> <p>This section uses the database resource dimension as an example to describe the related operations.</p> <p></p></li>
     <li><span>Select the resource for copy-based restoration.</span></li>
     <li><span>Specify a copy or a point in time for restoration.</span><p></p>
      <ul>
       <li>Restoration using a specified copy
        <ol type="a">
         <li>Select the year, month, and day in sequence to find the copy.<p>If <span><img src="en-us_image_0000001792742910.png"></span> is displayed below a month or date, copies exist in the month or on the day.</p></li>
         <li>On the copy data page, click <span><img src="en-us_image_0000001792583182.png"></span> and choose <span class="menucascade"><b><span class="uicontrol"><span><strong>More</strong></span></span></b> &gt; <b><span class="uicontrol"><span><strong>Restore</strong></span></span></b></span> in the row where the desired copy is located.</li>
        </ol></li>
       <li>Restoration to a specified point in time
        <ol type="a">
         <li>Select the year, month, and day in sequence to find the copy.<p>If <span><img src="en-us_image_0000001839302245.png"></span> is displayed below a month or date, copies exist in the month or on the day.</p></li>
         <li>On the copy data page, click <span><img src="en-us_image_0000001839342289.png"></span>. In the blue part on the timeline, select a copy and choose <span class="menucascade"><b><span class="uicontrol"><span><strong>More</strong></span></span></b> &gt; <b><span class="uicontrol"><span><strong>Restore</strong></span></span></b></span>.
          <div class="note">
           <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
           <div class="notebody">
            <ul id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001839188281_ul75802612312">
             <li id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001839188281_li1497342618234">For 1.5.0, a maximum of 100 copies can be displayed on the timeline. You can click <span><img id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001839188281_image173544102299" src="en-us_image_0000001886153709.png"></span> to view all copies.</li>
             <li id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001839188281_li95818264231">During point-in-time recovery, the information about the copy used for restoration cannot be obtained on the management page. Therefore, users cannot view the copy information of the restoration job on pages of the restoration job and related events.</li>
            </ul>
           </div>
          </div></li>
        </ol></li>
      </ul> <p></p></li>
     <li><span>Restore OceanBase to the original or a new location.</span><p></p><p><a href="#EN-US_TOPIC_0000001839342205__en-us_topic_0000001263614142_table93951625101715">Table 1</a> describes the related parameters.</p>
      <div class="tablenoborder">
       <a name="EN-US_TOPIC_0000001839342205__en-us_topic_0000001263614142_table93951625101715"></a><a name="en-us_topic_0000001263614142_table93951625101715"></a>
       <table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001839342205__en-us_topic_0000001263614142_table93951625101715" frame="border" border="1" rules="all">
        <caption>
         <b>Table 1 </b>OceanBase restoration parameters
        </caption>
        <colgroup>
         <col style="width:32.48%">
         <col style="width:67.52%">
        </colgroup>
        <thead align="left">
         <tr>
          <th align="left" class="cellrowborder" valign="top" width="32.48%" id="mcps1.3.3.2.5.2.2.2.3.1.1"><p>Parameter</p></th>
          <th align="left" class="cellrowborder" valign="top" width="67.52%" id="mcps1.3.3.2.5.2.2.2.3.1.2"><p>Description</p></th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td class="cellrowborder" valign="top" width="32.48%" headers="mcps1.3.3.2.5.2.2.2.3.1.1 "><p><span><strong>Restore To</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="67.52%" headers="mcps1.3.3.2.5.2.2.2.3.1.2 "><p>Select restoration to either <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span> or <span class="uicontrol"><b><span><strong>New location</strong></span></b></span>.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="32.48%" headers="mcps1.3.3.2.5.2.2.2.3.1.1 "><p><span><strong>Location</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="67.52%" headers="mcps1.3.3.2.5.2.2.2.3.1.2 "><p>If you select restoration to <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span>, the target location is displayed by default.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="32.48%" headers="mcps1.3.3.2.5.2.2.2.3.1.1 "><p><span><strong>Target Cluster</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="67.52%" headers="mcps1.3.3.2.5.2.2.2.3.1.2 "><p>If you select restoration to <span><strong>New location</strong></span>, you can specify the target cluster.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="32.48%" headers="mcps1.3.3.2.5.2.2.2.3.1.1 "><p><span><strong>Tenant</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="67.52%" headers="mcps1.3.3.2.5.2.2.2.3.1.2 ">
           <ul>
            <li>If you select restoration to <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span>, you must select an idle resource pool.</li>
            <li>If you select restoration to <span><strong>New location</strong></span>, you must set a new tenant name and select an idle resource pool.</li>
           </ul></td>
         </tr>
        </tbody>
       </table>
      </div> <p></p></li>
     <li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="en-us_topic_0000001839342145.html">Restoration</a>
    </div>
   </div>
  </div>
 </body>
</html>