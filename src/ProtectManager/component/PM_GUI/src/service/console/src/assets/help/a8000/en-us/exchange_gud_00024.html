
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Step 4: Performing the Backup">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="exchange_gud_00020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20241030">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="exchange_gud_00024">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Step 4: Performing the Backup</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="exchange_gud_00024"></a><a name="exchange_gud_00024"></a>

<h1 class="topictitle1">Step 4: Performing the Backup</h1>
<div><p>Before performing backup, you need to associate the resources to be protected with a specified SLA policy. The system protects the resources based on the SLA policy and periodically performs backup jobs based on the SLA policy. You can perform a backup job immediately through manual backup.</p>
<div class="section"><h4 class="sectiontitle">Precautions</h4><p>If a full backup fails and the next backup is an incremental backup, the incremental backup is automatically converted to a full backup because the incremental backup depends on the copy generated in the last successful full backup.</p>
</div>
<div class="section"><h4 class="sectiontitle">Prerequisites</h4><p id="exchange_gud_00024__exchange_gud_00032_p17201613205718">Before the backup, ensure that the Exchange Server service and related dependent services are running properly. For details about the corresponding services, see <a href="https://learn.microsoft.com/en-us/exchange/plan-and-deploy/deployment-ref/services-overview?view=exchserver-2019" target="_blank" rel="noopener noreferrer">Overview of Exchange services on Exchange servers</a>.</p>
<ul id="exchange_gud_00024__exchange_gud_00032_ul13695144991014"><li id="exchange_gud_00024__exchange_gud_00032_li42661234120">Before performing the backup, ensure that the <span id="exchange_gud_00024__exchange_gud_00032_text18641740161213">OceanProtect</span> time is the same as the client time. Otherwise, data may be lost after log restoration.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Context</h4><ul><li>During the execution of a manual backup job, the parameters (except <span class="uicontrol"><b><span><strong>Automatic Retry</strong></span></b></span>) defined in the SLA, such as <span class="uicontrol"><b><span><strong>Rate Limiting Policies</strong></span></b></span>, will take effect.</li><li>Copies generated by manual backup are retained for the duration defined in the SLA.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="exchange_gud_00024__en-us_topic_0000001839142377_uicontrol26447265316"><b><span id="exchange_gud_00024__en-us_topic_0000001839142377_text8644926538"><strong>Protection</strong></span> &gt; <span id="exchange_gud_00024__en-us_topic_0000001839142377_text1310114196546"><strong>Applications</strong></span> &gt; <span id="exchange_gud_00024__en-us_topic_0000001839142377_text2114145125312"><strong>Exchange</strong></span></b></span>.</span></li><li><span>On the <span class="uicontrol"><b>Single-Node Systems/Availability Groups</b></span> or <span class="uicontrol"><b><span><strong>Databases</strong></span></b></span> tab page, select the single-node system, availability group, or database resource to be protected, and choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>Protect</strong></span></b></span>.</span><p><p>You can also select multiple resources for batch protection.</p>
</p></li><li><span>Select an SLA.</span><p><p>You can also click <span class="uicontrol"><b><span><strong>Create</strong></span></b></span> to create an SLA.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="exchange_gud_00024__en-us_topic_0000001964713008_p125947145711"><span id="exchange_gud_00024__en-us_topic_0000001964713008_ph1413818422327">If a WORM policy has been configured for the resource to be protected, select an SLA without a WORM policy to create protection to avoid WORM policy conflicts.</span></p>
</div></div>
</p></li><li><span>Configure advanced parameters for backing up an Exchange single-node system, availability group, or database.</span><p><div class="p"><a href="#exchange_gud_00024__en-us_topic_0000001506038733_table354613271506">Table 1</a> describes the related parameters.
<div class="tablenoborder"><a name="exchange_gud_00024__en-us_topic_0000001506038733_table354613271506"></a><a name="en-us_topic_0000001506038733_table354613271506"></a><table cellpadding="4" cellspacing="0" summary="" id="exchange_gud_00024__en-us_topic_0000001506038733_table354613271506" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Advanced parameters for backing up an Exchange single-node system, availability group, or database</caption><colgroup><col style="width:19.75%"><col style="width:80.25%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="19.75%" id="mcps1.3.5.2.4.2.1.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="80.25%" id="mcps1.3.5.2.4.2.1.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="19.75%" headers="mcps1.3.5.2.4.2.1.2.2.3.1.1 "><p><strong>VSS Copy Consistency Verification</strong></p>
</td>
<td class="cellrowborder" valign="top" width="80.25%" headers="mcps1.3.5.2.4.2.1.2.2.3.1.2 "><p>After this function is enabled, the integrity of each database file to be backed up is verified to ensure the correctness of the backup data.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="19.75%" headers="mcps1.3.5.2.4.2.1.2.2.3.1.1 "><p><strong>Availability Group Backup</strong></p>
</td>
<td class="cellrowborder" valign="top" width="80.25%" headers="mcps1.3.5.2.4.2.1.2.2.3.1.2 "><p>This parameter can be set only when you add or modify protection for an availability group or a database in an availability group.</p>
<ul><li><strong>Back up active database copy</strong></li><li><strong>Back up passive database copy</strong></li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="19.75%" headers="mcps1.3.5.2.4.2.1.2.2.3.1.1 "><p><span><strong>Script to Run Before Backup</strong></span></p>
</td>
<td class="cellrowborder" rowspan="3" valign="top" width="80.25%" headers="mcps1.3.5.2.4.2.1.2.2.3.1.2 "><p>You can configure <span><strong>Script to Run Before Backup</strong></span>, <span><strong>Script to Run upon Backup Success</strong></span>, and <span><strong>Script to Run upon Backup Failure</strong></span> only when adding protection for a single-node system or its databases. When the message "ProtectAgent started executing the prerequisite task." is displayed during a backup job, the configured script is executed in the corresponding scenario.</p>
<p>Enter a script name that ends with <strong>.bat</strong>. Ensure that the script is stored in the <span class="filepath"><b>DataBackup\ProtectClient\ProtectClient-E\bin\thirdparty</b></span> directory in the database host installation directory and the user (<strong>Administrator</strong> by default) who has logged in to the database host is permitted to execute the script. If the user has no execution permission, perform the following operations in sequence to grant the permission:</p>
<p>Right-click the script and choose <strong>Properties</strong> &gt; <strong>Security</strong>. In the dialog box that is displayed, select the <strong>Administrator</strong> user and click <strong>Edit</strong> to change the permission.</p>
<p>The supported script type is <span class="uicontrol"><b>.bat</b></span>.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>If <span class="uicontrol"><b><span><strong>Script to Run upon Backup Success</strong></span></b></span> is configured, the status of the backup job is displayed as <span class="uicontrol"><b><span><strong>Succeeded</strong></span></b></span> on the management page even if the script fails to be executed. Check whether the job details contain a message indicating that the post-processing script fails to be executed. If yes, modify the script in a timely manner.</li><li>You can execute custom scripts of the bat type based on your needs before a backup job is executed, after a restoration job is successfully executed, or after a backup job fails to be executed. If the script is stored in the <strong>DataBackup\ProtectClient\ProtectClient-E\bin\thirdparty</strong> directory, you only need to enter the script name. If the script is stored in another directory, you need to enter the absolute path of the script.</li></ul>
</div></div>
<p></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.5.2.4.2.1.2.2.3.1.1 "><p><span><strong>Script to Run upon Backup Success</strong></span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.5.2.4.2.1.2.2.3.1.1 "><p><span><strong>Script to Run upon Backup Failure</strong></span></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</p></li></ol><ol start="5"><li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>. </span><p><p>If the current system time is later than the start time of the first backup set in the SLA, you can choose to perform the backup immediately or wait for the next scheduling based on the backup policy set in the SLA after the backup SLA is associated with the resource.</p>
</p></li><li><strong>Optional: </strong><span>Perform manual backup.</span><p><p>If you want to perform a backup job immediately, perform manual backup through the following operations. Otherwise, skip this step.</p>
<ol type="a"><li>Choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>Manual Backup</strong></span></b></span> in the row containing the single-node system, availability group, or database to be backed up. Multiple resources can be manually backed up at the same time.</li><li>Select a protection policy, which can be <span><strong>Full backup</strong></span>, <span><strong>Log Backup</strong></span>, or <span><strong>Forever Incremental (Synthetic Full) Backup</strong></span>.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="exchange_gud_00024__en-us_topic_0000001964713008_p13522118194919"><span id="exchange_gud_00024__en-us_topic_0000001964713008_ph19374310343">For 1.6.0 and later versions: If the selected protection policy is different from that configured in the associated SLA, the WORM configuration does not take effect.</span></p>
</div></div>
</li><li>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</li></ol>
</p></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="exchange_gud_00020.html">Backing Up an Exchange Single-Node System, Availability Group, or Database</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>