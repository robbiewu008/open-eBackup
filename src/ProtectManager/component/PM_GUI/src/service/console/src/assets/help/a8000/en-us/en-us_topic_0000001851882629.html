<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Restoring Files on a CNware VM">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001851882549.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20240608">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001851882629">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Restoring Files on a CNware VM</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000001851882629"></a><a name="EN-US_TOPIC_0000001851882629"></a>

<h1 class="topictitle1">Restoring Files on a CNware VM</h1>
<div><p>This section describes how to restore files on a VM by using the file-level restoration function.</p>
<div class="section"><h4 class="sectiontitle">Context</h4><ul><li>The <span>OceanProtect</span> allows you to restore files using backup copies, reverse replication copies (restoration to the original location is not supported), cascaded replication copies (restoration to the original location is not supported), or replication copies (restoration to the original location is not supported).</li><li>The types of Linux file systems that can be restored are ext2/ext3/ext4 and XFS. The types of Windows file systems that can be restored are NTFS, FAT, and FAT32.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Prerequisites</h4><ul><li>The IP address of the service network plane has been configured for the VM to which files are to be restored.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882637_en-us_topic_0000001839142377_uicontrol83861452916"><b><span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882637_en-us_topic_0000001839142377_text43841419297"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882637_en-us_topic_0000001839142377_text1438121413291"><strong>Copy Data</strong></span> &gt; <span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882637_en-us_topic_0000001839142377_text33811146299"><strong>Virtualization</strong></span> &gt; CNware</b></span>.</span></li><li><span>You can search for a copy by VM or copy. This section uses a VM as an example.</span><p><p>Click the <strong>Resources</strong> tab, search for the VM to be restored by name, and click the VM name.</p>
</p></li><li><span>Click the <span class="uicontrol"><b><span><strong>Copy Data</strong></span></b></span> tab and select the year, month, and day in sequence to find the copy.</span><p><p>If <span><img src="en-us_image_0000001805083918.png"></span> is displayed below a month or day, a copy is generated in the month or on the day.</p>
</p></li><li><span>Find the copy to be restored and choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>File-level Restoration</strong></span></b></span>.</span></li><li><span>Select the file to be restored and configure restoration parameters.</span><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>File-level restoration is supported only when the index status of the copy is <span class="uicontrol"><b><span><strong>Indexed</strong></span></b></span>.</li><li>If automatic indexing has been enabled for the SLA associated with the VM corresponding to the copy, the index status of the copy is <span class="uicontrol"><b><span><strong>Indexed</strong></span></b></span>, and file-level restoration can be directly performed. If automatic indexing is disabled, click <span class="uicontrol"><b><span><strong>Manually Create Index</strong></span></b></span> and then perform file-level restoration.</li><li>If the copy does not contain OS data, no index can be created for the copy. Therefore, the copy cannot be used for file-level restoration.</li><li>During CNware VM backup, the mount point information that is not written into the <strong>/etc/fstab</strong> file is stored in the memory. The <span>OceanProtect</span> does not back up the information. Therefore, no index is generated for the files at the mount point, and file-level restoration is not supported. To generate indexes for new file systems and support file-level restoration, write the mount point information of the new file systems to the <strong>/etc/fstab</strong> file.</li><li>If the name of a folder or file contains garbled characters, file-level restoration is not supported. Do not select folders or files of this type. Otherwise, the restoration job fails.</li><li>If the target VM runs the Windows OS and only the SMBv1 service is enabled, the time of the restored file is the current VM time.</li></ul>
</div></div>
<ul><li>Select <strong>Original Location</strong>, that is, restore data to the original directory of the original VM.<div class="p"><a href="#EN-US_TOPIC_0000001851882629__table9960822181311">Table 1</a> describes the related parameters.
<div class="tablenoborder"><a name="EN-US_TOPIC_0000001851882629__table9960822181311"></a><a name="table9960822181311"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001851882629__table9960822181311" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Parameters for restoring data to the original location</caption><colgroup><col style="width:29.9%"><col style="width:70.1%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.9%" id="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.1%" id="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.9%" headers="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.1 "><p><span><strong>VM IP Address</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="70.1%" headers="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.2 "><div class="p" id="EN-US_TOPIC_0000001851882629__p49594222135">Select the configured backup network IP address.<div class="note" id="EN-US_TOPIC_0000001851882629__note13959142281314"><span class="notetitle"> NOTE: </span><div class="notebody"><ul id="EN-US_TOPIC_0000001851882629__ul184254158477"><li id="EN-US_TOPIC_0000001851882629__li13425121554713">Before performing file-level restoration, you need to configure a backup network IP address for the VM. During file-level restoration, the system uses this IP address to connect to the target VM.</li><li id="EN-US_TOPIC_0000001851882629__li1130711714475">If the VM IP address is not in the list, exit the current page. Then, choose <span class="uicontrol" id="EN-US_TOPIC_0000001851882629__uicontrol61481615124114"><b><span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001839142377_text134457431679"><strong>Protection</strong></span> &gt; Virtualization &gt; CNware</b></span> and rescan the virtualization environment.</li></ul>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.9%" headers="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.1 "><p><span><strong>VM Username</strong></span></p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="70.1%" headers="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.2 "><div class="p" id="EN-US_TOPIC_0000001851882629__p196016226135">During file-level restoration, the target VM needs to verify the login credential of the <span id="EN-US_TOPIC_0000001851882629__text15868524164815">OceanProtect</span>. Enter a username and its password for logging in to the target VM.<ul id="EN-US_TOPIC_0000001851882629__ul119609220135"><li id="EN-US_TOPIC_0000001851882629__li796017225136">Windows OS: The default user name is <strong id="EN-US_TOPIC_0000001851882629__b1579523971220">Administrator</strong>.</li><li id="EN-US_TOPIC_0000001851882629__li1496012225130">Linux OS: The default user name is <strong id="EN-US_TOPIC_0000001851882629__b29741052111218">root</strong>.</li></ul>
<div class="note" id="EN-US_TOPIC_0000001851882629__note10319381535"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001851882629__p13324381436">The login user must have the read and write permissions on the directory to which data is to be restored on the target VM.</p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.1 "><p><span><strong>VM Password</strong></span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.9%" headers="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.1 "><p><span><strong>Overwrite Rule</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="70.1%" headers="mcps1.3.4.2.5.2.2.1.2.2.2.3.1.2 "><div class="p" id="EN-US_TOPIC_0000001851882629__p78773497306">If a file with the same name exists in the restoration path, you can choose to replace or skip the existing file.<ul id="EN-US_TOPIC_0000001851882629__ul138776497307"><li id="EN-US_TOPIC_0000001851882629__li1087714914306"><span id="EN-US_TOPIC_0000001851882629__text2877849173018"><strong>Replace existing files</strong></span></li><li id="EN-US_TOPIC_0000001851882629__li1287717497308"><span id="EN-US_TOPIC_0000001851882629__text148771149123013"><strong>Skip existing files</strong></span>: Files with the same names are skipped and are not replaced.</li><li id="EN-US_TOPIC_0000001851882629__li68771149143011"><span id="EN-US_TOPIC_0000001851882629__text5877184993017"><strong>Only replace the files older than the restoration file</strong></span><div class="note" id="EN-US_TOPIC_0000001851882629__note98771049113012"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001851882629__p15877144918305">If the access to the file with the same name on the target VM is denied, the file fails to be restored during file replacement.</p>
</div></div>
</li></ul>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</li><li>Select a new location to restore data to, that is, restore data to a specified VM.<p><a href="#EN-US_TOPIC_0000001851882629__table14691181871520">Table 2</a> describes the related parameters.</p>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000001851882629__table14691181871520"></a><a name="table14691181871520"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001851882629__table14691181871520" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Parameters for restoring data to a new location</caption><colgroup><col style="width:22.75%"><col style="width:77.25%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="22.75%" id="mcps1.3.4.2.5.2.2.2.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="77.25%" id="mcps1.3.4.2.5.2.2.2.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="22.75%" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.1 "><p><span><strong>Target Compute Location</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.25%" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.2 "><div class="p">Select the target compute resource to be restored.<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>If the specified VM runs on a Windows OS, the directory to which data is restored is the same as the original directory of the file. If the VM does not have the corresponding drive letter, restoration will fail. For example, if the file path is <strong>D:\a\b.txt</strong>, the <strong>a</strong> directory is created on drive <strong>D</strong> of the specified VM before file restoration is performed. If drive <strong>D</strong> does not exist on the specified VM, restoration will fail.</li><li>If the specified VM runs on a Linux OS, the directory to which data is restored is the same as the original directory of the file. During restoration, the corresponding directory is created on the specified VM before file restoration is performed</li></ul>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.75%" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.1 "><p><span><strong>VM IP Address</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.25%" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.2 "><div class="p">Select the configured backup network IP address.<div class="note" id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_note13959142281314"><span class="notetitle"> NOTE: </span><div class="notebody"><ul id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_ul184254158477"><li id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_li13425121554713">Before performing file-level restoration, you need to configure a backup network IP address for the VM. During file-level restoration, the system uses this IP address to connect to the target VM.</li><li id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_li1130711714475">If the VM IP address is not in the list, exit the current page. Then, choose <span class="uicontrol" id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_uicontrol61481615124114"><b><span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_en-us_topic_0000001839142377_text134457431679"><strong>Protection</strong></span> &gt; Virtualization &gt; CNware</b></span> and rescan the virtualization environment.</li></ul>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.75%" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.1 "><p><span><strong>VM Username</strong></span></p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="77.25%" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.2 "><div class="p">During file-level restoration, the target VM needs to verify the login credential of the <span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_text15868524164815">OceanProtect</span>. Enter a username and its password for logging in to the target VM.<ul id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_ul119609220135"><li id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_li796017225136">Windows OS: The default user name is <strong id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_b1579523971220">Administrator</strong>.</li><li id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_li1496012225130">Linux OS: The default user name is <strong id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_b29741052111218">root</strong>.</li></ul>
<div class="note" id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_note10319381535"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_p13324381436">The login user must have the read and write permissions on the directory to which data is to be restored on the target VM.</p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.1 "><p><span><strong>VM Password</strong></span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.75%" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.1 "><p><span><strong>Overwrite Rule</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.25%" headers="mcps1.3.4.2.5.2.2.2.2.2.3.1.2 "><div class="p">If a file with the same name exists in the restoration path, you can choose to replace or skip the existing file.<ul id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_ul138776497307"><li id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_li1087714914306"><span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_text2877849173018"><strong>Replace existing files</strong></span></li><li id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_li1287717497308"><span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_text148771149123013"><strong>Skip existing files</strong></span>: Files with the same names are skipped and are not replaced.</li><li id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_li68771149143011"><span id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_text5877184993017"><strong>Only replace the files older than the restoration file</strong></span><div class="note" id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_note98771049113012"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001851882629__en-us_topic_0000001851882629_p15877144918305">If the access to the file with the same name on the target VM is denied, the file fails to be restored during file replacement.</p>
</div></div>
</li></ul>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</li></ul>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>Test</strong></span></b></span> and ensure that the target VM to be restored is properly connected to the <span>OceanProtect</span>.</span></li><li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000001851882549.html">Restoration</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>