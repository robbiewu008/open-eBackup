<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Restoring Files in a NAS File System (Applicable to OceanProtect X Series Backup Appliances)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000002200131633.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="">
<meta name="DC.Publisher" content="20250306">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000002164645296">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Restoring Files in a NAS File System (Applicable to OceanProtect X Series Backup Appliances)</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000002164645296"></a><a name="EN-US_TOPIC_0000002164645296"></a>

<h1 class="topictitle1">Restoring Files in a NAS File System<span> (Applicable to OceanProtect X Series Backup Appliances)</span></h1>
<div><p>This section describes how to restore specified files in a NAS file system that has been backed up to their original location, new locations, or local locations.</p>
<div class="section" id="EN-US_TOPIC_0000002164645296__section14342462311"><h4 class="sectiontitle">Context</h4><ul id="EN-US_TOPIC_0000002164645296__ul1684123102616"><li id="EN-US_TOPIC_0000002164645296__li15684153110268">The <span id="EN-US_TOPIC_0000002164645296__text19278102815148">OceanProtect</span> supports file-level restoration using backup copies, replication copies, and copies archived to object storage.</li><li id="EN-US_TOPIC_0000002164645296__li2871134142617">To query the compatibility of file systems that support indexes, you can log in to the <a href="https://info.support.huawei.com/storage/comp/#/oceanprotect" target="_blank" rel="noopener noreferrer">OceanProtect Compatibility Query</a> tool.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Precautions</h4><p>If a folder or file name contains garbled characters, file-level restoration is not supported. Do not select folders or files of this type. Otherwise, file-level restoration fails.</p>
</div>
<div class="section"><h4 class="sectiontitle">Prerequisites</h4><ul><li id="EN-US_TOPIC_0000002164645296__li16144353123019">For 1.5.0, file-level restoration is supported only when the index status of a copy is <span class="uicontrol" id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200157697_uicontrol483213401802"><b><span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200157697_text1711017353520">Indexed</span></b></span>. For 1.6.0 and later versions, copies whose index status is <span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200157697_text413155718286"><strong>Not indexed</strong></span> also support file-level restoration.</li><li>For 1.5.0, if automatic indexing has been enabled for the SLA associated with the VM corresponding to the copy, the index status of the copy is <span class="uicontrol" id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_uicontrol2988201618593"><b><span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_text198816168595"><strong>Indexed</strong></span></b></span>, and file-level restoration can be directly performed. If automatic indexing is disabled, click <span class="uicontrol" id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_uicontrol1036516011116"><b><span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_text31091220421"><strong>Manually Create Index</strong></span></b></span> and then perform file-level restoration.</li><li>To restore a NAS file system to a new location, a storage device residing at the new location needs to be added to the <span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_text1511818204144">OceanProtect</span>. For details about how to add a storage device, see <a href="en-us_topic_0000002200131529.html">Step 2: Adding a Storage Device</a>. The following lists the supported storage device types.<ul id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_ul1094984711471"><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000001792360666_li3415133617174">OceanStor Dorado V700R001</li><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000001792360666_li1739551514266">OceanStor V700R001</li><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000001792360666_li984654311123">OceanStor Dorado 6.x</li><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000001792360666_li151737411958">OceanStor 6.x</li><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000001792360666_li72988389413">OceanProtect 1.3.0 and later versions</li><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_li15575172132717">OceanStor V5</li><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_li632419162715">OceanStor Pacific</li><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_li207631011131214">NetApp ONTAP</li></ul>
</li><li>If a NAS file system is restored to a new location, create a target NAS file system on the storage device where the new location resides and configure a NAS share that uses the same share protocol as the copy to be restored. This is because the NAS file system is restored to a new location through NAS share. Therefore, you need to configure NAS share. </li><li>If you want to restore a NAS file system to a new location, you need to configure the access permission for the <span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_text17718172011416">OceanProtect</span> on the new storage device. For details, see <a href="en-us_topic_0000002164645244.html">Step 4: Configuring Access Permissions (Applicable to OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a>. During the operation, configure a client or add a user for the target NAS share.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_uicontrol097351016491"><b><span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_text79731210144915"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_text797381084918"><strong>Copy Data</strong></span> &gt; File Systems &gt; <span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_text75601138121416"><strong>NAS File Systems</strong></span></b></span>.</span><p><div class="note" id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_note414014816184"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_p15140194811813">For 1.5.0, choose <span class="uicontrol" id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_uicontrol117221257171816"><b><span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_text1772265701816"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_text1272245713186"><strong>Copy Data</strong></span> &gt; File Services &gt; <span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002199964685_text2072255721815"><strong>NAS File Systems</strong></span></b></span>.</p>
</div></div>
</p></li><li><span>Copies can be searched by NAS file system resource or copy. This section uses the NAS file system resource as an example.</span><p><p id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_p142551140161511">On the <span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_text6827103218214"><strong>Resources</strong></span> tab page, locate the NAS file system to be recovered by file system name and click the name.</p>
</p></li><li><span>On the <span class="uicontrol" id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_uicontrol1812414562220"><b><span id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_text18993182162710"><strong>Copy Data</strong></span></b></span> page, select the year, month, and day in sequence to locate the copy.</span><p><p id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_p9918150182310">If <span><img id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_image886000161711" src="en-us_image_0000002200131661.png"></span> is displayed under a month or date, copies exist in the month or on the date.</p>
</p></li><li id="EN-US_TOPIC_0000002164645296__li7995952193812"><span>Locate the copy for restoration and click <span class="uicontrol" id="EN-US_TOPIC_0000002164645296__uicontrol144673212457"><b><span id="EN-US_TOPIC_0000002164645296__text16241181213589"><strong>More</strong></span> &gt; <span id="EN-US_TOPIC_0000002164645296__text6433142318586"><strong>File-level Restoration</strong></span></b></span> on the right of the row where the copy is located.</span><p><ul id="EN-US_TOPIC_0000002164645296__ul31458297552"><li id="EN-US_TOPIC_0000002164645296__li1714532925520">For 1.5.0: Select the files to be restored from the directory tree.</li><li id="EN-US_TOPIC_0000002164645296__li1475353185516">For 1.6.0 and later versions: Set <strong id="EN-US_TOPIC_0000002164645296__b1932510245313">File Obtaining Mode</strong>, which can be <strong id="EN-US_TOPIC_0000002164645296__b1432520205311">Select file paths from the directory tree</strong> or <strong id="EN-US_TOPIC_0000002164645296__b1732514215320">Enter file paths</strong>.<div class="note" id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_note1195634711290"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_ul14956124712297"><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_li19956104762918">When entering a file path, enter a complete file path, for example, <strong id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_b745510458333">/opt/abc/efg.txt</strong> or <strong id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_b186591048123315">C:\abc\efg.txt</strong>. If you enter a folder path, for example, <strong id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_b15108423133414">/opt/abc</strong> or <strong id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002164813938_b13283162543410">C:\abc</strong>, all files in the folder are restored. The file name in the path is case sensitive.</li></ul>
</div></div>
</li></ul>
</p></li><li><span>Select the object to be restored and the restoration target location.</span><p><p>The restoration target location can be <span><strong>Original location</strong></span>, <span><strong>New location</strong></span>, or <span><strong>Local Host Location</strong></span>.</p>
<ul><li><span><strong>Original location</strong></span>: Restores data to the original file system.</li><li><span><strong>New location</strong></span>: Restores data to the file system of another device.</li><li><span><strong>Local Host Location</strong></span>: Restores data to the <span>OceanProtect</span>.</li></ul>
<p>For details about the parameters of the original location, see <a href="#EN-US_TOPIC_0000002164645296__table15751633235">Table 1</a>. For details about the parameters of a new location, see <a href="en-us_topic_0000002200046005.html#EN-US_TOPIC_0000002200046005__table429861453516">Table 3</a> and <a href="en-us_topic_0000002200046005.html#EN-US_TOPIC_0000002200046005__table1248313820599">Table 4</a>. <a href="#EN-US_TOPIC_0000002164645296__table165841851143">Table 2</a> describes the local host location parameters.</p>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000002164645296__table15751633235"></a><a name="table15751633235"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002164645296__table15751633235" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Parameters for restoring data to the original location</caption><colgroup><col style="width:24.39%"><col style="width:75.61%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="24.39%" id="mcps1.3.5.2.5.2.4.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="75.61%" id="mcps1.3.5.2.5.2.4.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="24.39%" headers="mcps1.3.5.2.5.2.4.2.3.1.1 "><p><span><strong>Location</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="75.61%" headers="mcps1.3.5.2.5.2.4.2.3.1.2 "><p>Location of a file system, which cannot be modified.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.39%" headers="mcps1.3.5.2.5.2.4.2.3.1.1 "><p><span><strong>Share Name</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="75.61%" headers="mcps1.3.5.2.5.2.4.2.3.1.2 "><p>Select the name of the share that accesses a file system.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_ul1132413149512"><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_li232417146518">For an NFS share, ensure that the current device has the read and write permissions on the NFS share directory and the <strong id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_en-us_topic_0000002164805032_b576222612114">no_root_squash</strong> option is enabled. For details about how to configure NFS share access permissions, see <a href="en-us_topic_0000002164645244.html">Step 4: Configuring Access Permissions (Applicable to OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a>.</li><li id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_li77121156195115">For a CIFS share, ensure that the current device has the read and write permissions on the CIFS share directory. You are advised to use a user in the Administrator group for backup. Otherwise, only files and directories whose read and write permissions are granted to the device can be backed up. For details about how to configure CIFS share access permissions, see <a href="en-us_topic_0000002164645244.html">Step 4: Configuring Access Permissions (Applicable to OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a>.</li></ul>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.39%" headers="mcps1.3.5.2.5.2.4.2.3.1.1 "><p><strong>Domain Name/IP Address</strong></p>
</td>
<td class="cellrowborder" valign="top" width="75.61%" headers="mcps1.3.5.2.5.2.4.2.3.1.2 "><p>Domain name or service IP address for accessing a NAS share.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.39%" headers="mcps1.3.5.2.5.2.4.2.3.1.1 "><p><span><strong>Authentication Method</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="75.61%" headers="mcps1.3.5.2.5.2.4.2.3.1.2 "><p>Authentication mode of a file system. This parameter is available when the share protocol of a backup copy is CIFS. For details about this parameter, see <a href="en-us_topic_0000002200046089.html#EN-US_TOPIC_0000002200046089__table1929515516558">Table 1</a>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.39%" headers="mcps1.3.5.2.5.2.4.2.3.1.1 "><p><strong id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_b7801200193818">Clients</strong></p>
</td>
<td class="cellrowborder" valign="top" width="75.61%" headers="mcps1.3.5.2.5.2.4.2.3.1.2 "><p>Select clients for performing backup jobs.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.39%" headers="mcps1.3.5.2.5.2.4.2.3.1.1 "><p><span><strong>Overwrite Rule</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="75.61%" headers="mcps1.3.5.2.5.2.4.2.3.1.2 "><p>If files with the same names exist in the restoration path, you can choose to replace or skip existing files.</p>
<ul><li><span><strong>Replace existing files</strong></span></li><li><span><strong>Skip existing files</strong></span></li><li><span><strong>Only replace the files older than the restoration file</strong></span></li></ul>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000002164645296__table165841851143"></a><a name="table165841851143"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002164645296__table165841851143" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Parameters for restoring data to the local location</caption><colgroup><col style="width:24.59%"><col style="width:75.41%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="24.59%" id="mcps1.3.5.2.5.2.5.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="75.41%" id="mcps1.3.5.2.5.2.5.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="24.59%" headers="mcps1.3.5.2.5.2.5.2.3.1.1 "><p id="EN-US_TOPIC_0000002164645296__p623210567101"><strong id="EN-US_TOPIC_0000002164645296__en-us_topic_0000002200046005_b7801200193818_1">Clients</strong></p>
</td>
<td class="cellrowborder" valign="top" width="75.41%" headers="mcps1.3.5.2.5.2.5.2.3.1.2 "><p id="EN-US_TOPIC_0000002164645296__p82328567102">Select clients for performing backup jobs.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.59%" headers="mcps1.3.5.2.5.2.5.2.3.1.1 "><p id="EN-US_TOPIC_0000002164645296__p6362115991016"><strong id="EN-US_TOPIC_0000002164645296__b102141227111213">Nodes</strong></p>
</td>
<td class="cellrowborder" valign="top" width="75.41%" headers="mcps1.3.5.2.5.2.5.2.3.1.2 "><p id="EN-US_TOPIC_0000002164645296__en-us_topic_0000001792360722_p336215919108">Local location of the cluster where the copy resides.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.59%" headers="mcps1.3.5.2.5.2.5.2.3.1.1 "><p id="EN-US_TOPIC_0000002164645296__p158517511048"><span id="EN-US_TOPIC_0000002164645296__text191084227520"><strong>File Systems</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="75.41%" headers="mcps1.3.5.2.5.2.5.2.3.1.2 "><p id="EN-US_TOPIC_0000002164645296__p15851451646">Select the file system to be restored to the local device. When restoring data to the local location for the first time, you can click <span class="uicontrol" id="EN-US_TOPIC_0000002164645296__uicontrol124218413611"><b><span id="EN-US_TOPIC_0000002164645296__text128775231364"><strong>Create</strong></span></b></span> to create a file system. For details about how to create a file system, see <a href="en-us_topic_0000002164645220.html">Creating a File System</a>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.59%" headers="mcps1.3.5.2.5.2.5.2.3.1.1 "><p id="EN-US_TOPIC_0000002164645296__p1725084223716"><span id="EN-US_TOPIC_0000002164645296__text132479819312"><strong>Overwrite Rule</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="75.41%" headers="mcps1.3.5.2.5.2.5.2.3.1.2 "><p id="EN-US_TOPIC_0000002164645296__p172501042153719">If files with the same names exist in the restoration path, you can choose to replace or skip existing files.</p>
<ul id="EN-US_TOPIC_0000002164645296__ul15250642173717"><li id="EN-US_TOPIC_0000002164645296__li52501642173711"><span id="EN-US_TOPIC_0000002164645296__text14250042193711"><strong>Replace existing files</strong></span></li><li id="EN-US_TOPIC_0000002164645296__li15250154283711"><span id="EN-US_TOPIC_0000002164645296__text52507424377"><strong>Skip existing files</strong></span></li><li id="EN-US_TOPIC_0000002164645296__li22501342183719"><span id="EN-US_TOPIC_0000002164645296__text32501742143716"><strong>Only replace the files older than the restoration file</strong></span></li></ul>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000002200131633.html">Restoration</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>