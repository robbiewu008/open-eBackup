
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Step 5: Creating a Backup SLA">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001792556544.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20240608">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001792396760">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Step 5: Creating a Backup SLA</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000001792396760"></a><a name="EN-US_TOPIC_0000001792396760"></a>

<h1 class="topictitle1">Step 5: Creating a Backup SLA</h1>
<div><p>The system provides three preset SLAs: Gold, Silver, and Bronze. If the preset SLAs meet your backup requirements, skip this section. You can also customize SLAs based on your requirements to protect resources. </p>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839142377_uicontrol8111821122820"><b><span id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839142377_text71111921162814"><strong>Protection</strong></span> &gt; Protection Policies &gt; SLAs</b></span>.</span></li><li><span>Click <span class="uicontrol"><b><span><strong>Create</strong></span></b></span>.</span></li><li><span>Enter an SLA name.</span></li><li><span>Select an application type for the SLA to be created.</span><p><ol type="a"><li>Click the <span class="uicontrol"><b><span><strong>Apply</strong></span></b></span> icon and select an application for the SLA to be created.<ul><li><span id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_text10801323154310"><strong>General SLA</strong></span><p id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_p144377559348">A general SLA can be applied to resources except filesets, SQL Server, PostgreSQL, Kingbase, Redis, ClickHouse, MongoDB, NAS shares, NAS file systems, Huawei Cloud Stack GaussDB, TDSQL, Kubernetes CSI, TiDB, volumes, common shares, GaussDB T single-node systems, and object storage.</p>
</li><li><span><strong>Specific to application</strong></span><p>Select an application type for the SLA to be created. This section uses creating a specified application as an example.</p>
</li></ul>
</li><li>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</li></ol>
</p></li><li><span>Configure a backup policy.</span><p><ol type="a"><li>Click the <span class="uicontrol"><b><span><strong>Backup Policy</strong></span></b></span> icon.</li><li>Set basic parameters for the backup policy.<p><a href="#EN-US_TOPIC_0000001792396760__table2663151516335">Table 1</a> describes the related parameters.</p>
<div class="p">Set the backup interval, backup retention period, and backup time window based on service requirements. The recommended settings are as follows:<ul id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_ul188491594283"><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li14385102192911">The backup interval must be longer than the backup duration.</li><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li19397172762917">The retention period of a full backup copy must be longer than that of an incremental backup (or forever incremental (synthetic full) backup) copy.</li><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li2084975982817">The retention period must be longer than the backup interval.</li></ul>
<div class="note" id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_note71621858195515"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_ul192116591633"><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li921115591430">At least one backup policy must be created. To add another backup policy, click <span><img id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_image178791955235" src="en-us_image_0000001939082533.png"></span> on the right of the page.</li><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li621119590319">A maximum of four backup policies can be added for each backup type.</li></ul>
</div></div>
</div>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000001792396760__table2663151516335"></a><a name="table2663151516335"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001792396760__table2663151516335" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Basic parameters of a backup policy</caption><colgroup><col style="width:11.899999999999999%"><col style="width:15.25%"><col style="width:72.85000000000001%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" colspan="2" valign="top" id="mcps1.3.2.2.5.2.1.2.3.2.4.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.3.2.2.5.2.1.2.3.2.4.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="11.899999999999999%" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.1 "><p><span><strong>Full backup</strong></span></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="15.25%" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.1 "><p><span><strong>Name</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="72.85000000000001%" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.2 "><p>Set the backup policy name.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.1 "><p>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.1 "><div class="p">Configure the execution time, backup interval, copy retention period, and backup time window for full backup.<ul><li>Configure the backup interval and copy retention period for full backup.<ul><li><span><strong>By Year</strong></span><p>Configure the job to be executed on <em>xx</em> (month) <em>xx</em> (day) every year. Set copies to be retained for <em>xx</em> days, weeks, months, years, or permanently.</p>
<p>If the date does not exist in the year, no copy is generated.</p>
</li><li><span><strong>By Month</strong></span><p>Set the backup policy to be executed on <em>xx</em>th day (multiple days can be selected) or the last day of each month. The backup will be retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
<p>If the backup is to be performed on the <em>xx</em>th day of each month, no copy is generated when the date does not exist in the current month.</p>
</li><li><span><strong>By Week</strong></span><p>Set the job to be executed once every Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, or Sunday (you can select multiple options). Copies are retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
</li><li><strong>By Day</strong><p>Set the backup to be performed every <em>xx</em> days starting from <em>xx</em> (year) <em>xx</em> (month) <em>xx</em> (day). Copies are retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
</li><li><strong>By Hour</strong><p>Set the backup to be performed every <em>xx</em> hours starting from <em>xx</em> (year) <em>xx</em> (month) <em>xx</em> (day). Copies are retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
</li></ul>
</li><li>Set the time period for performing full backup. The full backup job will not be scheduled beyond the time range.<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>If the end time is earlier than or the same as the start time, the end time is actually the end time of the next day.</li><li>If the backup job is not completed within the specified time window, the system does not stop the backup job, but reports an event.</li><li>Once the retention period expires, the system automatically deletes the expired copies.</li></ul>
</div></div>
</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="11.899999999999999%" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.1 "><p><span><strong>Incremental backup</strong></span></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="15.25%" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.1 "><p><span><strong>Name</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="72.85000000000001%" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.2 "><p>Set the backup policy name.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.1 "><p>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.2.1.2.3.2.4.1.1 "><div class="p">Configure the initial execution time, backup interval, copy retention period, and backup time window for incremental backup.<ul><li>Configure the backup interval and copy retention period for incremental backup.<ul><li><span><strong>By Year</strong></span><p>Configure the job to be executed once every year on <em>xx</em> (month) <em>xx</em> (day), and copies are retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
<p>If the date does not exist in the year, no copy is generated.</p>
</li><li><span><strong>By Month</strong></span><p>Set the backup policy to be executed on <em>xx</em>th day (multiple days can be selected) or the last day of each month. The backup will be retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
<p>If the backup is to be performed on the <em>xx</em>th day of each month, no copy is generated when the date does not exist in the current month.</p>
</li><li><span><strong>By Week</strong></span><p>Set the job to be executed once every Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, or Sunday (you can select multiple options). Copies are retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
</li><li><strong>By day</strong><p>Set the backup to be performed every <em>xx</em> days starting from <em>xx</em> (year) <em>xx</em> (month) <em>xx</em> (day). Copies are retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
</li><li><strong>By Hour</strong><p>Set the backup to be performed every <em>xx</em> hours starting from <em>xx</em> (year) <em>xx</em> (month) <em>xx</em> (day). Copies are retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
</li><li><strong>By Minute</strong><p>Set the backup to be performed every <em>xx</em> minutes starting from <em>xx</em> (year) <em>xx</em> (month) <em>xx</em> (day). Copies are retained for <em>xx</em> days, <em>xx</em> weeks, <em>xx</em> months, <em>xx</em> years, or permanently.</p>
</li></ul>
</li><li>Set the time period for performing incremental backup. The incremental backup job will not be scheduled beyond the time range.<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>If the end time is earlier than or the same as the start time, the end time is actually the end time of the next day.</li><li>If the backup job is not completed within the specified time window, the system does not stop the backup job, but reports an event.</li><li>Once the retention period expires, the system automatically deletes the expired copies.</li></ul>
</div></div>
</li></ul>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<ul><li>The backup interval must be longer than the backup duration.</li><li>The retention period of a full backup copy must be longer than that of an incremental backup (or forever incremental (synthetic full) backup) copy.</li><li>The copy retention period must be longer than the backup interval.</li></ul>
</li></ol><ol type="a" start="3"><li>Set advanced parameters for the backup policy.<div class="p"><a href="#EN-US_TOPIC_0000001792396760__en-us_topic_0000001337708186_table1970194542811">Table 2</a> describes the related parameters.
<div class="tablenoborder"><a name="EN-US_TOPIC_0000001792396760__en-us_topic_0000001337708186_table1970194542811"></a><a name="en-us_topic_0000001337708186_table1970194542811"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001337708186_table1970194542811" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Advanced parameters for backing up the database</caption><colgroup><col style="width:22.7%"><col style="width:77.3%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="22.7%" id="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="77.3%" id="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="22.7%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.1 "><p><strong id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_b203081655125718">Specify Target Location</strong></p>
</td>
<td class="cellrowborder" valign="top" width="77.3%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.2 "><div class="p">If you have deployed the cluster HA feature, specify the target storage location for the backup copy. If no target location is specified, the system automatically selects a backup target storage unit through intelligent balancing.<ul id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_ul3832679403"><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li178323718400">Backup storage unit: corresponds to a backup cluster node. After a backup storage unit is selected, copies are stored to the storage unit. If the capacity of the storage unit is insufficient, the backup job will fail.</li><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li31700914016">Backup storage unit group: is a collection of backup storage units. After a backup storage unit group is selected, the system automatically selects a target backup storage unit based on the storage policy of the storage unit group.</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.7%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.1 "><p><span><strong>Rate Limiting Policies</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.3%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.2 "><p>Average maximum amount of data that can be transmitted per second in a backup job. </p>
<p>Select a rate limiting policy created in <a href="en-us_topic_0000001839195881.html">Step 3: Creating a Rate Limiting Policy</a>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.7%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.1 "><p><span><strong>Standby Node Preferred for Backup</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.3%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.2 "><p>After this function is enabled, the standby node is preferentially used for backup.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.7%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.1 "><p><span><strong>Source Deduplication</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.3%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.2 "><div class="p">After this function is enabled, the amount of data to be transmitted can be reduced, but more client resources will be occupied.<div class="note" id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_note8885112682911"><span class="notetitle"> NOTE: </span><div class="notebody"><ul id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_ul5885426132914"><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li10885172616299">An agent host can only be linked with one storage unit. To enable source deduplication, select <span class="parmvalue" id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_parmvalue13417617181719"><b>Backup Storage Unit</b></span> for <span class="parmname" id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_parmname164341313131719"><b>Specify Target Location</b></span>. Otherwise, a storage unit that is not linked with the agent host may be selected through intelligent balancing. As a result, source deduplication fails to be enabled. If different protected objects are associated with different SLAs, where different backup storage units are specified, select different agent hosts for the protected objects. Otherwise, source deduplication of some backup jobs will fail to be enabled.</li><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li9885182662911">If an agent host has been linked with a storage unit but is not performing a backup job with source deduplication, you can run the <strong id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_b1734071915190">dataturbo delete storage_object storage_name=</strong><em id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_i18291255102216">?</em> command on the agent host to delete the source deduplication link with the storage unit. The value of <strong id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_b9927131312572">storage_name</strong> in the command can be queried by running the <strong id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_b11782052162315">dataturbo show storage_object</strong> command. This way, when the agent host performs a backup job with source deduplication, the link between the agent host and a new storage unit can be established.</li><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li11885142615297">Check whether the host OS supports source deduplication by referring to <a href="https://info.support.huawei.com/storage/comp/#/oceanprotect" target="_blank" rel="noopener noreferrer">Compatibility Query</a>. If the host OS does not support source deduplication, source deduplication does not take effect.</li><li id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_li7883549153219">If a built-in agent is used for backup, source deduplication, after being configured, does not take effect.</li></ul>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.7%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.1 "><div class="p"><strong id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_b693713423122">Job Timeout Alarm</strong><div class="note" id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_note379352823112"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001792396760__en-us_topic_0000001839143189_en-us_topic_0000001839143213_p8320153562113">This parameter is available only in 1.6.0 and later versions.</p>
</div></div>
</div>
</td>
<td class="cellrowborder" valign="top" width="77.3%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.2 "><p>After this function is enabled, an alarm is sent if the job execution time exceeds the time window. The alarm needs to be manually cleared.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.7%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.1 "><p><span><strong>Job Failure Alarm</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.3%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.2 "><p>After this function is enabled, an alarm is automatically sent if a job fails and is automatically cleared after successful execution.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.7%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.1 "><p><span><strong>Automatic Retry</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.3%" headers="mcps1.3.2.2.5.2.2.1.1.2.2.3.1.2 "><p>After this function is enabled, the system automatically retries a failed job based on the number of retries and time preset.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</li><li>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</li></ol>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000001792556544.html">Backing Up a GoldenDB Database</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>