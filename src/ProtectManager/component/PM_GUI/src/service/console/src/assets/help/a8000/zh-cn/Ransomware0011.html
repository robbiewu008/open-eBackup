<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="创建演练计划">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="zh-cn_topic_0000001827336292.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect 备份一体机 1.5.0-1.6.0 帮助中心">
<meta name="DC.Publisher" content="20240320">
<meta name="documenttype" content="usermanual">
<meta name="prodname" content="csbs">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="Ransomware0011">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>创建演练计划</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="Ransomware0011"></a><a name="Ransomware0011"></a>

<h1 class="topictitle1">创建演练计划</h1>
<div><p>通过本节操作，创建演练计划。</p>
<div class="section"><h4 class="sectiontitle">注意事项</h4><p>如果选择的资源支持即时挂载，将使用即时挂载的方式进行演练，否则将使用普通恢复的方式进行演练。</p>
</div>
<div class="section"><h4 class="sectiontitle">操作步骤</h4><ol><li><span>选择“数据利用 &gt;恢复演练 &gt; 恢复演练”。</span></li><li><span>单击<span class="uicontrol">“创建演练计划”</span>。</span></li><li><span>选择资源。</span><p><ol type="a"><li id="Ransomware0011__li1294955620408"><a name="Ransomware0011__li1294955620408"></a><a name="li1294955620408"></a>单击<span class="uicontrol">“添加”</span>。</li><li>选择<span class="uicontrol">“资源类型”</span>。</li><li id="Ransomware0011__li159411634204119"><a name="Ransomware0011__li159411634204119"></a><a name="li159411634204119"></a>选择资源。支持选择一个或多个资源。<div class="note"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><p>如果需要选择多个资源类型下的资源，请再次执行<a href="#Ransomware0011__li1294955620408">3.a</a>~<a href="#Ransomware0011__li159411634204119">3.c</a>操作。</p>
</div></div>
</li><li>单击<span class="uicontrol">“下一步”</span>。</li></ol>
</p></li><li><span>设置演练计划。</span><p><ul><li>设置单次演练计划。<ol type="a"><li>演练计划类型选择为<span class="uicontrol">“单次演练”</span>。</li><li>填写演练计划名称。</li><li>选择执行时间，支持<span class="uicontrol">“创建完立即执行”</span>或<span class="uicontrol">“指定时间执行”</span>。选择<span class="uicontrol">“指定时间执行”</span>时，需设置一个时间点。</li></ol>
</li><li>设置周期性演练计划<div class="note"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><p>周期性演练方式为恢复类型的，用户可在演练前或者演练结束后执行自定义脚本关闭数据库（TDSQL除外），否则会导致恢复失败。</p>
</div></div>
<ol type="a"><li>演练计划类型选择为<span class="uicontrol">“周期性演练”</span>。</li><li>填写演练计划名称。</li><li>设置演练周期。支持按小时、按天、按月、按年进行周期性演练。</li><li>设置首次执行时间。首次执行时间为首次执行演练计划的开始时间。<p>如果<span>首次执行时间</span>晚于当前时间，则按照<span>首次执行时间</span>开始演练；如果<span>首次执行时间</span>早于当前时间，则等待下次演练周期到达后进行演练。</p>
</li></ol>
</li></ul>
</p></li><li><span>执行设置。</span><p><ul><li>对于演练类型为<span class="uicontrol">“即时挂载”</span>的应用。<ol type="a"><li>设置演练后是否销毁挂载副本。可以选择<span class="uicontrol">“销毁”</span>或<span class="uicontrol">“不销毁”</span>。如果选择<span class="uicontrol">“不销毁”</span>，请在下次演练前手动销毁挂载，如不销毁会导致下次演练失败。</li><li>演练设置。<ol class="substepthirdol"><li>单击<span class="uicontrol">“去设置”</span>，系统右侧弹出<span class="uicontrol">“即时挂载”</span>窗口。</li><li>在挂载目标区域，选择<span class="uicontrol">“目标位置#1”</span>。<div class="note"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><p>如果有多个目标位置，请单击<span class="uicontrol">“添加目标位置”</span>进行新增。</p>
</div></div>
</li><li>选择即时挂载完成后是否启动数据库。<div class="note"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><p>对于MySQL/MariaDB，即时挂载完成后默认启动数据库。</p>
</div></div>
</li><li>高级配置。参数说明如<a href="#Ransomware0011__table2415328148">表1</a>所示。<div class="note"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><ul><li>带宽与IOPS可以任意配置一个或者两个都配置，如果是带宽型业务，建议只配置带宽，如果是IOPS型业务，建议只配置IOPS，如果不确定或者有时是带宽型、有时是IOPS型，则建议两个都配置，此时流量控制以小的一个为准。</li><li>标准IOPS(8KB)与真实IO模型的换算关系可以通过界面上的换算表查看。</li><li>通过限制挂载副本的最大流量，以保证恢复演练任务的性能；设置挂载副本的下限保障，以保证挂载副本的最低性能。</li></ul>
</div></div>

<div class="tablenoborder"><a name="Ransomware0011__table2415328148"></a><a name="table2415328148"></a><table cellpadding="4" cellspacing="0" summary="" id="Ransomware0011__table2415328148" frame="border" border="1" rules="all"><caption><b>表1 </b>高级配置参数说明</caption><colgroup><col style="width:20.59%"><col style="width:20.59%"><col style="width:58.809999999999995%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" colspan="2" valign="top" id="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1"><p>参数</p>
<p></p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.2"><p>说明</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" valign="top" width="20.59205920592059%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>带宽（MB/s）</span></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="20.59205920592059%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>Min</span></p>
</td>
<td class="cellrowborder" valign="top" width="58.81588158815882%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.2 "><p>即时挂载副本的最小带宽。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>Max</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p>即时挂载副本的最大带宽。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>Burst</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p>即时挂载副本的最大突发带宽，<span>Burst</span>的取值必须大于Max。</p>
<p>当设置<span>Max</span>的值后，才支持设置<span>Burst</span>。</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="20.59205920592059%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>标准IOPS（8KB）</span></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="20.59205920592059%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>Min</span></p>
</td>
<td class="cellrowborder" valign="top" width="58.81588158815882%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.2 "><p>即时挂载副本平均每秒标准I/O的最小请求个数。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>Max</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p>即时挂载副本平均每秒标准I/O的最大请求个数。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>Burst</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p>即时挂载副本的最大突发IOPS，<span>Burst</span>的取值必须大于Max。</p>
<p>当设置<span>Max</span>的值后，才支持设置<span>Burst</span>。</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>最大Burst时间(秒)</span></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.2 "><p>当设置了带宽或标准IOPS的<span>Burst</span>参数，才需要设置该参数。表示突发带宽或突发IOPS的最大持续时间。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="20.59205920592059%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>标准化时延（8KB）</span></p>
</td>
<td class="cellrowborder" valign="top" width="20.59205920592059%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.1 "><p><span>Max</span></p>
</td>
<td class="cellrowborder" valign="top" width="58.81588158815882%" headers="mcps1.3.3.2.5.2.1.1.2.2.1.4.3.2.4.1.2 "><p>在本地阵列的最大时延。</p>
</td>
</tr>
</tbody>
</table>
</div>
</li></ol>
</li><li>（可选）添加验证脚本。添加演练前执行脚本、演练成功执行脚本、演练失败执行脚本。不同操作系统对脚本的格式要求不同，具体请参考<a href="zh-cn_topic_0000001930612734.html">不同操作系统脚本格式要求</a>。</li><li>单击<span class="uicontrol">“下一步”</span>。</li></ol>
</li><li>对于演练类型为<span class="uicontrol">“恢复”</span>的应用。<ol type="a"><li>演练设置。<ol class="substepthirdol"><li>单击<span class="uicontrol">“去设置”</span>。系统弹出提示信息：恢复前，请确认目标位置数据库已关闭，并且目标实例有足够的数据目录空间，否则会导致恢复失败。<p>单击<span class="uicontrol">“关闭”</span>。</p>
</li><li>系统右侧弹出<span class="uicontrol">“恢复”</span>窗口。</li><li>选择目标实例。<span style="color:#282B33;">目标实例的类型和版本号需要和原实例保持一致。</span></li><li>选择目标数据库。<span style="color:#282B33;">如果目标实例下有与待恢复的数据库同名的目标数据库，则仅展示同名数据库；没有同名数据库，则展示所有目标数据库。</span></li><li>选择是否启用<span class="uicontrol">“数据库重命名”</span>。默认关闭。如果启用，需要填写数据库新名称。</li><li>选择是否启用<span class="uicontrol">“强制恢复”</span>。<span style="color:#282B33;">默认关闭。如果启用，在数据库页损坏的情况下，可以将数据强制恢复。</span></li><li>单击<span class="uicontrol">“确定”</span>。</li></ol>
</li><li>（可选）添加验证脚本。添加演练前执行脚本、演练成功执行脚本、演练失败执行脚本。不同操作系统对脚本的格式要求不同，具体请参考<a href="zh-cn_topic_0000001930612734.html">不同操作系统脚本格式要求</a>。</li><li>单击<span class="uicontrol">“下一步”</span>。</li></ol>
</li></ul>
</p></li><li><span>在总览页面查看演练计划，确认无误后单击<span class="uicontrol">“完成”</span>。</span></li><li><span>演练计划创建完成后，可以在演练计划列表页面，单击名称，查看演练计划详情。</span></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="zh-cn_topic_0000001827336292.html">恢复演练</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div></body>
</html>