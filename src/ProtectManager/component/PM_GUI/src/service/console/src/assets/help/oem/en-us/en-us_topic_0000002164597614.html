<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Backing Up a Table Set">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="en-us_topic_0000002164597666.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="">
  <meta name="DC.Publisher" content="20250306">
  <meta name="prodname" content="csbs">
  <meta name="documenttype" content="usermanual">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="EN-US_TOPIC_0000002164597614">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Backing Up a Table Set</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="EN-US_TOPIC_0000002164597614"></a><a name="EN-US_TOPIC_0000002164597614"></a>
  <h1 class="topictitle1">Backing Up a Table Set</h1>
  <div>
   <p>Before performing backup, you need to associate the resources to be protected with a specified SLA. The system protects the resources and periodically executes backup jobs based on the SLA. You can perform a backup job immediately through manual backup.</p>
   <div class="section">
    <h4 class="sectiontitle">Precautions</h4>
    <ul id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001346322404_en-us_topic_0000001142022920_ul18727123312225">
     <li id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001346322404_en-us_topic_0000001142022920_li653882315253">Copies generated by manual backup are retained for the duration defined in the SLA.<p id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001346322404_p1021414520463"><a name="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001346322404_en-us_topic_0000001142022920_li653882315253"></a><a name="en-us_topic_0000002199998357_en-us_topic_0000001346322404_en-us_topic_0000001142022920_li653882315253"></a>If the protection policy selected during manual backup is not defined in the SLA, the generated backup copy is retained permanently. If incremental backup is not defined in the SLA but is selected during manual backup, the copies generated by the manual incremental backup are retained permanently.</p></li>
     <li id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001346322404_en-us_topic_0000001142022920_li648823113014">If a replication or archive policy has been defined in the SLA, the system will perform replication or archiving once based on the SLA when you perform manual backup.</li>
     <li id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001346322404_li147271733132211">During manual backup, the parameters (except <span class="uicontrol" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_uicontrol1668154215316"><b>Automatic Retry</b></span>) defined in the SLA, such as <span class="uicontrol" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_uicontrol5682164214317"><b>Rate Limiting Policy</b></span>, are applied to the manual backup job.</li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Prerequisites</h4>
    <p>When protecting a table set, ensure that GDS has been started on the host where the client is installed. GDS running on the GaussDB (DWS) node occupies resources in the production environment. Therefore, you are advised to start GDS on the host where the client is installed.</p>
    <ul>
     <li>For details about how to start GDS, see "Installing, Configuring, and Starting GDS" in the <a href="https://support.huawei.com/enterprise/en/cloud-computing/hcs-dws-service-pid-251527524" target="_blank" rel="noopener noreferrer">GaussDB (DWS) Product Documentation</a> of the corresponding version.</li>
     <li>Parameters <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b19364163813010">-d</strong>, <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b1436413820018">-p</strong>, and <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b183653384010">-t</strong> are required for starting GDS. The directory for storing data of each GDS must be unique. The following is an example:<pre class="screen" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_screen949817461541">/home/gds_user/bin/gds <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b526515126328">-d</strong><strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b11486851163215"> </strong>/home/gds_user/input_data_1/ <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b14216182111329">-p</strong> 192.168.97.240:9001 -H 0/0 -l /home/gds_user/gds_log/gds_process1.log -D <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b19744132223213">-t</strong> 2
/home/gds_user/bin/gds <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b4430814123212">-d</strong> /home/gds_user/input_data_2/ <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b8467192413218">-p</strong> 192.168.97.240:9002 -H 0/0 -l /home/gds_user/gds_log/gds_process2.log -D <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b76471726103212">-t</strong> 2
/home/gds_user/bin/gds <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b1739771623220">-d</strong> /home/gds_user/input_data_3/ <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b7403125413321">-p</strong> 192.168.97.240:9003 -H 0/0 -l /home/gds_user/gds_log/gds_process3.log -D <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b427905633216">-t</strong> 2
/home/gds_user/bin/gds <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b12459218193212">-d</strong> /home/gds_user/input_data_4/ <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b7818257113218">-p</strong> 192.168.97.240:9004 -H 0/0 -l /home/gds_user/gds_log/gds_process4.log -D <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199963977_b1211865911325">-t</strong> 2</pre></li>
     <li>If you start GDS on multiple hosts where the client is deployed, the system uses the host where the client is installed with the largest number of GDSs for backup. Therefore, you are advised to start multiple GDSs as one user on only one host where the client is deployed. To achieve the highest performance, it is recommended that the number of GDSs to be started be four times and eight times the number of backup storage units for a dual-controller system and a four-controller system, respectively.</li>
     <li>If the GaussDB (DWS) node is deployed in the sandbox, map the GDS configuration directory in the sandbox to the corresponding directory on the host by referring to <a href="en-us_topic_0000002199964037.html">Precautions for GDS Running in a GaussDB (DWS) Node Where the Sandbox Is Deployed</a> before GDS-based table set backup.</li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000001656569013_en-us_topic_0000001666345505_uicontrol865195012392"><b><span id="EN-US_TOPIC_0000002164597614__en-us_topic_0000001656569013_en-us_topic_0000001666345505_text4651950123919"><strong>Protection</strong></span> &gt; Big Data &gt; GaussDB (DWS)</b></span>.</span></li>
     <li><span>Click the <span class="uicontrol"><b>Table Sets</b></span> tab, locate the row that contains the resource to be protected, and choose <span class="menucascade"><b><span class="uicontrol">More</span></b> &gt; <b><span class="uicontrol">Protect</span></b></span>.</span><p></p><p>You can also select multiple resources for batch protection.</p> <p></p></li>
     <li><span>Enter <span class="uicontrol" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_uicontrol5202191417162"><b>Backup Metadata Storage Path</b></span>. Enter a directory on a GaussDB (DWS) node to store backup copy metadata. If the directory does not exist, the system will automatically create it. The GaussDB (DWS) cluster user must have the read and write permissions on the directory.</span><p></p>
      <div class="note" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_note16947036142819">
       <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
       <div class="notebody">
        <ul id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_ul5424191615296">
         <li id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_li7424191672914">You are advised to reserve at least 20 GB disk space for the backup metadata storage path. Do not configure the path as a system volume or production service volume. Otherwise, ongoing production services will be affected when the disk space is insufficient.</li>
         <li id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_li89481217182914">For details about whether the GaussDB (DWS) cluster user has the read and write permissions on <span class="uicontrol" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_uicontrol32051027310"><b>Backup Metadata Storage Path</b></span> and how to determine the permissions, see <a href="en-us_topic_0000002199963977.html#EN-US_TOPIC_0000002199963977__li836512573513">the access permissions on the backup metadata storage path</a>.</li>
        </ul>
       </div>
      </div> <p></p></li>
     <li><span>Select an SLA.</span><p></p><p>You can also click <span class="uicontrol"><b><span><strong>Create</strong></span></b></span> to create an SLA.</p>
      <div class="note">
       <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
       <div class="notebody">
        <ul>
         <li>Preset SLAs cannot be selected for table set protection.</li>
         <li><span>If a WORM policy has been configured for the resources to be protected, select an SLA without a WORM policy to avoid WORM policy conflicts.</span></li>
        </ul>
       </div>
      </div> <p></p></li>
     <li><span>Click <span class="uicontrol" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002200146973_uicontrol23691650677"><b>OK</b></span>.</span><p></p><p id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002200146973_en-us_topic_0000001656691397_p25041111535">If the current system time is later than the start time of the first backup specified in the SLA, you can select <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002200146973_b9624185216713">Execute manual backup now</strong> in the dialog box that is displayed or choose to perform automatic backup periodically based on the backup policy set in the SLA.</p> <p></p></li>
     <li><strong>Optional: </strong><span>Perform manual backup.</span><p></p><p>If you want to execute a backup job immediately, perform manual backup through the following operations. Otherwise, skip this step.</p>
      <ol type="a">
       <li>In the row of the target table set, choose <span class="uicontrol"><b>More &gt; <span><strong>Manual Backup</strong></span></b></span>.</li>
       <li>Set the name of the copy generated through manual backup.<p id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_p420310146161">If this parameter is left unspecified, the system sets the name to <strong id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_b1581789202710">backup_</strong><em id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_i48171794275">Timestamp</em> by default.</p></li>
       <li>Set a protection policy.<p>For table sets, only <span class="uicontrol"><b><span><strong>Full Backup</strong></span></b></span> is supported.</p>
        <div class="note">
         <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
         <div class="notebody">
          <p id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002200146973_p13522118194919"><span id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002200146973_ph19374310343">If the selected protection policy is different from that configured in the associated SLA for 1.6.0 and later versions, the WORM configuration does not take effect.</span></p>
         </div>
        </div></li>
       <li>Click <span class="uicontrol" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_uicontrol2318315286"><b>OK</b></span>.
        <div class="note" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_note152039149163">
         <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
         <div class="notebody">
          <p id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001607531736_p870125314544">You can select multiple resources to perform manual backup in batches. Select multiple resources and choose <span class="uicontrol" id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001607531736_uicontrol14182155715711"><b><span id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001607531736_text662114113158"><strong>More</strong></span> &gt; <span id="EN-US_TOPIC_0000002164597614__en-us_topic_0000002199998357_en-us_topic_0000001607531736_text1068159191519"><strong>Manual Backup</strong></span></b></span> in the upper left corner of the page.</p>
         </div>
        </div></li>
      </ol> <p></p></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="en-us_topic_0000002164597666.html">Step 6: Performing Backup</a>
    </div>
   </div>
  </div>
 </body>
</html>