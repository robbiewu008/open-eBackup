<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Configuring the Full Mapping Between ProtectAgent and the Product">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="EN-US_TOPIC_0000001839141985">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Configuring the Full Mapping Between ProtectAgent and the Product</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="EN-US_TOPIC_0000001839141985"></a><a name="EN-US_TOPIC_0000001839141985"></a>
  <h1 class="topictitle1">Configuring the Full Mapping Between ProtectAgent and the Product</h1>
  <div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li><span>Use PuTTY to log in to each ProtectAgent host that has been registered with the <span>product</span>.</span></li>
     <li><span>Run the <strong>vi /opt/DataBackup/ProtectClient/ProtectClient-E/conf/agent_cfg.xml</strong> command to edit the configuration file of ProtectAgent.</span></li>
     <li><span>Modify the configuration item <span class="uicontrol"><b>agent_storage_relation</b></span> in &lt;Backup&gt;. <span class="uicontrol"><b>ProtectAgent host IP address 1</b></span> to <span class="uicontrol"><b>ProtectAgent host IP address n</b></span> are the IP addresses of all ProtectAgent hosts that are registered with the <span>product</span> and used for GaussDB (DWS) protection. <span class="uicontrol"><b>ESN 1</b></span> to <span class="uicontrol"><b>ESN n</b></span> are the ESNs of the <span>product</span> used by ProtectAgent for service protection.</span><p></p><pre class="screen">agent_storage_relation = "<em>ProtectAgent host IP address </em><em>1</em>@<em>ESN </em><em>1</em>;<em>ProtectAgent host IP address </em><em>2</em>@<em>ESN </em><em>2</em>;...<em>ProtectAgent host IP address n</em>@<em>ESN n</em>"</pre> <p>For example, ProtectAgent hosts whose IP addresses are <span class="uicontrol"><b>192.168.10.186</b></span> and <span class="uicontrol"><b>192.168.10.13</b></span> have been registered with the <span>product</span> whose ESN is <span class="uicontrol"><b>2102353GTJ10M1000001</b></span>. For example, the backup service uses a backup storage unit group that contains a backup storage unit whose ESN is <span class="uicontrol"><b>2102353GTJ10M1000003</b></span>. In this case, the following shows how to modify the configuration items on each ProtectAgent host:</p> <pre class="screen">agent_storage_relation = <em>"</em>192.168.10.186@2102353GTJ10M1000001;192.168.10.13@2102353GTJ10M1000003"</pre> <p>After the configuration is complete, the ProtectAgent host whose IP address is <span class="uicontrol"><b>192.168.10.186</b></span> backs up data to the <span>product</span> whose ESN is <span class="uicontrol"><b>2102353GTJ10M1000001</b></span>, and the ProtectAgent host whose IP address is <span class="uicontrol"><b>192.168.10.13</b></span> backs up data to the <span>product</span> whose ESN is <span class="uicontrol"><b>2102353GTJ10M1000003</b></span>.</p> <p></p></li>
    </ol>
   </div>
  </div>
 </body>
</html>