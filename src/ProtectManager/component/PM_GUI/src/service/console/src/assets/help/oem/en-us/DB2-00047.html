<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Restoring DB2 Databases or Tablespace Sets">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="DB2-00044.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
  <meta name="DC.Publisher" content="20241029">
  <meta name="prodname" content="csbs">
  <meta name="documenttype" content="usermanual">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="DB2-00047">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Restoring DB2 Databases or Tablespace Sets</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="DB2-00047"></a><a name="DB2-00047"></a>
  <h1 class="topictitle1">Restoring DB2 Databases or Tablespace Sets</h1>
  <div>
   <p>This section describes how to restore a DB2 database or tablespace set that has been backed up to the original or a new location.</p>
   <div class="section">
    <h4 class="sectiontitle">Prerequisites</h4>
    <p id="DB2-00047__p731918012409">Before restoration, ensure that the remaining space of the data directory at the target location for restoration is greater than the size of the copy used for restoration before reduction. Otherwise, restoration will fail.</p>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Precautions</h4>
    <p>During the restoration, the system automatically terminates the session connection with the target database. During the restoration, do not establish a new session connection to the database. Otherwise, the restoration job will fail.</p>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li><span>Choose <span class="uicontrol" id="DB2-00047__en-us_topic_0000001839142377_uicontrol167001696278"><b><span id="DB2-00047__en-us_topic_0000001839142377_text6700697277"><strong>Explore</strong></span> &gt; <span id="DB2-00047__en-us_topic_0000001839142377_text970012982714"><strong>Copy Data</strong></span> &gt; <span id="DB2-00047__en-us_topic_0000001839142377_text1477202824915"><strong>Databases</strong></span> &gt; <span id="DB2-00047__en-us_topic_0000001839142377_text1058210546282"><strong>DB2</strong></span></b></span>.</span></li>
     <li><span>Search for copies by DB2 resource or copy. This section describes how to search for copies by resource.</span><p></p><p>On the <span class="uicontrol"><b><span><strong>Resources</strong></span></b></span> tab page, locate the resource to be restored by resource name and click the name.</p> <p></p></li>
     <li><span>Select the resource for copy-based restoration.</span></li>
     <li><span>Specify a copy or a point in time for restoration.</span><p></p>
      <ul>
       <li>Restoration using a specified copy
        <ol type="a">
         <li>Select the year, month, and day in sequence to find the copy.<p>If <span><img src="en-us_image_0000001839242921.png"></span> is displayed on the date, copies exist in the month or on the day.</p></li>
         <li>Click <span><img src="en-us_image_0000001953536981.png"></span> to go to the copy data page.</li>
         <li>On the copy data page, click <span><img src="en-us_image_0000001792523594.png"></span> and choose <span class="menucascade"><b><span class="uicontrol"><span><strong>More</strong></span></span></b> &gt; <b><span class="uicontrol"><span><strong>Restore</strong></span></span></b></span> in the row where the desired copy resides.</li>
        </ol></li>
       <li>Restoration to a specified point in time
        <ol type="a">
         <li>Select the year, month, and day in sequence to find the copy.<p>If <span><img src="en-us_image_0000001839162993.png"></span> is displayed below a month or day, copies exist in the month or on the day.</p></li>
         <li>Click <span><img src="en-us_image_0000001953417193.png"></span> to go to the copy data page.</li>
         <li>On the <strong>Copy Data</strong> page, click <span><img src="en-us_image_0000001886757765.png"></span>. In the blue part on the timeline, select a copy and choose <span class="menucascade"><b><span class="uicontrol"><span><strong>More</strong></span></span></b> &gt; <b><span class="uicontrol"><span><strong>Restore</strong></span></span></b></span>.
          <div class="note">
           <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
           <div class="notebody">
            <ul>
             <li>For 1.5.0, a maximum of 100 copies can be displayed on the timeline. You can click <span><img src="en-us_image_0000002128689437.png"></span> to view all copies.</li>
             <li>During point-in-time restoration, the information about the copy used for restoration cannot be obtained on the management page. Therefore, users cannot view the copy information of the restoration job on pages of the restoration job and related events.</li>
            </ul>
           </div>
          </div></li>
        </ol></li>
      </ul> <p></p></li>
     <li><span>Restore the DB2 database to its original or a new location.</span><p></p>
      <ol type="a">
       <li>Set parameters for restoring a DB2 database or tablespace set.
        <div class="p">
         <a href="#DB2-00047__table4574123782">Table 1</a> describes the related parameters. 
         <div class="tablenoborder">
          <a name="DB2-00047__table4574123782"></a><a name="table4574123782"></a>
          <table cellpadding="4" cellspacing="0" summary="" id="DB2-00047__table4574123782" frame="border" border="1" rules="all">
           <caption>
            <b>Table 1 </b>Parameters for restoring a DB2 database or tablespace set
           </caption>
           <colgroup>
            <col style="width:32.019999999999996%">
            <col style="width:67.97999999999999%">
           </colgroup>
           <thead align="left">
            <tr>
             <th align="left" class="cellrowborder" valign="top" width="32.019999999999996%" id="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1"><p>Parameter</p></th>
             <th align="left" class="cellrowborder" valign="top" width="67.97999999999999%" id="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.2"><p>Description</p></th>
            </tr>
           </thead>
           <tbody>
            <tr>
             <td class="cellrowborder" valign="top" width="32.019999999999996%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p><span><strong>Restore To</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="67.97999999999999%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.2 "><p>Select either <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span> or <span class="uicontrol"><b><span><strong>New location</strong></span></b></span>.</p> <p><strong>Note</strong></p> <p>For tablespace set restoration, the value can only be <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span>.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" width="32.019999999999996%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p><span><strong>Location</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="67.97999999999999%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.2 "><p>If you select <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span> for the <strong>Restore To</strong> parameter, the original location is displayed.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" width="32.019999999999996%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p><span><strong>Target Host/Cluster</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="67.97999999999999%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.2 "><p>Target host or cluster for restoration, which is mandatory if you select <span class="uicontrol"><b><span><strong>New location</strong></span></b></span> for the <strong>Restore To</strong> parameter.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" width="32.019999999999996%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p><span><strong>Target Instance</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="67.97999999999999%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.2 "><p>Target instance for restoration, which is mandatory if you select <span class="uicontrol"><b><span><strong>New location</strong></span></b></span> for the <strong>Restore To</strong> parameter.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" width="32.019999999999996%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p><span><strong>Target Database</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="67.97999999999999%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.2 "><p>Target database for restoration, which is mandatory if you select <span class="uicontrol"><b><span><strong>New location</strong></span></b></span> for the <strong>Restore To</strong> parameter.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" width="32.019999999999996%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p>Whether to restore data to the end time of the log</p></td>
             <td class="cellrowborder" valign="top" width="67.97999999999999%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.2 "><p>This parameter is displayed only when the cluster type is <strong>Database Partitioning Feature</strong> and point-in-time restoration is selected.</p> <p>This function is disabled by default. After this function is enabled, if the database cannot be restored to a specified time point, it can be restored to the end time of the log.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" width="32.019999999999996%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p><span><strong>Script to Run Before Restoration</strong></span></p></td>
             <td class="cellrowborder" rowspan="3" valign="top" width="67.97999999999999%" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.2 "><p>You can execute a custom script as required before a restoration job is executed or after the restoration job succeeds or fails.</p> <p>Enter a script name that ends with <strong>.sh</strong>. Ensure that the script has been stored in the <span class="filepath"><b>DataBackup/ProtectClient/ProtectClient-E/sbin/thirdparty</b></span> path under the ProtectAgent installation directory and the user (user <strong>root</strong> by default) who has logged in to the database host is permitted to execute the script.</p>
              <div class="note">
               <span class="notetitle"> NOTE: </span>
               <div class="notebody">
                <p>If <strong>Script to Run upon Restoration Success</strong> is configured, the status of the restoration job is displayed as <strong>Successful</strong> on the <span>product</span> even if the script fails to be executed. Check whether the job details contain a message indicating that the post-processing script fails to be executed. If yes, modify the script in a timely manner.</p>
               </div>
              </div></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p><span><strong>Script to Run upon Restoration Success</strong></span></p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.2.2.3.1.1 "><p><span><strong>Script to Run upon Restoration Failure</strong></span></p></td>
            </tr>
           </tbody>
          </table>
         </div>
        </div></li>
      </ol>
      <ol type="a" start="2">
       <li>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</li>
       <li>In the dialog box that is displayed, confirm the information and click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.<p><span><img src="en-us_image_0000001839162989.png"></span></p> <p></p></li>
      </ol> <p></p></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="DB2-00044.html">Restoration</a>
    </div>
   </div>
  </div>
 </body>
</html>