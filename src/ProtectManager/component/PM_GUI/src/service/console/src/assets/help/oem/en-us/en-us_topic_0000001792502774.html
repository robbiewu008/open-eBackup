<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Step 1: Enabling Ports Required for GaussDB (DWS) Backup and Restoration">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001792502686.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
  <meta name="DC.Publisher" content="20240608">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="EN-US_TOPIC_0000001792502774">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Step 1: Enabling Ports Required for GaussDB (DWS) Backup and Restoration</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="EN-US_TOPIC_0000001792502774"></a><a name="EN-US_TOPIC_0000001792502774"></a>
  <h1 class="topictitle1">Step 1: Enabling Ports Required for GaussDB (DWS) Backup and Restoration</h1>
  <div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li><span>Log in to the GaussDB (DWS) node.</span></li>
     <li><span>Copy the <strong>configure_firewall_port.sh</strong> script to the <strong>root</strong> directory on the GaussDB (DWS) node.</span></li>
     <li><span>Run the following command to back up iptables to a temporary file. iptables.test is used as an example. (The following backup method applies to the scenario where iptables is started.)</span><p></p><pre class="screen">iptables-save &gt; iptables.test</pre> <p></p></li>
     <li id="EN-US_TOPIC_0000001792502774__li10155122918216"><a name="EN-US_TOPIC_0000001792502774__li10155122918216"></a><a name="li10155122918216"></a><span>Run the following command to enable the ports (55000:55050, 9010:9050, 15000:15050, 17000 and 59520:59539) required for GaussDB (DWS) backup:</span><p></p><pre class="screen">sh configure_firewall_port.sh add <em>192.168.0.0/16</em></pre>
      <div class="note">
       <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
       <div class="notebody">
        <ul>
         <li>"192.168.0.0/16" indicates the network segment of the GaussDB (DWS) service network plane and the <span>product</span> backup network plane. If the network segments of the two planes are different, run this script for the network segments of the two planes.</li>
         <li>If you need to enable other ports, run the following command to add them (in the example, 30600 and 59600:59610 are the ports to be added):</li>
        </ul>
        <pre class="screen">sh configure_firewall_port.sh add <em>192.168.0.0/16</em> <em>30600</em> <em>59600:59610</em></pre>
       </div>
      </div> <p></p></li>
     <li><span>If the operation in <a href="#EN-US_TOPIC_0000001792502774__li10155122918216">4</a> fails or does not meet the expectation, run the following commands to restore the iptables rules and save the configuration (the following restoration method applies to the scenario where iptables is started):</span><p></p><pre class="screen">iptables-restore &lt; iptables.test
service iptables save</pre> <p></p></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="en-us_topic_0000001792502686.html">Backing Up GaussDB (DWS)</a>
    </div>
   </div>
  </div>
 </body>
</html>