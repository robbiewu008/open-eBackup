<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Creating a Periodic Backup">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001792402664.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20240608">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001792402732">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Creating a Periodic Backup</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000001792402732"></a><a name="EN-US_TOPIC_0000001792402732"></a>

<h1 class="topictitle1">Creating a Periodic Backup</h1>
<div><p>After resources to be protected are associated with an SLA, the system protects the resources based on the SLA. </p>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001839142377_uicontrol1389612810362"><b><span id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001839142377_text1089610893610"><strong>Protection</strong></span> &gt; Databases &gt; PostgreSQL</b></span>.</span></li><li><span>On the <span class="uicontrol"><b>Instance</b></span> tab, select the database to be protected and click <span class="uicontrol"><b><span><strong>Protect</strong></span></b></span>. </span><p><p>You can also select multiple databases for batch protection.</p>
</p></li><li><span>Select an SLA. </span><p><p>You can also click <span class="uicontrol"><b><span><strong>Create</strong></span></b></span> to create an SLA.</p>
</p></li><li><span>Set advanced parameters for the backup policy. </span><p><div class="p"><a href="#EN-US_TOPIC_0000001792402732__en-us_topic_0000001349147581_en-us_topic_0000001263775382_table354613271506">Table 1</a> describes the related parameters.
<div class="tablenoborder"><a name="EN-US_TOPIC_0000001792402732__en-us_topic_0000001349147581_en-us_topic_0000001263775382_table354613271506"></a><a name="en-us_topic_0000001349147581_en-us_topic_0000001263775382_table354613271506"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001349147581_en-us_topic_0000001263775382_table354613271506" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Advanced parameters of a backup policy</caption><colgroup><col style="width:30.06%"><col style="width:69.94%"></colgroup><thead align="left"><tr id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_row397013453284"><th align="left" class="cellrowborder" valign="top" width="30.06%" id="mcps1.3.2.2.4.2.1.2.2.3.1.1"><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p1597024519286">Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="69.94%" id="mcps1.3.2.2.4.2.1.2.2.3.1.2"><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p2970164512285">Description</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_row5226145741010"><td class="cellrowborder" valign="top" width="30.06%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.1 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_p24732444489"><strong id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_b203081655125718">Specify Target Location</strong></p>
</td>
<td class="cellrowborder" valign="top" width="69.94%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.2 "><div class="p" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_p1473184413481">If you have deployed the cluster HA feature, specify the target storage location for the backup copy. If no target location is specified, the system automatically selects a backup target storage unit through intelligent balancing.<ul id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_ul3832679403"><li id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_li178323718400">Backup storage unit: corresponds to a backup cluster node. After a backup storage unit is selected, copies are stored to the storage unit. If the capacity of the storage unit is insufficient, the backup job will fail.</li><li id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_li31700914016">Backup storage unit group: is a collection of backup storage units. After a backup storage unit group is selected, the system automatically selects a target backup storage unit based on the storage policy of the storage unit group.</li></ul>
</div>
</td>
</tr>
<tr id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_row597016457288"><td class="cellrowborder" valign="top" width="30.06%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.1 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p15970104542819"><span id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_text82911535125310"><strong>Rate Limiting Policies</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="69.94%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p1397010456281">Average maximum amount of data that can be transmitted per second in a backup job. </p>
</td>
</tr>
<tr id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_row2097064562817"><td class="cellrowborder" valign="top" width="30.06%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.1 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p2243342144117"><span id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_text171111542101"><strong>Source Deduplication</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="69.94%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.2 "><div class="p" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p17970945162814">After this function is enabled, the amount of data to be transmitted can be reduced, but more client resources will be occupied.<div class="note" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_note8885112682911"><span class="notetitle"> NOTE: </span><div class="notebody"><ul id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_ul5885426132914"><li id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_li10885172616299">An agent host can only be linked with one storage unit. To enable source deduplication, select <span class="parmvalue" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_parmvalue13417617181719"><b>Backup Storage Unit</b></span> for <span class="parmname" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_parmname164341313131719"><b>Specify Target Location</b></span>. Otherwise, a storage unit that is not linked with the agent host may be selected through intelligent balancing. As a result, source deduplication fails to be enabled. If different protected objects are associated with different SLAs, where different backup storage units are specified, select different agent hosts for the protected objects. Otherwise, source deduplication of some backup jobs will fail to be enabled.</li><li id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_li9885182662911">If an agent host has been linked with a storage unit but is not performing a backup job with source deduplication, you can run the <strong id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_b1734071915190">dataturbo delete storage_object storage_name=</strong><em id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_i18291255102216">?</em> command on the agent host to delete the source deduplication link with the storage unit. The value of <strong id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_b9927131312572">storage_name</strong> in the command can be queried by running the <strong id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_b11782052162315">dataturbo show storage_object</strong> command. This way, when the agent host performs a backup job with source deduplication, the link between the agent host and a new storage unit can be established.</li><li id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_li11885142615297">Check whether the host OS supports source deduplication by referring to <a href="https://info.support.huawei.com/storage/comp/#/oceanprotect" target="_blank" rel="noopener noreferrer">Compatibility Query</a>. If the host OS does not support source deduplication, source deduplication does not take effect.</li><li id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_li7883549153219">If a built-in agent is used for backup, source deduplication, after being configured, does not take effect.</li></ul>
</div></div>
</div>
</td>
</tr>
<tr id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_row1234428112910"><td class="cellrowborder" valign="top" width="30.06%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.1 "><div class="p" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_p1835141211302"><strong id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_b693713423122">Job Timeout Alarm</strong><div class="note" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_note379352823112"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001839143189_en-us_topic_0000001839143213_p8320153562113">This parameter is available only in 1.6.0 and later versions.</p>
</div></div>
</div>
</td>
<td class="cellrowborder" valign="top" width="69.94%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_p8670441193214">After this function is enabled, an alarm is sent if the job execution time exceeds the time window. The alarm needs to be manually cleared.</p>
</td>
</tr>
<tr id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_row43401925385"><td class="cellrowborder" valign="top" width="30.06%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.1 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p113408251083"><span id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_text834132155411"><strong>Job Failure Alarm</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="69.94%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p7601371993">After this function is enabled, an alarm is automatically sent if a job fails and is automatically cleared after successful execution.</p>
</td>
</tr>
<tr id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_row13970445142816"><td class="cellrowborder" valign="top" width="30.06%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.1 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p0970184572811"><span id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_text141561387542"><strong>Automatic Retry</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="69.94%" headers="mcps1.3.2.2.4.2.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p109701345142812">After this function is enabled, the system automatically retries a backup job if it fails.</p>
<div class="p" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p89708457287">The number of retries ranges from 1 to 5, and the wait time ranges from 1 to 30 minutes. For example, if the number of retries is set to 3 and the wait time is set to 5 minutes, the system retries for three times at an interval of 5 minutes.<div class="note" id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_note139701345152818"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001792402732__en-us_topic_0000001792562344_en-us_topic_0000001337708186_p11970194518283">During automatic retry, the system creates a backup job. If the backup job is not within the backup time window, the job is not executed and fails.</p>
</div></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</p></li><li><span>Click <span class="uicontrol"><b>OK</b></span>. </span><p><p>If the current system time is later than the first backup start time of the SLA, you can choose to execute backup immediately after the backup SLA is associated or wait for the next scheduling based on the backup policy set in the SLA.</p>
</p></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000001792402664.html">Step 8: Performing Backup</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>