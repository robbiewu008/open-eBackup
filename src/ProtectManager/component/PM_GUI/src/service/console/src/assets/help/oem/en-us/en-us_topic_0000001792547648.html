<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Live Mounting VMware VMs">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="EN-US_TOPIC_0000001792547648">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Live Mounting VMware VMs</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="EN-US_TOPIC_0000001792547648"></a><a name="EN-US_TOPIC_0000001792547648"></a>
  <h1 class="topictitle1">Live Mounting VMware VMs</h1>
  <div>
   <p>This section describes how to live mount a copy of a VM to the original location or a new location to quickly start a new VM.</p>
   <div class="section">
    <h4 class="sectiontitle">Context</h4>
    <ul>
     <li>Live mount can be performed using backup copies or replication copies. Data can be mounted to the original location or a new location. Note that replication copies cannot be used to mount data to the original location.</li>
     <li>When data is mounted to the original location, if the original location is a cluster and vSphere DRS is not enabled for the cluster, the system mounts the VM to the host to which the VM belongs when the copy is generated.<p>When data is mounted to a new location, if the new location is a cluster, vSphere DRS must be enabled for the cluster. Otherwise, the live mount cannot be performed. You are advised to select a host in the cluster for mounting or enable vSphere DRS on the vCenter before mounting.</p> <p>For details about how to check or enable vSphere DRS, visit the <a href="https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.resmgmt.doc/GUID-827DBD6D-08B7-4411-9214-9E126671457F.html" target="_blank" rel="noopener noreferrer">VMware official website</a>.</p></li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Prerequisites</h4>
    <ul>
     <li>The maximum number of NFS volumes that can be mounted to an ESXi host by default varies with versions. Specifically, the maximum number is 8 for ESXi 6.7 and earlier versions, but 32 for ESXi 7.0 and later versions. If the number of live mount jobs created on a single target host exceeds the maximum number of NFS volumes that can be mounted, the mount jobs will fail.<p>In this scenario, you can change the number of NFS volumes that can be mounted to the ESXi host by referring to <a href="en-us_topic_0000001839187005.html">How Do I Change the Number of NFS Volumes Mounted to an ESXi Host?</a>.</p></li>
     <li>If data is to be restored to a cluster, ensure that all hosts in the cluster can communicate with the logical ports of the backup storage.</li>
     <li>If data is to be restored to a host, ensure that the selected host can communicate with the logical ports of the backup storage.</li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001792547648__en-us_topic_0000001839142377_uicontrol142823044710"><b><span id="EN-US_TOPIC_0000001792547648__en-us_topic_0000001839142377_text9282202475"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000001792547648__en-us_topic_0000001839142377_text102571034917"><strong>Live Mount</strong></span> &gt; <span id="EN-US_TOPIC_0000001792547648__en-us_topic_0000001839142377_text16159163013113"><strong>VMware</strong></span></b></span>.</span></li>
     <li><span>Click <span class="uicontrol"><b><span><strong>Create</strong></span></b></span>.</span></li>
     <li><span>On the <span class="uicontrol"><b><span><strong>Select Resource</strong></span></b></span> tab page, select the original VM corresponding to the copy to be mounted, and click <span class="uicontrol"><b><span><strong>Next</strong></span></b></span>.</span></li>
     <li><span>On the <span class="uicontrol"><b><span><strong>Select Copy</strong></span></b></span> tab page, perform the following operations:</span><p></p>
      <ol type="a">
       <li>Select the copy to be mounted.
        <ul>
         <li>The copy to be live mounted must be in the <span class="uicontrol"><b><span><strong>Normal</strong></span></b></span> state.</li>
         <li>The copy generated after part of disks of a VM are backed up cannot be live mounted.</li>
        </ul></li>
       <li>Select the created mount update policy.<p>If the mount update policy is not selected in this step, you can configure the mount update policy by <a href="en-us_topic_0000001792547624.html">modifying mount information</a> later.</p></li>
       <li>Click <span class="uicontrol"><b><span><strong>Next</strong></span></b></span>.</li>
      </ol> <p></p></li>
     <li><span>On the <span class="uicontrol"><b><span><strong>Mount Options</strong></span></b></span> tab page, set mount parameters, and click <span class="uicontrol"><b><span><strong>Next</strong></span></b></span>.</span><p></p>
      <ol type="a">
       <li>Set the basic and advanced parameters for live mount.
        <div class="p">
         <a href="#EN-US_TOPIC_0000001792547648__table89615043315">Table 1</a> describes the related parameters.
         <div class="note">
          <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
          <div class="notebody">
           <ul>
            <li>You can set either <strong>Bandwidth (MB/s)</strong> or <strong>Standard IOPS (8 KB)</strong> or both of them. You are advised to set only <strong>Bandwidth (MB/s)</strong> for bandwidth-intensive services and only <strong>Standard IOPS (8 KB)</strong> for IOPS-intensive services. If you cannot determine the service type or the service type changes frequently, you can set both parameters and the system will control the traffic using the parameter with a smaller value.</li>
            <li>You can query the conversion between the standard IOPS (8 KB) model and real I/O model in the conversion table on the management page.</li>
            <li>The maximum traffic of mounted copies is limited to ensure the performance of backup and restoration jobs. In addition, the minimum traffic of mounted copies is set to ensure the minimum performance of mounted copies.</li>
           </ul>
          </div>
         </div>
         <div class="tablenoborder">
          <a name="EN-US_TOPIC_0000001792547648__table89615043315"></a><a name="table89615043315"></a>
          <table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001792547648__table89615043315" frame="border" border="1" rules="all">
           <caption>
            <b>Table 1 </b>Live mount parameters
           </caption>
           <colgroup>
            <col style="width:16.45%">
            <col style="width:20.79%">
            <col style="width:62.760000000000005%">
           </colgroup>
           <thead align="left">
            <tr>
             <th align="left" class="cellrowborder" colspan="2" valign="top" id="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1"><p>Parameter</p></th>
             <th align="left" class="cellrowborder" valign="top" id="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2"><p>Description</p></th>
            </tr>
           </thead>
           <tbody>
            <tr>
             <td class="cellrowborder" valign="top" width="16.45%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Mount To</strong></span>: <span><strong>Original location</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="20.79%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>New VM Name</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="62.760000000000005%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 "><p>Name of a new VM, which can be customized.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" rowspan="4" valign="top" width="16.45%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Mount To</strong></span>: <span><strong>New location</strong></span></p> <p></p> <p></p> <p></p></td>
             <td class="cellrowborder" valign="top" width="20.79%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>New VM Name</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="62.760000000000005%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 "><p>Name of a new VM, which can be customized.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Compute Location</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p>Compute resources used by the VM that is generated after live mount.</p> <p>Select a cluster, host, resource pool, or vAPP as the target.</p>
              <div class="note">
               <span class="notetitle"> NOTE: </span>
               <div class="notebody">
                <p>The VMware version of the target ESXi host cannot be earlier than that of the source ESXi host.</p>
               </div>
              </div></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>VM Profile</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p>Datastore where the VM configuration files (excluding the VMDK file) are located.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Network Location</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p>Network to which the VM generated after live mount is connected.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Target CPU</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 ">
              <div class="p">
               CPU specifications of a new VM.
               <ul>
                <li><span><strong>Original configuration</strong></span>: same as the CPU specifications of the source VM to which the copy is mounted.</li>
                <li><span><strong>Specified configuration</strong></span>: If you have performance requirements for the new VM, specify <span class="uicontrol"><b><span><strong>CPUs</strong></span></b></span> and <span class="uicontrol"><b><span><strong>Cores per Socket</strong></span></b></span>.<p>Set the values of <span class="uicontrol"><b><span><strong>CPUs</strong></span></b></span> and <span class="uicontrol"><b><span><strong>Cores per Socket</strong></span></b></span> properly according to the following principles:</p>
                 <ul>
                  <li>The number of sockets calculated using the formula <strong><span><strong>CPUs</strong></span>/<span><strong>Cores per Socket</strong></span>= Number of sockets</strong> must be an integer.</li>
                  <li>The value of <span><strong>CPUs</strong></span> ranges from 1 to 128.</li>
                 </ul></li>
               </ul>
              </div></td>
            </tr>
            <tr>
             <td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Target Memory</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 "><p>Memory specifications of the new VM.</p>
              <ul>
               <li><span><strong>Original configuration</strong></span>: same as the memory size of the source VM to which the copy is mounted.</li>
               <li><span><strong>Specified configuration</strong></span>: If you have performance requirements for the new VM, specify a memory size.<p>The memory size ranges from 4 MB to 6128 GB and must be an integer multiple of 4.</p></li>
              </ul></td>
            </tr>
            <tr>
             <td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Enable Network Adapters</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 ">
              <div class="p">
               Whether to enable the network adapter of the VM after the live mount. If you need to remotely log in to the VM after the live mount, you are advised to disable this option, and then manually enable the network adapter after the live mount.
               <ul>
                <li>Disabled: All network adapters of the VM are disconnected after the live mount. To remotely log in to the VM, you need to set the connection status of the network adapter on the vSphere or ESXi page after the live mount.<p>For details, see <a href="en-us_topic_0000001839187049.html">How Do I Enable the Network Adapter of a VMware VM?</a>.</p></li>
                <li>Enabled: After this option is enabled, if the original VM of the copy still exists, the new VM may have a network conflict with the original VM after the live mount. Check the network of the new VM after the live mount.</li>
               </ul>
              </div></td>
            </tr>
            <tr>
             <td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Power on Automatically After Mounting</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 "><p>Whether to automatically start the VM after being mounted.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" rowspan="3" valign="top" width="16.45%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Bandwidth (MB/s)</strong></span></p> <p></p> <p></p></td>
             <td class="cellrowborder" valign="top" width="20.79%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Min</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="62.760000000000005%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 "><p>Minimum bandwidth for copy live mount.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Max</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p>Maximum bandwidth for copy live mount.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Burst</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p>Maximum burst bandwidth for copy live mount. The value of <span><strong>Burst</strong></span> must be greater than that of <strong>Max</strong>.</p> <p><span><strong>Burst</strong></span> can be set only after <span><strong>Max</strong></span> is set.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" rowspan="3" valign="top" width="16.45%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Standard IOPS (8 KB)</strong></span></p> <p></p> <p></p></td>
             <td class="cellrowborder" valign="top" width="20.79%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Min</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="62.760000000000005%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 "><p>Average minimum number of standard I/O requests per second for copy live mount.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Max</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p>Average maximum number of standard I/O requests per second for copy live mount.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Burst</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p>Maximum burst IOPS for copy live mount. The value of <span><strong>Burst</strong></span> must be greater than that of <strong>Max</strong>.</p> <p><span><strong>Burst</strong></span> can be set only after <span><strong>Max</strong></span> is set.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Max. Burst Duration (s)</strong></span></p></td>
             <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 "><p>This parameter needs to be set only when the <span><strong>Burst</strong></span> parameter of the bandwidth or standard IOPS is set. It indicates the maximum duration of burst bandwidth or burst IOPS.</p></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" width="16.45%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Normalized Latency (8 KB)</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="20.79%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.1 "><p><span><strong>Max</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="62.760000000000005%" headers="mcps1.3.4.2.5.2.1.1.1.3.2.4.1.2 "><p>Maximum latency of the local storage system.</p></td>
            </tr>
           </tbody>
          </table>
         </div>
        </div></li>
       <li>Click <span class="uicontrol"><b><span><strong>Next</strong></span></b></span>.</li>
      </ol> <p></p></li>
     <li><span>Preview the mount parameters. After confirming that the parameters are set correctly, click <span class="uicontrol"><b><span><strong>Finish</strong></span></b></span>.</span><p></p>
      <div class="note">
       <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
       <div class="notebody">
        <p>If a copy is used for live mount immediately after it is generated, the live mount job may fail because the copy is still in the initialization state. In this case, try again in 3 minutes.</p>
       </div>
      </div> <p></p></li>
    </ol>
   </div>
  </div>
 </body>
</html>