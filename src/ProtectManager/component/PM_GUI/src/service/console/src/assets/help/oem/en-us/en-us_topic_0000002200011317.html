<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="How Do I Skip the Backup of a Deleted Index If the Backup Fails Due to the Deleted Index?">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="en-us_topic_0000002200011341.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="">
  <meta name="DC.Publisher" content="20250306">
  <meta name="prodname" content="csbs">
  <meta name="documenttype" content="usermanual">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="EN-US_TOPIC_0000002200011317">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>How Do I Skip the Backup of a Deleted Index If the Backup Fails Due to the Deleted Index?</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="EN-US_TOPIC_0000002200011317"></a><a name="EN-US_TOPIC_0000002200011317"></a>
  <h1 class="topictitle1">How Do I Skip the Backup of a Deleted Index If the Backup Fails Due to the Deleted Index?</h1>
  <div>
   <div class="section">
    <h4 class="sectiontitle">Symptom</h4>
    <p>When an Elasticsearch backup job is executed, the backup fails.</p>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Possible Cause</h4>
    <p>If an index is deleted during the execution of a backup job, the backup job fails because the index does not exist when a snapshot is added to the Elasticsearch production environment. To allow indexes to be deleted during backup, perform the following steps.</p>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li><span>Log in to any host where the client is installed.</span></li>
     <li id="EN-US_TOPIC_0000002200011317__li0666112614514"><a name="EN-US_TOPIC_0000002200011317__li0666112614514"></a><a name="li0666112614514"></a><span>Run the following command to view the configuration file (replace <em>/opt</em> with the actual client installation path):</span><p></p><pre class="screen">cat <em>/opt</em>/DataBackup/ProtectClient/Plugins/ElasticSearchPlugin/cfg/plugin.cfg</pre> <p></p></li>
     <li><span>Search for the value of <strong>elasticsearch.allowIndexDelete</strong> in the command output.</span><p></p>
      <ul>
       <li>If the value is <strong>true</strong>, the backup of the index is skipped when the index is deleted during backup. The backup failure may be caused by other reasons. Collect logs and contact Huawei technical support engineers.</li>
       <li>If the value is <strong>false</strong>, the backup of the index is not skipped when the index is deleted during backup and the backup job fails. To allow indexes to be deleted during backup, go to <a href="#EN-US_TOPIC_0000002200011317__li11630817164912">4</a>.</li>
      </ul> <p></p></li>
     <li id="EN-US_TOPIC_0000002200011317__li11630817164912"><a name="EN-US_TOPIC_0000002200011317__li11630817164912"></a><a name="li11630817164912"></a><span>Log in to each host where the client is installed and change the value of <strong>elasticsearch.allowIndexDelete</strong> in the configuration file in <a href="#EN-US_TOPIC_0000002200011317__li0666112614514">2</a> to <strong>true</strong>. Save the modification and initiate the backup job again.</span></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="en-us_topic_0000002200011341.html">FAQs</a>
    </div>
   </div>
  </div>
 </body>
</html>