<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Restoring a SQL Server Database">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001792366434.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20240608">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001792366534">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Restoring a SQL Server Database</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000001792366534"></a><a name="EN-US_TOPIC_0000001792366534"></a>

<h1 class="topictitle1">Restoring a SQL Server Database</h1>
<div><p>This section describes how to use a copy to restore a database that has been backed up to the original or different host.</p>
<div class="section"><h4 class="sectiontitle">Prerequisites</h4><ul><li>Before restoring data to a different host, ensure that a database instance exists on the target host.</li><li id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001731610773_li17731230145317">Before restoration, ensure that the remaining space of the data directory at the target location for restoration is greater than the size of the copy used for restoration before reduction. Otherwise, restoration will fail.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001839142377_uicontrol17392202272717"><b><span id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001839142377_text1939210224272"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001839142377_text439314220278"><strong>Copy Data</strong></span> &gt; <span id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001839142377_text14652358184918"><strong>Databases</strong></span> &gt; <span id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001839142377_text6385151219337"><strong>SQL Server</strong></span></b></span>.</span></li><li><span>You can search for copies by database resource or copy. This section describes how to search for copies by resource.</span><p><p>On the <span class="uicontrol"><b><span><strong>Resources</strong></span></b></span> tab page, find the resource to be recovered by resource name and click the resource name.</p>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>Copy Data</strong></span></b></span> and select the year, month, and day in sequence to find the copy.</span><p><p>If <span><img src="en-us_image_0000001792526506.png"></span> is displayed under a month or date, a copy exists in the month or on the date.</p>
</p></li><li><span>Click <span><img src="en-us_image_0000001945561561.png"></span> on the timeline and the corresponding copy is displayed. In the row of the target copy, choose <span class="uicontrol"><b>More &gt; Restore</b></span>.</span><p><p><a href="#EN-US_TOPIC_0000001792366534__table93951625101715">Table 1</a> describes the related parameters.</p>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000001792366534__table93951625101715"></a><a name="table93951625101715"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001792366534__table93951625101715" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Parameters of SQL Server database restoration</caption><colgroup><col style="width:32.53%"><col style="width:67.47%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32.53%" id="mcps1.3.3.2.4.2.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="67.47%" id="mcps1.3.3.2.4.2.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.3.2.4.2.2.2.3.1.1 "><p><span><strong>Restore To</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.3.2.4.2.2.2.3.1.2 "><p>Select either <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span> or <span class="uicontrol"><b><span><strong>New location</strong></span></b></span>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.3.2.4.2.2.2.3.1.1 "><p><span><strong>Location</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.3.2.4.2.2.2.3.1.2 "><p>If <strong>Restore To</strong> is set to <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span>, the original location is displayed by default.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.3.2.4.2.2.2.3.1.1 "><p><span><strong>Target Host/Cluster</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.3.2.4.2.2.2.3.1.2 "><p>If <strong>Restore To</strong> is set to <span class="uicontrol"><b><span><strong>New location</strong></span></b></span>, select the original host or a different host for restoration.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.3.2.4.2.2.2.3.1.1 "><p><span><strong>Target Instance</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.3.2.4.2.2.2.3.1.2 "><p>If <strong>Restore To</strong> is set to <span class="uicontrol"><b><span><strong>New location</strong></span></b></span>, select the instance on the target host.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.3.2.4.2.2.2.3.1.1 "><p><span><strong>Rename Database</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.3.2.4.2.2.2.3.1.2 "><p>After this function is enabled, you can rename the restored database.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>When a database is restored to the original location, you must select the instance to which the database belongs for resource scanning.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.3.2.4.2.2.2.3.1.1 "><p><span><strong>Script to Run Before Restoration</strong></span></p>
</td>
<td class="cellrowborder" rowspan="3" valign="top" width="67.47%" headers="mcps1.3.3.2.4.2.2.2.3.1.2 "><p>You can execute a custom script before a restore job is executed and after it succeeds or fails based on your need.</p>
<p>Absolute path and name of a script, for example, <strong>C:\script.bat</strong>.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001792402656_en-us_topic_0000001264099602_p196461512103113">If <span class="uicontrol" id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001792402656_en-us_topic_0000001264099602_uicontrol180112781919"><b><span id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001792402656_en-us_topic_0000001264099602_text10711756153116"><strong>Script to Run upon Restoration Success</strong></span></b></span> is configured, the status of the restoration job is displayed as <span class="uicontrol" id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001792402656_en-us_topic_0000001264099602_uicontrol488919204209"><b><span id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001792402656_en-us_topic_0000001264099602_text186291135132417"><strong>Succeeded</strong></span></b></span> on the <span id="EN-US_TOPIC_0000001792366534__en-us_topic_0000001792402656_text712055613536">OceanProtect</span> even if the script fails to be executed. Check whether the job details contain a message indicating that the post-processing script fails to be executed. If yes, modify the script in a timely manner. </p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.4.2.2.2.3.1.1 "><p><span><strong>Script to Run upon Restoration Success</strong></span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.4.2.2.2.3.1.1 "><p><span><strong>Script to Run upon Restoration Failure</strong></span></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Click <span class="uicontrol"><b>OK</b></span>.</span></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000001792366434.html">Restoration</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>