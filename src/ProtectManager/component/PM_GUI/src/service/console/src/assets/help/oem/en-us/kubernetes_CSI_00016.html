<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Step 8: Performing Backup">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="kubernetes_CSI_00010.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
  <meta name="DC.Publisher" content="20241029">
  <meta name="prodname" content="csbs">
  <meta name="documenttype" content="usermanual">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="kubernetes_CSI_00016">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Step 8: Performing Backup</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="kubernetes_CSI_00016"></a><a name="kubernetes_CSI_00016"></a>
  <h1 class="topictitle1">Step 8: Performing Backup</h1>
  <div>
   <p>Before performing backup, you need to associate the resources to be protected with a specified SLA policy. The system protects the resources based on the SLA policy and periodically performs backup jobs based on the SLA policy. You can perform a backup job immediately through manual backup.</p>
   <div class="section">
    <h4 class="sectiontitle">Precautions</h4>
    <ul>
     <li>Ensure that the reserved space for the production storage is greater than the size of the resources to be backed up.</li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Prerequisites</h4>
    <ul>
     <li>CSIDriver must be installed on the nodes where backup pods run, and the PVCs to be backed up also use CSIDriver. PVC backup is not supported when CSIDriver is not installed. CSIDriver is installed in the Kubernetes cluster deployed on CCE. In the Kubernetes cluster deployed on FusionCompute, you can visit the following addresses to install CSIDriver. For details, see "Managing Huawei Storage eSDK CSI" in the FusionCompute product documentation of the corresponding version.
      <ul>
       <li>For enterprise users: <a href="https://support.huawei.com/enterprise/en/virtualization/fusioncompute-pid-8576912" target="_blank" rel="noopener noreferrer">Click here</a>.</li>
       <li>For carrier users: <a href="https://support.huawei.com/carrier/productNewOffering?col=product&amp;resTab=PD&amp;path=PBI1-21430725/PBI1-251363742/PBI1-21431663/PBI1-254217483/PBI1-8576912&amp;lang=en&amp;scene=DS-HDX" target="_blank" rel="noopener noreferrer">Click here</a>.</li>
      </ul></li>
     <li>When you import a backup pod image to the production environment, select the image that has the same architecture as the production node.</li>
     <li>During manual backup, parameters (except <span class="uicontrol"><b><span><strong>Automatic Retry</strong></span></b></span>) defined in the SLA are applied to the manual backup job.</li>
     <li>Copies generated by manual backup are retained for the duration defined in the SLA.<p>If the protection policy selected during manual backup is not defined in the SLA, the generated backup copies are retained permanently. If full backup is not defined in the SLA but selected during manual backup, the copies generated by the manual full backup are retained permanently.</p></li>
     <li>If a replication or archive policy has been defined in the SLA, the system will perform replication or archiving once based on the SLA when you perform manual backup.</li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Periodically Backing Up a Namespace</h4>
    <ol>
     <li><span>Choose <span class="uicontrol" id="kubernetes_CSI_00016__en-us_topic_0000001963707218_en-us_topic_0000002000387257_en-us_topic_0000001963711934_uicontrol846217343614"><b><span id="kubernetes_CSI_00016__en-us_topic_0000001963707218_en-us_topic_0000002000387257_en-us_topic_0000001963711934_text1046212303610"><strong>Protection</strong></span> &gt; Containers &gt; <span id="kubernetes_CSI_00016__en-us_topic_0000001963707218_en-us_topic_0000002000387257_en-us_topic_0000001963711934_text149606591485"><strong>Kubernetes CSI</strong></span></b></span>.</span></li>
     <li><span>Click the <span><strong>Namespace</strong></span> tab and select the namespace to be protected.</span></li>
     <li><span>Click <span class="uicontrol"><b><span><strong>Protect</strong></span></b></span>.</span></li>
     <li><span>Select a preset or user-defined SLA.</span><p></p><p>You can also click <span class="uicontrol"><b><span><strong>Create</strong></span></b></span> to create an SLA.</p> <p></p></li>
     <li><span>After selecting an SLA, you can enable or disable the <span class="uicontrol"><b><span><strong>Application-Consistent Backup</strong></span></b></span> function based on the application scenario.</span><p></p>
      <div class="p">
       During the backup, the application-consistent backup function makes sure that data generated at the same point in time in a Kubernetes cluster is captured, memory data is backed up, and applications are quiesced. Therefore, application data consistency is ensured.
       <div class="note">
        <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
        <div class="notebody">
         <p>To perform application-consistent backup, you need to configure the pre- or post-processing command on pods in the production environment. For details about the configuration example, see <a href="kubernetes_CSI_00066.html">Pod Configuration in the Production Environment for Application-Consistent Backup (General)</a>.</p>
        </div>
       </div>
      </div> <p></p></li>
     <li><span>Click <span class="uicontrol" id="kubernetes_CSI_00016__en-us_topic_0000001607841256_uicontrol196538515235"><b>OK</b></span>. </span><p></p><p id="kubernetes_CSI_00016__en-us_topic_0000001607841256_p25041111535">If the current system time is later than the first backup start time of the SLA, you can select to perform backup immediately after the backup SLA is associated or wait for the next scheduling based on the backup policy set in the SLA.</p> <p></p></li>
     <li><strong>Optional: </strong><span>Perform manual backup.</span><p></p><p>If you want to execute a backup job immediately, perform manual backup through the following operations. Otherwise, skip this step.</p>
      <ol type="a">
       <li>Click the <span class="uicontrol"><b><span><strong>Namespace</strong></span></b></span> or <span class="uicontrol"><b>Dataset</b></span> tab based on the type of data to be backed up.
        <div class="note">
         <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
         <div class="notebody">
          <p>If you choose <span class="uicontrol"><b><span><strong>Namespace</strong></span></b></span> for backup, only tables that have the same SLA as the namespace are backed up.</p>
         </div>
        </div></li>
       <li>In the row that contains the namespace or dataset to be backed up, choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>Manual Backup</strong></span></b></span>.
        <div class="note">
         <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
         <div class="notebody">
          <p id="kubernetes_CSI_00016__en-us_topic_0000001964713008_en-us_topic_0000001607531736_p870125314544">You can select multiple resources to perform manual backup in batches. Select multiple protected resources and choose <strong id="kubernetes_CSI_00016__en-us_topic_0000001964713008_b1657653183519">More</strong> &gt; <span id="kubernetes_CSI_00016__en-us_topic_0000001964713008_text122852865419"><strong>Manual Backup</strong></span> in the upper left corner of the resource list.</p>
         </div>
        </div></li>
       <li>Set the name of the copy generated through manual backup.<p>If this parameter is left unspecified, the system sets the copy name to <strong>backup_</strong><em>Timestamp</em> by default.</p></li>
       <li>Select a protection policy, which can be <strong>Full Backup</strong> or <strong>Forever Incremental (Synthetic Full) Backup</strong>.</li>
       <li>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</li>
      </ol> <p></p></li>
    </ol>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Periodically Backing Up a Dataset</h4>
    <ol>
     <li><span>Choose <span class="uicontrol" id="kubernetes_CSI_00016__kubernetes_csi_00011_en-us_topic_0000001839142377_uicontrol846217343614"><b><span id="kubernetes_CSI_00016__kubernetes_csi_00011_en-us_topic_0000001839142377_text1046212303610"><strong>Protection</strong></span> &gt; Containers &gt; <span id="kubernetes_CSI_00016__kubernetes_csi_00011_en-us_topic_0000001839142377_text149606591485"><strong>Kubernetes CSI</strong></span></b></span>.</span></li>
     <li><span>Click the <span class="uicontrol"><b><span><strong>Dataset</strong></span></b></span> tab and select the dataset to be protected.</span></li>
     <li><span>Click <span class="uicontrol"><b><span><strong>Protect</strong></span></b></span>.</span></li>
     <li><span>Select a user-defined SLA.</span><p></p><p>You can also click <span class="uicontrol"><b><span><strong>Create</strong></span></b></span> to create an SLA.</p> <p></p></li>
     <li><span>After selecting an SLA, you can enable or disable the <span class="uicontrol" id="kubernetes_CSI_00016__kubernetes_csi_00017_uicontrol56798203554"><b><span id="kubernetes_CSI_00016__kubernetes_csi_00017_text065615184191"><strong>Application-Consistent Backup</strong></span></b></span> function based on the application scenario.</span><p></p>
      <div class="p" id="kubernetes_CSI_00016__kubernetes_csi_00017_p18841229193913">
       During the backup, the application-consistent backup function makes sure that data generated at the same point in time in a Kubernetes cluster is captured, memory data is backed up, and applications are quiesced. Therefore, application data consistency is ensured.
       <div class="note" id="kubernetes_CSI_00016__kubernetes_csi_00017_note15981240115620">
        <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
        <div class="notebody">
         <p id="kubernetes_CSI_00016__kubernetes_csi_00017_p75981840145610">To perform application-consistent backup, you need to configure the pre- or post-processing command on pods in the production environment. For details about the configuration example, see <a href="kubernetes_CSI_00066.html">Pod Configuration in the Production Environment for Application-Consistent Backup (General)</a>.</p>
        </div>
       </div>
      </div> <p></p></li>
     <li><span>Click <span class="uicontrol" id="kubernetes_CSI_00016__en-us_topic_0000001792503842_uicontrol196538515235"><b>OK</b></span>. </span><p></p><p id="kubernetes_CSI_00016__en-us_topic_0000001792503842_p25041111535">If the current system time is later than the first backup start time of the SLA, you can select to perform backup immediately after the backup SLA is associated or wait for the next scheduling based on the backup policy set in the SLA.</p> <p></p></li>
     <li><strong>Optional: </strong><span>Perform manual backup.</span><p></p><p>If you want to execute a backup job immediately, perform manual backup through the following operations. Otherwise, skip this step.</p>
      <ol type="a">
       <li>Click the <span class="uicontrol"><b><span><strong>Namespace</strong></span></b></span> or <span class="uicontrol"><b>Dataset</b></span> tab based on the type of data to be backed up.
        <div class="note">
         <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
         <div class="notebody">
          <p>If you choose <span class="uicontrol"><b><span><strong>Namespace</strong></span></b></span> for backup, only tables that have the same SLA as the namespace are backed up.</p>
         </div>
        </div></li>
       <li>In the row that contains the namespace or dataset to be backed up, choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>Manual Backup</strong></span></b></span>.
        <div class="note">
         <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
         <div class="notebody">
          <p id="kubernetes_CSI_00016__en-us_topic_0000001964713008_en-us_topic_0000001607531736_p870125314544_1">You can select multiple resources to perform manual backup in batches. Select multiple protected resources and choose <strong id="kubernetes_CSI_00016__en-us_topic_0000001964713008_b1657653183519_1">More</strong> &gt; <span id="kubernetes_CSI_00016__en-us_topic_0000001964713008_text122852865419_1"><strong>Manual Backup</strong></span> in the upper left corner of the resource list.</p>
         </div>
        </div></li>
       <li>Set the name of the copy generated through manual backup.<p>If this parameter is left unspecified, the system sets the copy name to <strong>backup_</strong><em>Timestamp</em> by default.</p></li>
       <li>Select a protection policy, which can be <strong>Full Backup</strong> or <strong>Forever Incremental (Synthetic Full) Backup</strong>.</li>
       <li>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</li>
      </ol> <p></p></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="kubernetes_CSI_00010.html">Backing Up Namespaces or Datasets</a>
    </div>
   </div>
  </div>
 </body>
</html>