<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Checking the Snapshot Control File Location">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="oracle_gud_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20241029">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="oracle_gud_0020">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Checking the Snapshot Control File Location</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="oracle_gud_0020"></a><a name="oracle_gud_0020"></a>

<h1 class="topictitle1">Checking the Snapshot Control File Location</h1>
<div><p>In the Oracle cluster backup scenario, RMAN requires that the snapshot control file must be stored in a shared directory and be accessible to all nodes in the cluster. Otherwise, the backup job may fail. This section describes how to check and modify the location of the snapshot control file. Skip this section in non-cluster scenarios.</p>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li id="oracle_gud_0020__li14647185922920"><span>Log in to the Oracle database host.</span><p><ul id="oracle_gud_0020__en-us_topic_0000001656760969_ul1983714162204"><li id="oracle_gud_0020__en-us_topic_0000001656760969_li7258697580">If the Linux OS is used, use PuTTY to log in to the Oracle database host and run the <strong id="oracle_gud_0020__b14682476107">su - oracle</strong> command to switch to user <strong id="oracle_gud_0020__b1646874718106">oracle</strong>.</li><li id="oracle_gud_0020__en-us_topic_0000001656760969_li1366015032013">If the Windows OS is used, log in to the Oracle database host as the system administrator.</li></ul>
</p></li><li><span>Run the following commands to access the RMAN:</span><p><ul><li>If the Linux OS is used, run the following commands:<p><strong>export ORACLE_SID=</strong><em>Instance name</em></p>
<p><strong>rman target /</strong></p>
</li><li>If the Windows OS is used, perform the following operations:<ol type="a"><li>Press <span class="uicontrol" id="oracle_gud_0020__oracle_gud_0016_uicontrol11819941114510"><b>Win+R</b></span> to open the <strong id="oracle_gud_0020__oracle_gud_0016_b1015191219408">Run</strong> window.</li><li>Enter <span class="parmvalue"><b>cmd</b></span> and run the following commands:<p><strong>set ORACLE_SID=</strong><em>Instance name</em></p>
<p><strong>rman target /</strong></p>
</li></ol>
</li></ul>
</p></li><li><span>Run the following command to check the location of the snapshot control file:</span><p><p><strong>show snapshot controlfile name;</strong></p>
<div class="p">Information similar to the following is displayed in the command output. Check whether the path of the snapshot control file is a shared directory.<pre class="screen">RMAN&gt; show snapshot controlfile name;
using target database control file instead of recovery catalog
RMAN configuration parameters for database with db_unique_name ORCL are:
<strong>CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/u01/app/oracle/product/18.3.0/db_1/dbs/snapcf_orcl2.f';</strong> # default</pre>
</div>
<div class="p">Check whether the path following the <strong>CONFIGURE SNAPSHOT CONTROLFILE NAME TO</strong> field is the ASM disk group path. Generally, the ASM disk group path starts with a plus sign (+).<ul><li>If yes, no further action is required.</li><li>If no, go to <a href="#oracle_gud_0020__li37161555110">4</a>.</li></ul>
</div>
</p></li><li id="oracle_gud_0020__li37161555110"><a name="oracle_gud_0020__li37161555110"></a><a name="li37161555110"></a><span>Run the following command to modify the location of the snapshot control file:</span><p><p><strong>configure snapshot controlfile name to '</strong><em>New location of the snapshot control file</em><strong>';</strong></p>
<div class="p">Example:<pre class="screen">configure snapshot controlfile name to '+DATAC1/DEVECI/CONTROLFILE/snapcf_orcl2.f';</pre>
</div>
</p></li><li><span>Log in to other database hosts in the cluster and change the location of the snapshot control file by referring to <a href="#oracle_gud_0020__li37161555110">4</a>.</span></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="oracle_gud_0015.html">Step 1: Checking and Configuring the Database Environment</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>