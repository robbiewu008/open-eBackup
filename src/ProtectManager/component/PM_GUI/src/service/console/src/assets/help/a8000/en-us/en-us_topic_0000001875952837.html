<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Restoring a Single-Node System or an Availability Group">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001806524374.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20240608">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001875952837">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Restoring a Single-Node System or an Availability Group</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000001875952837"></a><a name="EN-US_TOPIC_0000001875952837"></a>

<h1 class="topictitle1">Restoring a Single-Node System or an Availability Group</h1>
<div><p>This section describes how to use a copy to restore a single-node or an availability group database that has been backed up to the original location or a new location.</p>
<div class="section" id="EN-US_TOPIC_0000001875952837__section10748132113363"><h4 class="sectiontitle">Prerequisites</h4><ul id="EN-US_TOPIC_0000001875952837__ul698511719473"><li id="EN-US_TOPIC_0000001875952837__li198944918478">Before the restoration, ensure that the Exchange Server service and related dependent services are running properly. For details about the corresponding services, see <a href="https://learn.microsoft.com/en-us/exchange/plan-and-deploy/deployment-ref/services-overview?view=exchserver-2019" target="_blank" rel="noopener noreferrer">Overview of Exchange services on Exchange servers</a>.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Precautions</h4><ul><li>For restoration to the original or a new location, ensure that the target location has sufficient space. Otherwise, the restoration will fail.</li><li>Before the restoration, uninstall the database to be restored manually or automatically.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001839142377_uicontrol201131546165412"><b><span id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001839142377_text4113184695420"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001839142377_text1311384665413"><strong>Copy Data</strong></span> &gt; <span id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001839142377_text843804914500"><strong>Applications</strong></span> &gt; <span id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001839142377_text1781814011566"><strong>Exchange</strong></span></b></span>.</span></li><li><span>Search for copies by single-node resource or copy. This section describes how to search for copies by single-node resource.</span><p><p>On the <strong>Resources</strong> tab page, find the single-node system to be restored based on its name and click the name of the single-node system.</p>
</p></li><li><span>Select the year, month, and day in sequence to find the copy.</span><p><p>If <span><img src="en-us_image_0000001876636617.png"></span> is displayed under a month or date, a copy exists in the month or date.</p>
</p></li><li><span>In the row where the copy resides, choose <span class="uicontrol"><b>More &gt; Restore</b></span>.</span><p><ul><li>Restore a single-node system or availability group to the original location.<p><a href="#EN-US_TOPIC_0000001875952837__table16163143516351">Table 1</a> describes the related parameters.</p>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000001875952837__table16163143516351"></a><a name="table16163143516351"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001875952837__table16163143516351" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Parameters for restoring an Exchange single-node system or availability group to the original location</caption><colgroup><col style="width:32.53%"><col style="width:67.47%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32.53%" id="mcps1.3.4.2.4.2.1.1.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="67.47%" id="mcps1.3.4.2.4.2.1.1.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.1 "><p>Single-Node Systems/Availability Groups</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.2 "><p>Target host or availability group for restoration. This parameter cannot be changed during restoration to the original location.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.1 "><p>Automatic Database Unmount Before Restoration</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.2 "><div class="p" id="EN-US_TOPIC_0000001875952837__p0863145916254">If this function is enabled, the target database is automatically unmounted before restoration and cannot be used.<div class="note" id="EN-US_TOPIC_0000001875952837__note55671514165919"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001875952837__p142261721229">If this function is disabled and the target database is in the mounted state, the restoration will fail.</p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.1 "><p>Automatic Database Mount After Restoration</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000001875952837__p156421171488">After the restoration is complete, the target database is in the unmounted state. If this function is enabled, the target database is automatically mounted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.1 "><p>Database Name Prefix</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000001875952837__p1775840204417">Prefix of the database name after restoration. After <strong id="EN-US_TOPIC_0000001875952837__b1456152195013">Database Name Prefix</strong> and <strong id="EN-US_TOPIC_0000001875952837__b155626215503">Database Name Suffix</strong> are set, the name of the database after restoration is in the following format: <em id="EN-US_TOPIC_0000001875952837__i156282120504">Prefix</em><strong id="EN-US_TOPIC_0000001875952837__b19562132115509">_</strong><em id="EN-US_TOPIC_0000001875952837__i5562821195015">Name of the database to be restored</em><strong id="EN-US_TOPIC_0000001875952837__b1856215214502">_</strong><em id="EN-US_TOPIC_0000001875952837__i1556202175015">Suffix</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.1 "><p>Database Name Suffix</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000001875952837__p114113416560">Suffix of the database name after restoration. After <strong id="EN-US_TOPIC_0000001875952837__b115171538155015">Database Name Prefix</strong> and <strong id="EN-US_TOPIC_0000001875952837__b1751773805012">Database Name Suffix</strong> are set, the name of the database after restoration is in the following format: <em id="EN-US_TOPIC_0000001875952837__i4517143814502">Prefix</em><strong id="EN-US_TOPIC_0000001875952837__b6517193865020">_</strong><em id="EN-US_TOPIC_0000001875952837__i1151713385509">Name of the database to be restored</em><strong id="EN-US_TOPIC_0000001875952837__b185173385504">_</strong><em id="EN-US_TOPIC_0000001875952837__i135172038195011">Suffix</em>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Restore a single-node system or availability group to a new location.<p><a href="#EN-US_TOPIC_0000001875952837__en-us_topic_0000001263936798_table93951625101715">Table 2</a> describes the related parameters.</p>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000001875952837__en-us_topic_0000001263936798_table93951625101715"></a><a name="en-us_topic_0000001263936798_table93951625101715"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001263936798_table93951625101715" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Parameters for restoring an Exchange single-node system or availability group to a new location</caption><colgroup><col style="width:32.53%"><col style="width:67.47%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32.53%" id="mcps1.3.4.2.4.2.1.2.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="67.47%" id="mcps1.3.4.2.4.2.1.2.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.1 "><p>Single-Node Systems/Availability Groups</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.2 "><p>Target host or availability group for restoration.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.1 "><p>Database File Path</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.2 "><p>Absolute path of the directory where the .edb file of the target database for restoration resides. The drive letter of the path must exist.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.1 "><p>Log File Path</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.2 "><p>Absolute path of the directory where the .log file of the target database for restoration resides. The drive letter of the path must exist.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.1 "><p>Automatic Database Unmount Before Restoration</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.2 "><div class="p">If this function is enabled, the target database is automatically unmounted before restoration and cannot be used.<div class="note" id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_note55671514165919"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_p142261721229">If this function is disabled and the target database is in the mounted state, the restoration will fail.</p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.1 "><p>Automatic Database Mount After Restoration</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.2 "><p>After the restoration is complete, the target database is in the unmounted state. If this function is enabled, the target database is automatically mounted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.1 "><p>Database Name Prefix</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.2 "><p>Prefix of the database name after restoration. After <strong id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_b1456152195013">Database Name Prefix</strong> and <strong id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_b155626215503">Database Name Suffix</strong> are set, the name of the database after restoration is in the following format: <em id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_i156282120504">Prefix</em><strong id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_b19562132115509">_</strong><em id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_i5562821195015">Name of the database to be restored</em><strong id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_b1856215214502">_</strong><em id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_i1556202175015">Suffix</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.1 "><p>Database Name Suffix</p>
</td>
<td class="cellrowborder" valign="top" width="67.47%" headers="mcps1.3.4.2.4.2.1.2.2.2.3.1.2 "><p>Suffix of the database name after restoration. After <strong id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_b115171538155015">Database Name Prefix</strong> and <strong id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_b1751773805012">Database Name Suffix</strong> are set, the name of the database after restoration is in the following format: <em id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_i4517143814502">Prefix</em><strong id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_b6517193865020">_</strong><em id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_i1151713385509">Name of the database to be restored</em><strong id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_b185173385504">_</strong><em id="EN-US_TOPIC_0000001875952837__en-us_topic_0000001875952837_i135172038195011">Suffix</em>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li></ul>
</p></li><li><span>Select the databases to be restored. You can preview the database names after restoration in the <span class="uicontrol"><b>Selected Databases</b></span> area.</span></li><li><span>You can select the advanced configuration when restoring an Exchange single-node system.</span><p><p><a href="#EN-US_TOPIC_0000001875952837__table169114111874">Table 3</a> describes the parameters.</p>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000001875952837__table169114111874"></a><a name="table169114111874"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001875952837__table169114111874" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Advanced parameters for restoring an Exchange single-node system</caption><colgroup><col style="width:32.53%"><col style="width:67.47%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32.53%" id="mcps1.3.4.2.6.2.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="67.47%" id="mcps1.3.4.2.6.2.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32.53%" headers="mcps1.3.4.2.6.2.2.2.3.1.1 "><p><span>Script to Run Before Restoration</span></p>
</td>
<td class="cellrowborder" rowspan="3" valign="top" width="67.47%" headers="mcps1.3.4.2.6.2.2.2.3.1.2 "><p>You can set <span><strong>Script to Run Before Restoration</strong></span>, <span><strong>Script to Run upon Restoration Success</strong></span>, and <span><strong>Script to Run upon Restoration Failure</strong></span> only when restoring a single-node system.</p>
<div class="p" id="EN-US_TOPIC_0000001875952837__p41104230711">You can execute custom scripts of the bat type based on your needs before a restoration job is executed, or after the restoration job is successfully or fails to be executed. If the script is stored in the <strong id="EN-US_TOPIC_0000001875952837__b87783397821737">DataBackup\ProtectClient\ProtectClient-E\bin\thirdparty</strong> directory, you only need to enter the script name. If the script is stored in another directory, you need to enter the absolute path of the script.<div class="note" id="EN-US_TOPIC_0000001875952837__note2110172314715"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001875952837__p2011012319717">If <span class="uicontrol" id="EN-US_TOPIC_0000001875952837__uicontrol128133372811"><b><span id="EN-US_TOPIC_0000001875952837__text1081312373820">Script to Run upon Restoration Success</span></b></span> is configured, the status of the restoration job is displayed as <span class="uicontrol" id="EN-US_TOPIC_0000001875952837__uicontrol1181363711811"><b><span id="EN-US_TOPIC_0000001875952837__text14813103719816">Successful</span></b></span> on the <span id="EN-US_TOPIC_0000001875952837__text154052245811">OceanProtect</span> even if the script fails to be executed. Check whether the job details contain a message indicating that the post-processing script fails to be executed. If yes, modify the script in a timely manner. </p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.4.2.6.2.2.2.3.1.1 "><p><span>Script to Run upon Restoration Success</span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.4.2.6.2.2.2.3.1.1 "><p><span>Script to Run upon Restoration Failure</span></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span></li></ol>
</div>
<div class="section" id="EN-US_TOPIC_0000001875952837__section172810201150"><h4 class="sectiontitle">Follow-up Procedure</h4><p id="EN-US_TOPIC_0000001875952837__p88701326556">After the restoration, you need to update the user mailbox status at the production end and create an Active Directory domain user to connect to the restored mailbox to verify the restored user mailbox data. For details, see <a href="en-us_topic_0000001935299986.html">Verifying the Restored Mailbox Data (Applicable to Microsoft Exchange Server 2010)</a> or <a href="en-us_topic_0000001945406733.html">Verifying the Restored Mailbox Data (Applicable to Microsoft Exchange Server 2013 and Later Versions)</a>.</p>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000001806524374.html">Recovery</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>