<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Step 1: Registering an HBase Cluster">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="hbase_00011.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
  <meta name="DC.Publisher" content="20241029">
  <meta name="prodname" content="csbs">
  <meta name="documenttype" content="usermanual">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="hbase_00012">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Step 1: Registering an HBase Cluster</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="hbase_00012"></a><a name="hbase_00012"></a>
  <h1 class="topictitle1">Step 1: Registering an HBase Cluster</h1>
  <div>
   <p>Before backing up and restoring an HBase backup set, register the HBase cluster with the <span>product</span>.</p>
   <div class="section" id="hbase_00012__en-us_topic_0000001249935107_section10758914153313">
    <a name="hbase_00012__en-us_topic_0000001249935107_section10758914153313"></a><a name="en-us_topic_0000001249935107_section10758914153313"></a>
    <h4 class="sectiontitle">Prerequisites</h4>
    <p>You have obtained the <span class="filepath"><b>hbase-site.xml</b></span>, <span class="filepath"><b>hdfs-site.xml</b></span>, and <span class="filepath"><b>core-site.xml</b></span> files in the HBase cluster by performing the following steps:</p>
    <ul>
     <li>When the big data platform is Cloudera's Distribution including Apache Hadoop (CDH):<p>This part uses Cloudera Express 6.3.1 as an example. Operations may vary with versions. For details, see the CDH product documentation.</p>
      <ol>
       <li>Use a browser to log in to Cloudera Manager.</li>
       <li>Choose <span class="uicontrol"><b>Cluster &gt; HBase</b></span>.</li>
       <li>Choose <span class="uicontrol"><b>Actions &gt; Download Client Configuration</b></span> on the right of the page.</li>
       <li>Obtain the <span class="filepath"><b>hbase-site.xml</b></span>, <span class="filepath"><b>hdfs-site.xml</b></span> and <span class="filepath"><b>core-site.xml</b></span> files from the downloaded package.</li>
      </ol></li>
     <li>When the big data platform is FusionInsight:<p>This part uses FusionInsight 6.5.1 as an example. Operations may vary with versions. For details, see the FusionInsight product documentation.</p>
      <ol>
       <li>Log in to FusionInsight Manager using a browser.</li>
       <li>Choose <span class="uicontrol"><b>Cluster &gt; HBase</b></span>.</li>
       <li>In the upper right corner of the page, choose <strong>More</strong> &gt; <strong>Download Client</strong>.</li>
       <li>Obtain the <span class="filepath"><b>hbase-site.xml</b></span>, <span class="filepath"><b>hdfs-site.xml</b></span> and <span class="filepath"><b>core-site.xml</b></span> files from the downloaded package.</li>
      </ol></li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li id="hbase_00012__en-us_topic_0000001249935107_li1368863015381"><span></span></li>
     <li><span>Choose <span class="uicontrol" id="hbase_00012__en-us_topic_0000001839142377_uicontrol11199173515394"><b><span id="hbase_00012__en-us_topic_0000001839142377_text7199935143919"><strong>Protection</strong></span> &gt; Big Data &gt; HBase</b></span>.</span></li>
     <li><span>On the <span class="uicontrol"><b><span><strong>Cluster</strong></span></b></span> page, click <span class="uicontrol"><b><span><strong>Register</strong></span></b></span> to register an HBase cluster.</span><p></p><p><a href="#hbase_00012__en-us_topic_0000001249935107_table164432003147">Table 1</a> describes the HBase cluster registration information.</p>
      <div class="tablenoborder">
       <a name="hbase_00012__en-us_topic_0000001249935107_table164432003147"></a><a name="en-us_topic_0000001249935107_table164432003147"></a>
       <table cellpadding="4" cellspacing="0" summary="" id="hbase_00012__en-us_topic_0000001249935107_table164432003147" frame="border" border="1" rules="all">
        <caption>
         <b>Table 1 </b>HBase cluster registration information
        </caption>
        <colgroup>
         <col style="width:25.03%">
         <col style="width:74.97%">
        </colgroup>
        <thead align="left">
         <tr>
          <th align="left" class="cellrowborder" valign="top" width="25.03%" id="mcps1.3.3.2.3.2.2.2.3.1.1"><p>Parameter</p></th>
          <th align="left" class="cellrowborder" valign="top" width="74.97%" id="mcps1.3.3.2.3.2.2.2.3.1.2"><p>Description</p></th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td class="cellrowborder" valign="top" width="25.03%" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p><span><strong>Name</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="74.97%" headers="mcps1.3.3.2.3.2.2.2.3.1.2 "><p>Customize an HBase cluster name.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="25.03%" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p><strong>hbase-site.xml</strong></p></td>
          <td class="cellrowborder" rowspan="3" valign="top" width="74.97%" headers="mcps1.3.3.2.3.2.2.2.3.1.2 "><p>Upload the <span class="filepath"><b>hbase-site.xml</b></span>, <span class="filepath"><b>hdfs-site.xml</b></span>, and <span class="filepath"><b>core-site.xml</b></span> files obtained in <a href="#hbase_00012__en-us_topic_0000001249935107_section10758914153313">Prerequisites</a> to the <span>product</span>.</p> <p>The files are used to configure HBase cluster information, such as the cluster address and port number.</p>
           <div class="note">
            <span class="notetitle"> NOTE: </span>
            <div class="notebody">
             <ul>
              <li>The big data cluster supports only IPv4 addresses. IPv6 addresses are not supported. Check whether configurations in the configuration files are correct.</li>
              <li>The configuration files uploaded to the <span>product</span> must be the same as that in the big data cluster. Do not modify the configuration file locally.</li>
             </ul>
            </div>
           </div></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p><strong>hdfs-site.xml</strong></p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p><strong>core-site.xml</strong></p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="25.03%" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p><span><strong>Authentication Mode</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="74.97%" headers="mcps1.3.3.2.3.2.2.2.3.1.2 "><p>Configure the authentication mode for communication between the HBase cluster and the <span>product</span>. Set this parameter based on the authentication mode enabled for the HBase cluster.</p>
           <ul>
            <li><span><strong>Simple Authentication</strong></span>: Select this authentication mode when Kerberos authentication is disabled for the HBase cluster. In this authentication mode, user names are used for authentication, which is less secure.</li>
            <li><span><strong>Kerberos Authentication</strong></span>: Select this authentication mode when Kerberos authentication is enabled for the HBase cluster. The Kerberos protocol is used for identity authentication between the HBase cluster and the <span>product</span>.</li>
           </ul>
           <div class="note">
            <span class="notetitle"> NOTE: </span>
            <div class="notebody">
             <p>In the Transwarp big data (TDH) scenario, only keytab file authentication in Kerberos authentication is supported.</p>
            </div>
           </div></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="25.03%" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p><span><strong>Username</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="74.97%" headers="mcps1.3.3.2.3.2.2.2.3.1.2 "><p>This parameter is mandatory only when <span class="uicontrol"><b><span><strong>Authentication Mode</strong></span></b></span> is set to <span class="uicontrol"><b><span><strong>Simple Authentication</strong></span></b></span>.</p> <p>The entered user must have the read and write permissions on the protected resource.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="25.03%" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p><span><strong>Kerberos</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="74.97%" headers="mcps1.3.3.2.3.2.2.2.3.1.2 "><p>This parameter is mandatory only when <span class="uicontrol"><b><span><strong>Authentication Mode</strong></span></b></span> is set to <span class="uicontrol"><b><span><strong>Kerberos Authentication</strong></span></b></span>.</p> <p>Select the created Kerberos authentication. When you register an HBase cluster for the first time, click <span class="uicontrol"><b><span><strong>Create</strong></span></b></span> and configure Kerberos authentication parameters. For details about the parameters, see <a href="#hbase_00012__en-us_topic_0000001249935107_table93413354118">Table 2</a>.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="25.03%" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p><span><strong>Agent Host</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="74.97%" headers="mcps1.3.3.2.3.2.2.2.3.1.2 "><p>Select the agent host for data protection.</p>
           <div class="note">
            <span class="notetitle"> NOTE: </span>
            <div class="notebody">
             <p>Do not allocate the same agent host to multiple big data clusters with different Kerberos authentication configurations or authentication modes. Otherwise, the backup or restoration job fails.</p>
            </div>
           </div></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="25.03%" headers="mcps1.3.3.2.3.2.2.2.3.1.1 "><p>Split Table Backup</p></td>
          <td class="cellrowborder" valign="top" width="74.97%" headers="mcps1.3.3.2.3.2.2.2.3.1.2 "><p>This function is available for 1.6.0 and later versions. After this function is enabled, the HBase tables that are generated by restoration to a new location in the original cluster using copies are backed up during HBase database backup, but these tables are not restored during cross-cluster restoration.</p></td>
         </tr>
        </tbody>
       </table>
      </div> <p>Set Kerberos authentication parameters. For details about related parameters, see <a href="#hbase_00012__en-us_topic_0000001249935107_table93413354118">Table 2</a>.</p>
      <div class="tablenoborder">
       <a name="hbase_00012__en-us_topic_0000001249935107_table93413354118"></a><a name="en-us_topic_0000001249935107_table93413354118"></a>
       <table cellpadding="4" cellspacing="0" summary="" id="hbase_00012__en-us_topic_0000001249935107_table93413354118" frame="border" border="1" rules="all">
        <caption>
         <b>Table 2 </b>Kerberos authentication parameters
        </caption>
        <colgroup>
         <col style="width:23.24%">
         <col style="width:76.75999999999999%">
        </colgroup>
        <thead align="left">
         <tr>
          <th align="left" class="cellrowborder" valign="top" width="23.24%" id="mcps1.3.3.2.3.2.4.2.3.1.1"><p>Parameter</p></th>
          <th align="left" class="cellrowborder" valign="top" width="76.75999999999999%" id="mcps1.3.3.2.3.2.4.2.3.1.2"><p>Description</p></th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.3.2.3.2.4.2.3.1.1 "><p><span><strong>Name</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.3.2.3.2.4.2.3.1.2 "><p>User-defined Kerberos authentication name.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.3.2.3.2.4.2.3.1.1 "><p><span><strong>Principal Name</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.3.2.3.2.4.2.3.1.2 "><p>Principal name of Kerberos authentication.</p>
           <div class="note">
            <span class="notetitle"> NOTE: </span>
            <div class="notebody">
             <p>Set this parameter to the principal name configured on the Kerberos server, and the user must have read and write permissions on the resources to be accessed.</p>
            </div>
           </div></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.3.2.3.2.4.2.3.1.1 "><p><span><strong>Configuration Mode</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.3.2.3.2.4.2.3.1.2 ">
           <div class="p">
            Kerberos authentication mode, which must be the same as that configured on the Kerberos server. The following authentication modes are available:
            <ul>
             <li><span><strong>Password</strong></span>: Use the principal name and password for identity authentication.</li>
             <li><span><strong>Keytab File</strong></span>: Use the principal name and keytab file for identity authentication.
              <div class="note">
               <span class="notetitle"> NOTE: </span>
               <div class="notebody">
                <p>If the big data platform is MRS, Hive cluster registration may fail when password authentication is used due to problems of some MRS versions. Therefore, the keytab file authentication mode is recommended.</p>
               </div>
              </div></li>
            </ul>
           </div></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.3.2.3.2.4.2.3.1.1 "><p><span><strong>Config File</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.3.2.3.2.4.2.3.1.2 "><p><span class="filepath"><b>.conf</b></span> configuration file (for example, <strong>krb5.conf</strong>) used during Kerberos authentication. Contact the Kerberos server administrator to obtain the file from the Kerberos server and click <span><img src="en-us_image_0000001839187981.png"></span> to upload it to the <span>product</span>.</p>
           <div class="p">
            Due to problems in Kerberos, if <span class="uicontrol"><b>renew_lifetime</b></span> exists in the configuration file, comment it out. Otherwise, the registration may fail. Example:
            <pre class="screen">#renew_lifetime = 7d</pre>
           </div></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.3.2.3.2.4.2.3.1.1 "><p><span><strong>Password</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.3.2.3.2.4.2.3.1.2 "><p>This parameter is mandatory only when <span class="uicontrol"><b><span><strong>Configuration Mode</strong></span></b></span> is set to <span class="uicontrol"><b><span><strong>Password</strong></span></b></span>.</p> <p>Set this parameter to the password of <span class="uicontrol"><b><span><strong>Principal Name</strong></span></b></span>.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.3.2.3.2.4.2.3.1.1 "><p><span><strong>Confirm Password</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.3.2.3.2.4.2.3.1.2 "><p>Confirm the password of <span class="uicontrol"><b><span><strong>Principal Name</strong></span></b></span>.</p></td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.3.2.3.2.4.2.3.1.1 "><p><span><strong>Keytab File</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.3.2.3.2.4.2.3.1.2 "><p>This parameter is mandatory only when <span class="uicontrol"><b><span><strong>Configuration Mode</strong></span></b></span> is set to <span class="uicontrol"><b><span><strong>Keytab File</strong></span></b></span>. <span class="filepath"><b>.keytab</b></span> configuration file (for example, <strong>krb5.keytab</strong>) used during Kerberos authentication.</p> <p>Contact the Kerberos server administrator to obtain the file from the Kerberos server and click <span><img src="en-us_image_0000001792548620.png"></span> to upload it to the <span>product</span>.</p></td>
         </tr>
        </tbody>
       </table>
      </div> <p></p></li>
     <li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span></li>
    </ol>
   </div>
   <p></p>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="hbase_00011.html">Backing Up HBase Backup Sets</a>
    </div>
   </div>
  </div>
 </body>
</html>