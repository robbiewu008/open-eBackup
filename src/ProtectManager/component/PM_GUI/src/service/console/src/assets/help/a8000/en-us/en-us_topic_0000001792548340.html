
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Performing Periodic Backup">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001839267625.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20240608">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001792548340">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Performing Periodic Backup</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000001792548340"></a><a name="EN-US_TOPIC_0000001792548340"></a>

<h1 class="topictitle1">Performing Periodic Backup</h1>
<div><p>After resources to be protected are associated with an SLA, the system protects the resources based on the SLA. </p>
<div class="section"><h4 class="sectiontitle">Precautions</h4><p>If the number of backup files in a single directory exceeds 100,000, set <strong>FORCE_DISABLE_ACL</strong> to <strong>1</strong> in the <strong>/opt/DataBackup/ProtectClient/Plugins/FilePlugin/conf/hcpconf.ini</strong> configuration file.</p>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001839142377_uicontrol1535113494115"><b><span id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001839142377_text735434144116"><strong>Protection</strong></span> &gt; File Systems &gt; Filesets</b></span>.</span><p><div class="note" id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001839142377_note12707194325517"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001839142377_p370854395513">For 1.5.0, choose <span class="uicontrol" id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001839142377_uicontrol117931445568"><b><span id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001839142377_text197938425615"><strong>Protection</strong></span> &gt; Bare Metal &gt; Filesets</b></span>.</p>
</div></div>
</p></li><li><span>Choose the fileset to be protected and click <span class="uicontrol"><b><span><strong>Protect</strong></span></b></span>.</span><p><p>You can choose multiple filesets for batch protection.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only filesets with the same OS type can be protected in batches.</p>
</div></div>
</p></li><li><span>Select an SLA. </span><p><p id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001607841256_p33248794210">You can also click <span class="uicontrol" id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001607841256_uicontrol197631711131711"><b><span id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001607841256_text16757131110174"><strong>Create</strong></span></b></span> to create an SLA.</p>
</p></li><li id="EN-US_TOPIC_0000001792548340__li164660725814"><a name="EN-US_TOPIC_0000001792548340__li164660725814"></a><a name="li164660725814"></a><span>Configure fileset protection advanced parameters.</span><p><div class="p"><a href="#EN-US_TOPIC_0000001792548340__table354613271506">Table 1</a> describes the related parameters.
<div class="tablenoborder"><a name="EN-US_TOPIC_0000001792548340__table354613271506"></a><a name="table354613271506"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001792548340__table354613271506" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Fileset protection advanced parameters</caption><colgroup><col style="width:22.11%"><col style="width:77.89%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="22.11%" id="mcps1.3.3.2.4.2.1.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="77.89%" id="mcps1.3.3.2.4.2.1.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Channels</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p>The more the channels, the better the backup performance. However, more memory of the production host will be occupied. Each channel occupies about 200 MB memory. The value of this parameter ranges from 1 to 40.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Consistent Backup</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p>After this function is enabled, consistent backup is performed on filesets to ensure data consistency.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>Consistent backup supports only LVM volumes. You can create a snapshot for the LVM volume to which the path selected for the backup fileset belongs and back up data based on the snapshot volume to achieve consistent backup.</li><li>When creating a snapshot for an LVM volume, ensure that the remaining space of the volume group to which the LVM volume belongs is greater than 5% of the space of the LVM volume where the backup is performed. Otherwise, the snapshot fails to be created and a non-consistent backup job will be performed.</li><li>In the Linux OS, the snapshot volume created during the backup job is mounted to a subdirectory in <strong id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001506038733_b165611741223">/opt/lvm-snapshots/</strong>. After the backup job is complete, the snapshot volume is deleted and the <strong id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001506038733_b35611741523">/opt/lvm-snapshots</strong> directory is retained.</li><li>In the AIX OS, the snapshot volume created during the backup job is mounted to a subdirectory in <strong id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001506038733_b46764217312">/opt/jfs_snapshots/</strong>. After the backup job is complete, the snapshot volume is deleted and the <strong id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001506038733_b16771821633">/opt/jfs_snapshots</strong> directory is retained.</li><li>The snapshot volume created in the backup job in Windows is mounted to a subdirectory in <strong id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001506038733_b3886554933">C:\vss_snapshots\</strong>. After the backup job is complete, the snapshot volume is deleted, and the <strong id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001506038733_b1888685415315">C:\vss_snapshots</strong> directory is retained.</li><li>After consistent backup is enabled in the Solaris OS, the backup job will fail if the path length of a file or directory to be backed up exceeds 972 characters due to the ZFS snapshot mechanism.</li><li>If consistency backup is not enabled and you want to ignore related errors, set <strong>BACKUP_READ_FAILED_DISCARD</strong> to <strong>1</strong> in the <strong>/opt/DataBackup/ProtectClient/Plugins/FilePlugin/conf/hcpconf.ini</strong> configuration file.</li></ul>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Cross-File-System Backup</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p>After this function is enabled, if multiple file systems exist in the same directory, the data of all the file systems is backed up. Otherwise, only the data of the same file system is backed up.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Backup NFS</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p>This parameter is displayed only when the host runs a non-Windows OS. After this function is enabled, all NFS share file system data mounted to the fileset directory is backed up. The performance may be affected if the file system data volume is large.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Backup SMB</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p>This parameter is displayed only when the host runs Windows. After this function is enabled, all CIFS share file system data mounted to the fileset directory is backed up. The performance may be affected if the file system data volume is large.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Continuous Protection After File/Directory Backup Failure</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p>After this function is enabled, if a file or directory in the fileset fails to be backed up, the backup job continues. Otherwise, the backup job ends.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Sparse File Detection</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p>After this function is enabled, sparse files are compressed before being backed up to improve backup efficiency.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Small File Aggregation</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p>After this function is enabled, small files in directories at the same layer are aggregated into large files to improve backup efficiency.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.11%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.1 "><p><span><strong>Execution Script</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="77.89%" headers="mcps1.3.3.2.4.2.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000001792548340__p3388183210404">You can execute a user-defined script before backup, upon backup success, or upon backup failure based on your need.</p>
<p id="EN-US_TOPIC_0000001792548340__p16797181010379">In a non–Windows OS, place the execution script in the <strong id="EN-US_TOPIC_0000001792548340__b130735074919">DataBackup/ProtectClient/ProtectClient-E/sbin/thirdparty</strong> directory, for example, the relative path of <strong id="EN-US_TOPIC_0000001792548340__b13658416502">/opt/DataBackup/ProtectClient/ProtectClient-E/sbin/thirdparty/</strong>.</p>
<p>You can also place the script in any directory and enter the absolute path of executing the script.</p>
<p id="EN-US_TOPIC_0000001792548340__p2114155633414">The script type supported in a non–Windows OS is <span class="uicontrol" id="EN-US_TOPIC_0000001792548340__uicontrol5132142794213"><b>.sh</b></span>.</p>
<p id="EN-US_TOPIC_0000001792548340__p1436018422406">In Windows, place the execution script in the <strong id="EN-US_TOPIC_0000001792548340__b857610254380">DataBackup\ProtectClient\ProtectClient-E\bin\thirdparty</strong> directory, for example, the relative path of <strong id="EN-US_TOPIC_0000001792548340__b5577102593817">C:\DataBackup\ProtectClient\ProtectClient-E\bin\thirdparty\</strong>.</p>
<p id="EN-US_TOPIC_0000001792548340__p10529131392517">The script type supported in Windows is <span class="uicontrol" id="EN-US_TOPIC_0000001792548340__uicontrol473615424258"><b>.bat</b></span>.</p>
<div class="p" id="EN-US_TOPIC_0000001792548340__p175351445143016">You can also place the script in any directory and enter the absolute path of executing the script.<div class="note" id="EN-US_TOPIC_0000001792548340__note64007332505"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001792402656_en-us_topic_0000001264099602_p196461512103113">If <span class="uicontrol" id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001792402656_en-us_topic_0000001264099602_uicontrol180112781919"><b><span id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001792402656_en-us_topic_0000001264099602_text10711756153116"><strong>Script to Run upon Restoration Success</strong></span></b></span> is configured, the status of the restoration job is displayed as <span class="uicontrol" id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001792402656_en-us_topic_0000001264099602_uicontrol488919204209"><b><span id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001792402656_en-us_topic_0000001264099602_text186291135132417"><strong>Succeeded</strong></span></b></span> on the <span id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001792402656_text712055613536">OceanProtect</span> even if the script fails to be executed. Check whether the job details contain a message indicating that the post-processing script fails to be executed. If yes, modify the script in a timely manner. </p>
</div></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</p></li><li><span>Click <span class="uicontrol" id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001607841256_uicontrol196538515235"><b>OK</b></span>. </span><p><p id="EN-US_TOPIC_0000001792548340__en-us_topic_0000001607841256_p25041111535">If the current system time is later than the first backup start time of the SLA, you can select to perform backup immediately after the backup SLA is associated or wait for the next scheduling based on the backup policy set in the SLA.</p>
</p></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000001839267625.html">Step 6: Performing Backup</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>