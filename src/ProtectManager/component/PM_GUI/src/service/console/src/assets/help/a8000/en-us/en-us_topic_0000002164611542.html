<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Step 7: Performing Backup">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000002164771258.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="">
<meta name="DC.Publisher" content="20250306">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000002164611542">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Step 7: Performing Backup</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000002164611542"></a><a name="EN-US_TOPIC_0000002164611542"></a>

<h1 class="topictitle1">Step 7: Performing Backup</h1>
<div><p>Before performing backup, you need to associate the resources to be protected with a specified SLA. The system protects the resources and periodically executes backup jobs based on the SLA. You can perform a backup job immediately through manual backup.</p>
<div class="section"><h4 class="sectiontitle">Precautions</h4><ul><li>Ensure that the production storage has reserved snapshot space for backup. Reserved snapshot space = Data volume of the source LUN x Percentage of data changes in the backup period. By default, you are advised to reserve 20% of the source LUN capacity for creating snapshots.</li><li>A cloud server can be backed up only when it is in any of the following states: <strong>Running</strong>, <strong>Starting</strong>, <strong>Stopping</strong>, <strong>Stopped</strong>, <strong>Reinstalling OS</strong>, <strong>Reinstalling OS failed</strong>, <strong>Changing OS</strong>, and <strong>OS Change failed</strong>.</li><li>The default number of concurrent backup jobs on each client is 20. You are advised not to change the number. Otherwise, disk scanning may fail, causing backup failures.</li><li>If cloud servers or EVS disks on Huawei scale-out block storage are migrated to SAN storage, you must register SAN storage resources with the <span>OceanProtect</span> before backing up cloud servers or EVS disks. For details about the registration, see <a href="en-us_topic_0000002200097917.html#EN-US_TOPIC_0000002200097917__li89549137399">3</a> in <a href="en-us_topic_0000002200097917.html">Step 2: Registering Huawei Cloud Stack</a>.</li><li>Before the first backup, complete resource scanning so that the latest cloud server information can be displayed. For details, see "Managing Clients" in the <i><cite>OceanProtect DataBackup 1.5.0-1.6.0 Client Installation Guide</cite></i>.</li><li>For 1.6.0 and later versions: If a snapshot fails to be deleted due to a backup job exception, the system automatically deletes unnecessary snapshots when the next full backup job is performed.</li><li>During manual backup, parameters (except <span class="uicontrol"><b><span><strong>Automatic Retry</strong></span></b></span>) defined in the SLA are applied to the manual backup job.</li><li>Copies generated by manual backup are retained for the duration defined in the SLA.<p>If the protection policy selected during manual backup is not defined in the SLA, the generated backup copy will be retained permanently. If full backup is not defined in the SLA but selected during manual backup, the copies generated by the manual full backup are retained permanently.</p>
</li><li>If a replication or archive policy has been defined in the SLA, the system will perform replication or archiving once based on the SLA when you perform manual backup.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002199964685_uicontrol23517341412"><b>Protection &gt; Cloud Platforms &gt; Huawei Cloud Stack</b></span>.</span></li><li><span>In the navigation tree on the left, select the registered Huawei Cloud Stack environment.</span></li><li><span>Select the ECSs to be protected on the <strong>Project/Resource Set</strong> or <strong>Cloud Server</strong> tab and click <span class="uicontrol"><b><span><strong>Protect</strong></span></b></span>.</span><p><ul><li>If you select a project/resource set on the <strong>Project/Resource Set</strong> tab page, the system will protect all ECSs in the project/resource set.</li><li>If you select a cloud server on the <strong>Cloud Server</strong> tab page, the system will protect the cloud server.</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If the project/resource set/ECS to be protected is not displayed, choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>Resource Scan</strong></span></b></span> in the left pane to update resource information.</li></ul>
</div></div>
</p></li><li><span>Determine whether to enable automatic EVS disk protection if you select <span><strong>Cloud Server</strong></span> for protection. Otherwise, skip this step.</span><p><p><span><strong>Automatic EVS Disk Protection</strong></span> is enabled by default. The system protects all EVS disks (including newly detected ones) whose <strong>Storage Type</strong> is <strong>FusionStorage</strong>, <strong>OceanStor Dorado</strong>, or <strong>OceanStor</strong> on the cloud server.</p>
<p>You can disable <span><strong>Automatic EVS Disk Protection</strong></span> and click <span><strong>Please select</strong></span> to manually select some EVS disks for backup.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>After some EVS disks are selected for backup, the generated copies support only EVS disk-level restoration but not cloud server-level restoration.</li><li>If system disks are excluded, generated copies do not support file-level restoration.</li></ul>
</div></div>
</p></li><li><span>Select an SLA.</span><p><div class="p" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_p16181740836">You can also click <span class="uicontrol" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_uicontrol169554520714"><b><span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_text179554516717"><strong>Create</strong></span></b></span> to create an SLA.<div class="note" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_note25947145710"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_p125947145711"><span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_ph1413818422327">If a WORM policy has been configured for the resources to be protected, select an SLA without a WORM policy to avoid WORM policy conflicts.</span></p>
</div></div>
</div>
</p></li><li><span>Set parameters in <span class="uicontrol"><b><span><strong>Advanced</strong></span></b></span> by referring to <a href="#EN-US_TOPIC_0000002164611542__table8104151484520">Table 1</a>.</span><p>
<div class="tablenoborder"><a name="EN-US_TOPIC_0000002164611542__table8104151484520"></a><a name="table8104151484520"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002164611542__table8104151484520" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Advanced parameters</caption><colgroup><col style="width:20.48%"><col style="width:79.52%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="20.48%" id="mcps1.3.3.2.6.2.1.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="79.52%" id="mcps1.3.3.2.6.2.1.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="20.48%" headers="mcps1.3.3.2.6.2.1.2.3.1.1 "><p><strong>Clients</strong></p>
</td>
<td class="cellrowborder" valign="top" width="79.52%" headers="mcps1.3.3.2.6.2.1.2.3.1.2 "><ul><li>For OceanProtect X series backup appliances or the OceanProtect E6000 Appliance, select the built-in or an external client for performing backup jobs. If you do not select a client, the system randomly selects one to execute backup jobs.</li><li>For OceanProtect E1000, select an external client for performing backup jobs.</li></ul>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>For a version earlier than 1.5.0.SPC9: If an external client is selected and the protection permission of the tenant's resources has been authorized to a specified data protection administrator, choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>Authorize Resource</strong></span></b></span> in the row where the external client resides on the <span class="uicontrol"><b><span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000001666345505_text22651956143811"><strong>Protection</strong></span> &gt; Clients</b></span> page to authorize the external client to the data protection administrator to whom the tenant's resources have been authorized. Otherwise, the backup will fail.</li><li>For 1.6.0 and later versions: Choose <strong>System</strong> &gt; <strong>Security</strong> &gt; <strong>RBAC</strong> and add an external client to the resource set associated with the authorized user. For details, see "Modifying a Resource Set" in the <i><cite>OceanProtect DataBackup 1.5.0-1.6.0 Administrator Guide</cite></i>.</li><li>For other versions, if an external client is selected and the protection permission of the tenant's resources has been authorized to a specified data protection administrator, check whether sharing is enabled in the row where the external client resides on the <span class="uicontrol"><b><span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000001666345505_text22651956143811_1"><strong>Protection</strong></span> &gt; Clients</b></span> page.<ul><li>If sharing is enabled, no further action is required.</li><li>If sharing is disabled, choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; <span><strong>Authorize Resource</strong></span></b></span> to authorize the external client to the data protection administrator to whom the tenant's resources have been authorized. Otherwise, the backup will fail.</li></ul>
</li></ul>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="20.48%" headers="mcps1.3.3.2.6.2.1.2.3.1.1 "><div class="p"><strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002164654310_b1822015259583">Auto Indexing of Backup Copies</strong><div class="note" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002164654310_note17447255201"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002164654310_en-us_topic_0000002164654310_p168431642184919">Only 1.6.0 and later versions support this parameter.</p>
</div></div>
</div>
</td>
<td class="cellrowborder" valign="top" width="79.52%" headers="mcps1.3.3.2.6.2.1.2.3.1.2 "><div class="p">If <span><strong>Cloud Server</strong></span> is selected for protection and the disks to be backed up contain the system disk, the system automatically creates an index for the backup copy after this function is enabled. When using the copy for restoration, you can select one or more files in the copy for restoration and search for files, directories, or links in the copy.<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002164654310_en-us_topic_0000001792520410_p0743109201911">Indexes occupy backup storage space. If the number of index files in the system exceeds 1 billion, perform operations by referring to "Failed to Create a Copy Index" in the <i><cite id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002164654310_en-us_topic_0000001792520410_cite23814569190">OceanProtect DataBackup 1.5.0-1.6.0 Troubleshooting</cite></i>.</p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="20.48%" headers="mcps1.3.3.2.6.2.1.2.3.1.1 "><p><span><strong>SLA Overwrite Policy</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="79.52%" headers="mcps1.3.3.2.6.2.1.2.3.1.2 "><p>If you select a project/resource set for protection, you can choose whether to overwrite existing SLAs of ECSs with the SLA of the project/resource set.</p>
<ul><li><strong>Overwrite existing SLAs of the cloud server</strong><ul><li>For 1.5.0, when protection is created or modified, the system automatically overwrites the SLAs associated with the cloud servers with the SLA of the project/resource set.</li><li>For 1.6.0 and later versions: After the project/resource set is scanned, the system automatically overwrites the SLAs of the cloud servers with the SLA of the project/resource set.</li></ul>
</li><li><strong>Retain existing SLAs of the cloud server</strong></li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="20.48%" headers="mcps1.3.3.2.6.2.1.2.3.1.1 "><p><span><strong>SLA Application Policy</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="79.52%" headers="mcps1.3.3.2.6.2.1.2.3.1.2 "><div class="p">If you select a project/resource set for protection, you can choose the application scope of the SLA policy as follows:<ul><li>Apply the project/resource set SLA to all cloud servers that are not associated with any SLA.<ul><li>For 1.5.0, when protection is created or modified, the system automatically applies the project/resource set SLA to all cloud servers that are not associated with any SLA.</li><li>For 1.6.0: After the project/resource set is scanned, the system automatically associates the cloud servers that are not associated with any SLA with the same SLA as that of the project/resource set.</li></ul>
</li><li>Apply the project/resource set SLA policy to newly created ECSs.<p>After the project/resource set is scanned, the system automatically associates the newly detected cloud servers with the same SLA as that of the project/resource set.</p>
</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="20.48%" headers="mcps1.3.3.2.6.2.1.2.3.1.1 "><p><strong>Cloud Server Filtering</strong></p>
</td>
<td class="cellrowborder" valign="top" width="79.52%" headers="mcps1.3.3.2.6.2.1.2.3.1.2 "><div class="p">If you want to specify the ECSs to be excluded or included in the protection plan when selecting a project/resource set for protection, enable this function and perform the following operations:<ol type="a"><li>Select a filtering mode.</li><li>Enter an ECS name or keyword in the text box to filter ECSs based on the selected filtering mode.<ul><li>Use commas (,) to separate multiple names or keywords.</li><li>Exact match and fuzzy match of ECS names are supported. Fuzzy match rules include prefix match (for example, abc*), suffix match (for example, *abc), and middle match (for example, *abc*).</li></ul>
</li></ol>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="20.48%" headers="mcps1.3.3.2.6.2.1.2.3.1.1 "><div class="p">Secure Archiving<div class="note" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_note2052965314120"><span class="notetitle"> NOTE: </span><div class="notebody"><ul id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_en-us_topic_0000002164660718_ul15432342582"><li id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_en-us_topic_0000002164660718_li94333410589"><span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_en-us_topic_0000002164660718_ph03981201700">This function is available only in 1.6.0 and later versions.</span></li><li id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_en-us_topic_0000002164660718_li4285123675814"><span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_en-us_topic_0000002164660718_ph10967204817175">Only the OceanProtect X series backup appliances and OceanProtect E1000 support this function.</span></li></ul>
</div></div>
</div>
</td>
<td class="cellrowborder" valign="top" width="79.52%" headers="mcps1.3.3.2.6.2.1.2.3.1.2 "><div class="p">This parameter is displayed when the selected SLA contains archive policies. If this option is selected, only backup copies that are detected to be uninfected during ransomware detection are archived.<div class="note" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_note1550211211513"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_p10502162125111">You need to click <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_b810018188319">Configure</strong> to set the ransomware protection policy for the resource to be protected if the following conditions are met: <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_b17329127414">Archive Time</strong> is not set to <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_b938619243">Immediately after successful backup</strong> or <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_b84761821247">Archive Policy</strong> is not set to <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_b0492172712416">Only the latest copy</strong> in the SLA archive policy, and the ransomware protection policy is not set. For details, see "Creating a Ransomware Protection and WORM Policy" in the <i><cite id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200007033_cite15733201398">OceanProtect DataBackup 1.5.0-1.6.0 Data Backup Feature Guide (Ransomware Protection for Copies)</cite></i>.</p>
</div></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Click <span class="uicontrol" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_uicontrol23691650677"><b>OK</b></span>.</span><p><p id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_en-us_topic_0000001656691397_p25041111535">If the current system time is later than the start time of the first backup specified in the SLA, you can select <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_b9624185216713">Execute manual backup now</strong> in the dialog box that is displayed or choose to perform automatic backup periodically based on the backup policy set in the SLA.</p>
</p></li><li><strong>Optional: </strong><span>Perform manual backup.</span><p><div class="p" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_p11899115114511">If you want to execute a backup job immediately, perform manual backup through the following operations. Otherwise, skip this step.<ol type="a" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_ol1888313571212"><li id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_li6449836144510">In the row of the target resource, choose <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_b146814226353">More</strong> &gt; <span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_text18439122416533"><strong>Manual Backup</strong></span>.<div class="note" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_note1527151103"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_en-us_topic_0000001607531736_p870125314544">You can select multiple resources to perform manual backup in batches. Select multiple protected resources and choose <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_b1657653183519">More</strong> &gt; <span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_text122852865419"><strong>Manual Backup</strong></span> in the upper left corner of the resource list.</p>
</div></div>
</li><li id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_li5644125184512">Set the name of the copy generated during manual backup.<p id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_p444210492470"><a name="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_li5644125184512"></a><a name="en-us_topic_0000002200146973_li5644125184512"></a>If this parameter is left unspecified, the system sets the copy name to <strong id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_b17709174711816">backup_</strong><em id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_i1371044717814">Timestamp</em> by default.</p>
</li><li id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_li9911344144518">Select a protection policy, which can be <span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_text1037414518818"><strong>Full Backup</strong></span> or <span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_text937414517813"><strong>Forever Incremental (Synthetic Full) Backup</strong></span>.<div class="note" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_note1552298154910"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_p13522118194919"><span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_ph19374310343">If the selected protection policy is different from that configured in the associated SLA for 1.6.0 and later versions, the WORM configuration does not take effect.</span></p>
</div></div>
</li><li id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_li2637101024612">Click <span class="uicontrol" id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_uicontrol1662615410817"><b><span id="EN-US_TOPIC_0000002164611542__en-us_topic_0000002200146973_text13625854687"><strong>OK</strong></span></b></span>.</li></ol>
</div>
</p></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000002164771258.html">Backing Up an EVS Disk</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>