<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Installing ProtectAgent (Automatic Push Mode, Applicable to 1.6.0 and Later Versions)">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="helpcenter000008.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
  <meta name="DC.Publisher" content="20241029">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="protectagent_install_0017">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Installing ProtectAgent (Automatic Push Mode, Applicable to 1.6.0 and Later Versions)</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="protectagent_install_0017"></a><a name="protectagent_install_0017"></a>
  <h1 class="topictitle1">Installing ProtectAgent (Automatic Push Mode, Applicable to 1.6.0 and Later Versions)</h1>
  <div>
   <p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p77861727131820">You need to install the ProtectAgent software on agent hosts. ProtectAgent functions as the agent between the <span id="protectagent_install_0017__en-us_topic_0000001839189313_text5223175701015">product</span> and protected resources to back up and restore data. This section describes how to install ProtectAgent for a host by allowing the system to automatically push the installation package to the agent host.</p>
   <div class="section" id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_section2069111174299">
    <h4 class="sectiontitle">Prerequisites</h4>
    <ul id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_ul0615175624119">
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_li782110715584">ProtectAgent has not been installed on the agent host.</li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_li189021444161813">You have obtained the IP addresses of the agent host where ProtectAgent is to be installed. The IP addresses must be able to communicate with the backup network of the <span id="protectagent_install_0017__en-us_topic_0000001839189313_text17183577108">product</span>.</li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_li1561615565417">You have obtained the username and password for logging in to the agent host.</li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_li1195035115362">During deployment of the <span id="protectagent_install_0017__en-us_topic_0000001839189313_text186959520137">product</span>, a preset ProtectAgent software package has been uploaded to the system. If the version of the preset ProtectAgent software package does not meet your requirements, upload a ProtectAgent software package of another version by referring to <a href="en-us_topic_0000001839189393.html">Uploading the ProtectAgent Software Package</a> before installing ProtectAgent.</li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_li448413124302">When the agent host runs the Linux or Unix OS, if the value of <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol03096514327"><b>ListenAddress</b></span> in the <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol07811648173219"><b>/etc/ssh/sshd_config</b></span> configuration file is modified, ensure that the value contains the backup network IP address of the agent host. Otherwise, connectivity check fails and installation cannot be pushed. That is, the value of <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol64171351193312"><b>ListenAddress</b></span> can be either the default value or the user-defined IP address plus the backup network IP address of the agent host.</li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_li96507810360">If the agent host runs Linux OS and you have set aliases for such commands as <strong id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001607864814_b413924012316">rm</strong>, <strong id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001607864814_b181391340103112">cp</strong>, <strong id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001607864814_b14139640193119">mv</strong> that need to be input in interactive mode on the agent host (for example, the alias is <strong id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001607864814_b12139164043120">mv=mv -i</strong>, and the <strong id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001607864814_b613919404318">mv</strong> command is executed with <strong id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001607864814_b16139940133114">-i</strong> by default), cancel the alias setting first. Otherwise, the installation will fail.</li>
    </ul>
   </div>
   <div class="section" id="protectagent_install_0017__en-us_topic_0000001839189313_section4249452185218">
    <h4 class="sectiontitle">Precautions</h4>
    <p id="protectagent_install_0017__en-us_topic_0000001839189313_p9844135515524">If the protected resource is GaussDB (DWS) and the firewall is not required, run the <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b380613802412">systemctl stop SuSEfirewall2.service</strong> command to disable the firewall.</p>
   </div>
   <div class="section" id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_section12661410181917">
    <h4 class="sectiontitle">Procedure</h4>
    <ol id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_ol9585112410296">
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_li1712455318224"><span>Check whether the protected resource is an HDFS, HBase, Hive, Elasticsearch, Redis, or ClickHouse cluster and whether Kerberos authentication is configured in the cluster.</span><p></p>
      <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul0257172810237">
       <li id="protectagent_install_0017__en-us_topic_0000001839189313_li425762810230">If yes, ensure that the time on the agent host, <span id="protectagent_install_0017__en-us_topic_0000001839189313_text17431185819103">product</span>, and Kerberos server is consistent before the installation. If the time is inconsistent, use the same NTP server. Otherwise, the ProtectAgent installation may fail.</li>
       <li id="protectagent_install_0017__en-us_topic_0000001839189313_li1669317304237">If no, ensure that the time on the agent host is consistent with that on the <span id="protectagent_install_0017__en-us_topic_0000001839189313_text49838681316">product</span> before the installation.</li>
      </ul> <p></p></li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_en-us_topic_0000001084775528_li10690245104713"><span>Choose <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001839142377_uicontrol08941439165212"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001839142377_text22651956143811"><strong>Protection</strong></span> &gt; Clients &gt; Clients</b></span>.</span></li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_li3950414193212"><span>Click <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol489014435508"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text1991865104212"><strong>Register</strong></span></b></span> and set related parameters.</span><p></p><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p1881534716321"><a href="#protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_table1955419315338">Table 1</a> describes the parameters.</p>
      <div class="tablenoborder">
       <a name="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_table1955419315338"></a><a name="en-us_topic_0000001839189313_en-us_topic_0000001166356758_table1955419315338"></a>
       <table cellpadding="4" cellspacing="0" summary="" id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_table1955419315338" frame="border" border="1" rules="all">
        <caption>
         <b>Table 1 </b>Parameters for installing the agent
        </caption>
        <colgroup>
         <col style="width:28.18%">
         <col style="width:71.82%">
        </colgroup>
        <thead align="left">
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_row135541832331">
          <th align="left" class="cellrowborder" valign="top" width="28.18%" id="mcps1.3.4.2.3.2.2.2.3.1.1"><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p17554113133316">Parameter</p></th>
          <th align="left" class="cellrowborder" valign="top" width="71.82%" id="mcps1.3.4.2.3.2.2.2.3.1.2"><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p17555103183312">Description</p></th>
         </tr>
        </thead>
        <tbody>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_row1755517353320">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p2555538332"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text105298268258"><strong>Agent Type</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 ">
           <div class="p" id="protectagent_install_0017__en-us_topic_0000001839189313_p47306873514">
            Select an agent type based on the type of the protected resource.
            <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul51081046153514">
             <li id="protectagent_install_0017__en-us_topic_0000001839189313_li2041316610365"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text186111605711"><strong>VMware backup agent</strong></span>: Select this type when the protected resource is a VMware VM.</li>
             <li id="protectagent_install_0017__en-us_topic_0000001839189313_li10259161517365"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text10744185291919"><strong>General backup agent</strong></span>: Select this type for protected resources other than VMware.</li>
             <li id="protectagent_install_0017__en-us_topic_0000001839189313_li15157142212345"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text1856797812"><strong>SAN Client agent</strong></span>: Select this type if the protected resource is DB2 and the AIX or Solaris host uses a Fibre Channel network.</li>
            </ul>
           </div></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row13849134583410">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p0850134515340"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text15889175912513"><strong>OS</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 ">
           <div class="p" id="protectagent_install_0017__en-us_topic_0000001839189313_p68501345183411">
            OS type of the agent host.
            <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note461318372505">
             <span class="notetitle"> NOTE: </span>
             <div class="notebody">
              <div class="p" id="protectagent_install_0017__en-us_topic_0000001839189313_p18958191815135">
               When <span id="protectagent_install_0017__en-us_topic_0000001839189313_text13439326183115"><strong>OS</strong></span> is set to <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue925711443356"><b>Windows</b></span>:
               <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul740772411316">
                <li id="protectagent_install_0017__en-us_topic_0000001839189313_li1316693161618">Ensure that the <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b198211349143510">Windows Remote Management (WS-Management)</strong> service on the agent host is in the <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b38219490350">Running</strong> state. For details, see <a href="en-us_topic_0000001834577558.html">How Do I Start the Windows Remote Management (WS-Management) Service?</a>.</li>
                <li id="protectagent_install_0017__en-us_topic_0000001839189313_li1940772415134">If the OS is Windows Server 2012 or earlier, the automatic push mode is not supported. In this case, manually install ProtectAgent. For details, see <a href="en-us_topic_0000001839189353.html">Installing ProtectAgent (Manual Mode, Applicable to the Windows OS)</a>.</li>
               </ul>
              </div>
             </div>
            </div>
           </div></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row254205643818">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p4590700554"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text77645221936"><strong>Application Type</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p1591403556">If <span id="protectagent_install_0017__en-us_topic_0000001839189313_text08691855916"><strong>Agent Type</strong></span> is set to <span id="protectagent_install_0017__en-us_topic_0000001839189313_text1079605192117"><strong>General backup agent</strong></span>, select an application type that can be protected by the agent host.</p></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row1897213383112">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p7972133815113"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text183517311018"><strong>Message Signature Algorithm</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p1035245215424">If <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b1527795894920"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text335217528427"><strong>OS</strong></span></strong> is set to <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue641531312114"><b>Linux</b></span>, <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue55051715122110"><b>AIX</b></span>, or <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue14801121792120"><b>Solaris</b></span>, select a message signature algorithm.</p> <p id="protectagent_install_0017__en-us_topic_0000001839189313_p0972103810118">The message signature algorithm is used to verify connectivity between the device and data protection agent. hmac_sha2_256 is a more secure than hmac_sha1, and is selected by default.</p>
           <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note938510582423">
            <span class="notetitle"> NOTE: </span>
            <div class="notebody">
             <p id="protectagent_install_0017__en-us_topic_0000001839189313_p1138510587422">After all parameters are set, click <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol81281738172019"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text161731504567"><strong>Test</strong></span></b></span>. If the system displays a message indicating that the host does not support the specified secure cipher suite, select another message signature algorithm. If no algorithm is supported, upgrade the OpenSSH and SSL of the agent host.</p>
            </div>
           </div></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row10296211101710">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p529611113171"><strong id="protectagent_install_0017__en-us_topic_0000001839189313_b181271832245">Sharing</strong></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p1958031291818">After this function is enabled, the agent is applied to all data protection administrators.</p> <p id="protectagent_install_0017__en-us_topic_0000001839189313_p47265818181">This parameter can be configured only when <span id="protectagent_install_0017__en-us_topic_0000001839189313_text104323911418"><strong>Agent Type</strong></span> is set to <span id="protectagent_install_0017__en-us_topic_0000001839189313_text84403921417"><strong>General backup agent</strong></span>, <span id="protectagent_install_0017__en-us_topic_0000001839189313_text1244113911410"><strong>OS</strong></span> is set to <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue2441439121416"><b>Linux</b></span>, and the application type is set to HDFS, HBase, Hive, Huawei Cloud Stack, Huawei Cloud Stack GaussDB, object storage, or GaussDB (DWS).</p></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row1628305343419">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p1828318537347"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text153785142611"><strong>IP Type</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p188415523419">IP address type of the agent host. The value can be IPv4 or IPv6.</p></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row5946161118327">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p49461711203212"><strong id="protectagent_install_0017__en-us_topic_0000001839189313_b148952110299">Source Deduplication</strong></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p0946011123212">Source deduplication deletes redundant data from the source data before transmission. This reduces the amount of data to be transmitted but occupies more client resources.</p>
           <div class="p" id="protectagent_install_0017__en-us_topic_0000001839189313_p1091583016254">
            To enable this function, ensure that the free memory of the agent host is greater than 2 GB. For details about the OSs that support source deduplication, refer to <a href="https://info.support.huawei.com/storage/comp/#/oceanprotect" target="_blank" rel="noopener noreferrer">OceanProtect Compatibility Query</a>.
            <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note201921842115416">
             <span class="notetitle"> NOTE: </span>
             <div class="notebody">
              <ul id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001792390264_ul117577420321">
               <li id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001792390264_li175714133215"><span id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001792390264_ph1343712386551">If the agent host runs the Linux OS: After source deduplication is enabled, add the source deduplication user to <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b8481152854419">sudoers</strong> before the first backup. For details, see <a href="en-us_topic_0000001792390228.html#EN-US_TOPIC_0000001792390228">How Should I Add a Source Deduplication User to sudoers? (Applicable to the Linux OS)</a>.</span></li>
               <li id="protectagent_install_0017__en-us_topic_0000001839189313_li154351142012">If source deduplication is not enabled during ProtectAgent installation, you can manually install the OceanStor DataTurbo client after ProtectAgent is installed. For details, see <a href="en-us_topic_0000001936780456.html">How Do I Install the OceanStor DataTurbo Client?</a>.</li>
              </ul>
             </div>
            </div>
           </div></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_row155512323315">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p3555183143317"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text1950933211162"><strong id="protectagent_install_0017__en-us_topic_0000001839189313_b45707010216">IP Address</strong></span> <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b77538322110">(Address Segment)</strong></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p155515320337">Enter the IP address or address segment of the agent host. You can enter the backup network IP address of the agent host. For 1.5.0SPC19 and later versions, you can also enter an Elastic IP (EIP) or internal public network IP address.</p>
           <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul1225881051311">
            <li id="protectagent_install_0017__en-us_topic_0000001839189313_li8258810141315">If EIPs are mapped to Virtual Private Cloud (VPC) IP addresses, enter an EIP.</li>
            <li id="protectagent_install_0017__en-us_topic_0000001839189313_li1225811101134">If internal public IP addresses are mapped to VPC IP addresses, enter an internal public IP address.
             <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note1075615426720">
              <span class="notetitle"> NOTE: </span>
              <div class="notebody">
               <p id="protectagent_install_0017__en-us_topic_0000001839189313_p77591542474"><span id="protectagent_install_0017__en-us_topic_0000001839189313_ph135421074018">If ProtectAgent has been installed, the system is upgraded to 1.5.0SPC19 or later, and an EIP or internal public network IP address that is mapped to a VPC IP address is used, you need to <a href="en-us_topic_0000001847935170.html">uninstall ProtectAgent</a>, and then perform the operations in this section to install ProtectAgent of 1.5.0SPC19 or a later version.</span></p>
              </div>
             </div></li>
           </ul></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row13751036323">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p15758312324"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text158241138143219"><strong>Port</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 ">
           <div class="p" id="protectagent_install_0017__en-us_topic_0000001839189313_p740182612324">
            SSH port and SFTP port of the agent host.
            <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul3472954164014">
             <li id="protectagent_install_0017__en-us_topic_0000001839189313_li122001958184013">If a <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue9200195818403"><b>Windows</b></span> OS is used, use the listening port of the Windows remote management service. The default value is <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue1733418217431"><b>5985</b></span>.</li>
             <li id="protectagent_install_0017__en-us_topic_0000001839189313_li194725541406">If another OS is used, use the listening port of the SSH service. The default value is <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue161451516174318"><b>22</b></span>.
              <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note185658267378">
               <span class="notetitle"> NOTE: </span>
               <div class="notebody">
                <p id="protectagent_install_0017__en-us_topic_0000001839189313_p11566326163715">The listening port number of the SSH service must be the same as that of the SFTP service. Otherwise, the registration fails.</p>
               </div>
              </div></li>
            </ul>
           </div></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row1731017610169">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p1831086131615"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text1515613502339"><strong>User Type</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 ">
           <div class="p" id="protectagent_install_0017__en-us_topic_0000001839189313_p2311196191617">
            If <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b1935110611010"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text659710283196"><strong>OS</strong></span></strong> is set to <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue726792919213"><b>Linux</b></span> or <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue1281173122110"><b>AIX</b></span>, select the user type for the agent host.
            <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul1980114811160">
             <li id="protectagent_install_0017__en-us_topic_0000001839189313_li380848171612"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text774631511310"><strong>Administrator</strong></span>: a user who has the permission to run the <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b17713823135020">sudo</strong> commands. When registering an agent host, the administrator only needs to enter the username and password for logging in to the host.</li>
             <li id="protectagent_install_0017__en-us_topic_0000001839189313_li38761252191618"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text522318247314"><strong>Common User</strong></span>: a user who does not have the permission to run the <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b1121314665212">sudo</strong> commands. When registering an agent host, the common user needs to enter the sudo password and the username and password for logging in to the host.
              <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note3238291397">
               <span class="notetitle"> NOTE: </span>
               <div class="notebody">
                <p id="protectagent_install_0017__en-us_topic_0000001839189313_p1483584425119">If <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol123091151202016"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text16309185115205"><strong>User Type</strong></span></b></span> is set to <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol3309205118208"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text2309145122012"><strong>Common User</strong></span></b></span>, you need to add the common user to <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b147851030105315">sudoers</strong>. Otherwise, ProtectAgent registration fails. For details, see <a href="en-us_topic_0000001839189321.html">How Should I Add a Common User to sudoers?</a>.</p>
               </div>
              </div></li>
            </ul>
           </div></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row157371548105918">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p747220315311"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text498893910166"><strong>sudo Password-Free</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p8979181605316">You can determine whether to use this function when <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol8979516105319"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text15979111613535"><strong>User Type</strong></span></b></span> is set to <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol8979101655318"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text197918163531"><strong>Common User</strong></span></b></span>. <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b115872019195112">sudo Password-Free</strong> specifies whether a common user needs to enter the password of the current user when using the sudo permission.</p></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row12645946195917">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p3187195112174"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text17975268331"><strong>sudo Password</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p3997174445616">When <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol8866831191810"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text1903834639"><strong>User Type</strong></span></b></span> is set to <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol755083421811"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text182513420315"><strong>Common User</strong></span></b></span>, you need to enter the sudo password.</p></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_row655553153316">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p15555123113313"><span id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_text28701259205312"><strong>Username</strong></span></p></td>
          <td class="cellrowborder" rowspan="2" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 ">
           <div class="p" id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p4867540201516">
            Username and password of the agent host.
            <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note135295113584">
             <span class="notetitle"> NOTE: </span>
             <div class="notebody">
              <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul18812104711487">
               <li id="protectagent_install_0017__en-us_topic_0000001839189313_li1381210474480">If <span id="protectagent_install_0017__en-us_topic_0000001839189313_text1565114274511"><strong>OS</strong></span> is set to <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue89688433485"><b>Windows</b></span>, the entered username cannot contain the domain name.<p id="protectagent_install_0017__en-us_topic_0000001839189313_p752105114583">For example, if the domain account is <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b341592914477">CHINA\Administrator</strong>, enter <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b16661336104715">Administrator</strong>.</p></li>
               <li id="protectagent_install_0017__en-us_topic_0000001839189313_li620711568487">When <span id="protectagent_install_0017__en-us_topic_0000001839189313_text790622919514"><strong>OS</strong></span> is set to <span class="parmvalue" id="protectagent_install_0017__en-us_topic_0000001839189313_parmvalue885015214498"><b>AIX</b></span> and <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol4473192035117"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text1147332005114"><strong>User Type</strong></span></b></span> is set to <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol20473520185110"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text184736207514"><strong>Common User</strong></span></b></span>, ensure that the entered user has the corresponding user directory. To query the user directory, perform the following steps:
                <ol type="a" id="protectagent_install_0017__en-us_topic_0000001839189313_ol20500153012139">
                 <li id="protectagent_install_0017__en-us_topic_0000001839189313_li16972574163">Use PuTTY to log in to the agent host.</li>
                 <li id="protectagent_install_0017__en-us_topic_0000001839189313_li95008307132">Run the following command to check whether the user directory exists:<pre class="screen" id="protectagent_install_0017__en-us_topic_0000001839189313_screen1373475713128">cd /home/<em id="protectagent_install_0017__en-us_topic_0000001839189313_i15481947191214">Username</em></pre> <p id="protectagent_install_0017__en-us_topic_0000001839189313_p1230653712138">If "No such file or directory" is displayed in the command output, no corresponding user directory exists. Perform <a href="#protectagent_install_0017__en-us_topic_0000001839189313_li20571144918148">3</a> to create it. Otherwise, the corresponding user directory exists.</p></li>
                 <li id="protectagent_install_0017__en-us_topic_0000001839189313_li20571144918148"><a name="protectagent_install_0017__en-us_topic_0000001839189313_li20571144918148"></a><a name="en-us_topic_0000001839189313_li20571144918148"></a>Run the following command to create a user directory:<pre class="screen" id="protectagent_install_0017__en-us_topic_0000001839189313_screen8158284151">mkdir /home/<em id="protectagent_install_0017__en-us_topic_0000001839189313_i14632132813111">Username</em> </pre></li>
                </ol></li>
              </ul>
             </div>
            </div>
           </div></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_row18839642133319">
          <td class="cellrowborder" valign="top" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_p48396421331"><span id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_text86791513145416"><strong>Password</strong></span></p></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row1459816816316">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p18279102353111"><span id="protectagent_install_0017__en-us_topic_0000001839189313_text29193331704"><strong>Installation Directory</strong></span></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p2021392535">Installation directory on the agent host.</p>
           <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul136897143531">
            <li id="protectagent_install_0017__en-us_topic_0000001839189313_li97591618165310">If the OS is Linux, AIX, HP-UX, or Solaris, ProtectAgent is installed in <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b16588117395">/opt</strong> by default and cannot be installed in <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b10658911113917">/tmp</strong>, <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b11658311193910">/dev</strong>, <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b365881119395">/bin</strong>, <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b56591911173910">/usr</strong>, and the root directory. The installation directory cannot contain the following special characters: <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b136596116391">[|;&amp;$&gt;&lt;`\!]</strong>.</li>
            <li id="protectagent_install_0017__en-us_topic_0000001839189313_li9689114125316">If the OS is Windows, ProtectAgent is installed in <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b4677104961118">C:\</strong> by default.</li>
           </ul>
           <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note121249582327">
            <span class="notetitle"> NOTE: </span>
            <div class="notebody">
             <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul5627221193515">
              <li id="protectagent_install_0017__en-us_topic_0000001839189313_li822553684614">The system automatically verifies the validity of the entered installation directory. The permission on the selected installation directory must be 755, and the user and owner group must be <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b19695316191218">root</strong>.</li>
              <li id="protectagent_install_0017__en-us_topic_0000001839189313_li2732102715356">The installation directory is stored in the <span class="filepath" id="protectagent_install_0017__en-us_topic_0000001839189313_filepath4362752193511"><b>/etc/profile</b></span> configuration file. The environment variable is <span class="parmname" id="protectagent_install_0017__en-us_topic_0000001839189313_parmname139911192363"><b>DATA_BACKUP_AGENT_HOME</b></span>. Do not change this variable unless necessary.</li>
             </ul>
            </div>
           </div></td>
         </tr>
         <tr id="protectagent_install_0017__en-us_topic_0000001839189313_row16769104712412">
          <td class="cellrowborder" valign="top" width="28.18%" headers="mcps1.3.4.2.3.2.2.2.3.1.1 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p17770124712419"><strong id="protectagent_install_0017__en-us_topic_0000001839189313_b763220511579">Auto-Sync Host Name</strong></p></td>
          <td class="cellrowborder" valign="top" width="71.82%" headers="mcps1.3.4.2.3.2.2.2.3.1.2 "><p id="protectagent_install_0017__en-us_topic_0000001839189313_p350755285">During registration, the host name reported by the backup agent host is used. This parameter can be set when <span id="protectagent_install_0017__en-us_topic_0000001839189313_text1450195182820"><strong>Agent Type</strong></span> is set to <span id="protectagent_install_0017__en-us_topic_0000001839189313_text17525102316577"><strong>VMware backup agent</strong></span>.</p> <p id="protectagent_install_0017__en-us_topic_0000001839189313_p1777094792420">After this function is enabled, the modified agent host names are automatically synchronized to the <span id="protectagent_install_0017__en-us_topic_0000001839189313_text85006347154">product</span> management page. After this function is disabled, the agent host names of registered clients are not automatically synchronized but can be modified.</p></td>
         </tr>
        </tbody>
       </table>
      </div> <p></p></li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_li435922212355"><span>Click <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001211662447_uicontrol167382643916"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001211662447_text163582384395"><strong>Test</strong></span></b></span>.</span><p></p><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001211662447_p3228187194020">The system checks whether the IP addresses of the agent host, username, and password are correct.</p>
      <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note551810221084">
       <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
       <div class="notebody">
        <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul114108161016">
         <li id="protectagent_install_0017__en-us_topic_0000001839189313_li558318951012">In the <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b71401358121916">Client Information</strong> area, you can click <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b37755167206">Modify</strong> or <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b21401758131917">Delete</strong> corresponding to a client information record to modify or delete the information.</li>
         <li id="protectagent_install_0017__en-us_topic_0000001839189313_li20142108161013">In the <strong id="protectagent_install_0017__en-us_topic_0000001839189313_b1563417403203">Client Information</strong> area, select multiple pieces of client information and click <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_uicontrol779105418361"><b>Batch Modify Username and Password</b></span> to change the usernames and passwords in batches.</li>
        </ul>
       </div>
      </div> <p></p></li>
     <li id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001166356758_li0798163773516"><span>After the test succeeds, click <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001211662447_uicontrol196825820395"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001211662447_text16426484012"><strong>OK</strong></span></b></span>.</span><p></p><p id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001211662447_p54782475483">If the host where ProtectAgent is installed is displayed on the <span class="uicontrol" id="protectagent_install_0017__en-us_topic_0000001839189313_en-us_topic_0000001211662447_uicontrol17642757194812"><b><span id="protectagent_install_0017__en-us_topic_0000001839189313_text416622718167"><strong>Client</strong></span></b></span> page, the host is successfully registered with the management page.</p>
      <div class="note" id="protectagent_install_0017__en-us_topic_0000001839189313_note14752123516164">
       <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
       <div class="notebody">
        <ul id="protectagent_install_0017__en-us_topic_0000001839189313_ul123173916548">
         <li id="protectagent_install_0017__en-us_topic_0000001839189313_li323123995417">After the agent host is registered successfully, wait for 5 minutes and then use the agent host.</li>
        </ul>
       </div>
      </div> <p></p></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="helpcenter000008.html">Hosts</a>
    </div>
   </div>
  </div>
 </body>
</html>