
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Step 3: Registering the SQL Server Database">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="sql-0009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20241030">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="sql-0012">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Step 3: Registering the SQL Server Database</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="sql-0012"></a><a name="sql-0012"></a>

<h1 class="topictitle1">Step 3: Registering the SQL Server Database</h1>
<div><p>After ProtectAgent is installed on the host where the SQL Server database resides, the <span>OceanProtect</span> automatically discovers the SQL Server database host. You need to register the database on the management page to protect it.</p>
<div class="section"><h4 class="sectiontitle">Registering a Single SQL Server Database Instance</h4><ol><li><span>Choose <span class="uicontrol" id="sql-0012__en-us_topic_0000001839142377_uicontrol114088356363"><b><span id="sql-0012__en-us_topic_0000001839142377_text1840913533616"><strong>Protection</strong></span> &gt; Databases &gt; SQL Server</b></span>.</span></li><li><span>Click the <span class="uicontrol"><b><span><strong>Instance</strong></span></b></span> tab.</span></li><li><span>Click <span class="uicontrol"><b><span><strong>Register</strong></span></b></span> to register the SQL Server database.</span></li><li><span>Set <span class="uicontrol"><b><span><strong>Type</strong></span></b></span> to <span class="uicontrol"><b><span><strong>Single instance</strong></span></b></span>.</span></li><li><span>Configure the database instance and its authentication information.</span><p><p><a href="#sql-0012__en-us_topic_0000001311214069_table241515964115">Table 1</a> describes the related parameters.</p>

<div class="tablenoborder"><a name="sql-0012__en-us_topic_0000001311214069_table241515964115"></a><a name="en-us_topic_0000001311214069_table241515964115"></a><table cellpadding="4" cellspacing="0" summary="" id="sql-0012__en-us_topic_0000001311214069_table241515964115" frame="border" border="1" rules="all"><caption><b>Table 1 </b>SQL Server single-instance registration information</caption><colgroup><col style="width:25.629999999999995%"><col style="width:74.37%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.629999999999995%" id="mcps1.3.2.2.5.2.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="74.37%" id="mcps1.3.2.2.5.2.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.2.2.5.2.2.2.3.1.1 "><p id="sql-0012__p157991143121110"><strong id="sql-0012__b17667192119556">SQL Server Network Name</strong></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.2.2.5.2.2.2.3.1.2 "><p>If the SQL Server instance is a single-node instance, the value of this parameter is the Windows host name by default.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.2.2.5.2.2.2.3.1.1 "><p id="sql-0012__en-us_topic_0000001311214069_p0414115904113"><strong id="sql-0012__b161411231143513">Instance Name</strong></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.2.2.5.2.2.2.3.1.2 "><p>The instance name must be the same as that in the production environment, which is <strong>MSSQLSERVER</strong> by default.</p>
<p>Perform the following steps to query the instance name:</p>
<ol type="a"><li>Log in to the SQL Server database host.</li><li>Go to the <strong>Sql Server Configuration Manager</strong> page.</li><li>View <strong>SQL Server (</strong><em>instance name</em><strong>)</strong> in the services.</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.2.2.5.2.2.2.3.1.1 "><p><span><strong>Hosts</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.2.2.5.2.2.2.3.1.2 "><p>Database host to be registered.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.2.2.5.2.2.2.3.1.1 "><p><span><strong>Authentication Method</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.2.2.5.2.2.2.3.1.2 "><p>Select <strong>OS authentication</strong> or <strong>Database authentication</strong>. After the configuration, the <span>OceanProtect Appliance</span> uses this authentication method to log in to the database.</p>
<ul><li><strong>OS authentication</strong>: authentication based on the OS.</li><li><strong>Database authentication</strong>: authentication through the database administrator username and password.</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.2.2.5.2.2.2.3.1.1 "><p><span><strong>Database Username</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.2.2.5.2.2.2.3.1.2 "><p>This parameter is displayed when <strong>Authentication Method</strong> is set to <strong>Database authentication</strong>.</p>
<p>Name of the database administrator.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.2.2.5.2.2.2.3.1.1 "><p><span><strong>Database Password</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.2.2.5.2.2.2.3.1.2 "><p>This parameter is displayed when <strong>Authentication Method</strong> is set to <strong>Database authentication</strong>.</p>
<p>Password of the database administrator.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Click <span class="uicontrol"><b>OK</b></span>.</span></li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Registering a SQL Server Cluster Instance</h4><p><strong>Prerequisites</strong></p>
<div class="p">Before registering a SQL Server cluster instance, ensure that all database hosts in the cluster have been registered because the active node is used for backup and the standby node does not support backup in Copy Only mode.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Data on all nodes in the cluster must be synchronized.</p>
</div></div>
</div>
<p><strong>Procedure</strong></p>
<ol><li><span>Create a cluster.</span><p><ol type="a"><li>On the SQL Server page, click the <span class="uicontrol"><b><span><strong>Cluster</strong></span></b></span> tab.</li><li>Click <span class="uicontrol"><b><span><strong>Register</strong></span></b></span>.</li><li>On the <span class="uicontrol"><b><span><strong>Register</strong></span></b></span> page, customize the cluster name and select the cluster node.</li><li>Click <span class="uicontrol"><b>OK</b></span>.</li></ol>
</p></li><li><span>Register a cluster instance.</span><p><ol type="a"><li>On the SQL Server page, click the <span class="uicontrol"><b><span><strong>Instance</strong></span></b></span> tab.</li><li>Click <span class="uicontrol"><b><span><strong>Register</strong></span></b></span>.</li><li>Set <span class="uicontrol"><b><span><strong>Type</strong></span></b></span> to <span class="uicontrol"><b><span><strong>Cluster instance</strong></span></b></span>.</li><li>Configure the database instance and its authentication information.<p><a href="#sql-0012__table163871610417">Table 2</a> describes the related parameters.</p>

<div class="tablenoborder"><a name="sql-0012__table163871610417"></a><a name="table163871610417"></a><table cellpadding="4" cellspacing="0" summary="" id="sql-0012__table163871610417" frame="border" border="1" rules="all"><caption><b>Table 2 </b>SQL Server cluster instance registration information</caption><colgroup><col style="width:25.629999999999995%"><col style="width:74.37%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.629999999999995%" id="mcps1.3.3.5.2.2.1.4.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="74.37%" id="mcps1.3.3.5.2.2.1.4.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.1 "><p><strong id="sql-0012__sql-0012_b17667192119556">SQL Server Network Name</strong></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.2 "><ul><li>If the SQL Server instance is an Always On availability group, the value of this parameter is the Windows host name by default.</li><li>If the SQL Server instance is a Windows Server Failover Cluster (WSFC), this parameter uses the <strong>SQL Server Network Name</strong> value customized when the WSFC is set up.<p>Perform the following steps to query this parameter:</p>
<ol><li>Log in to any SQL Server database host in the cluster.</li><li>Log in to <strong>Microsoft SQL Server Management Studio</strong> as a database administrator.</li><li>Right-click the host and choose <strong>Properties</strong> from the shortcut menu.</li><li>On the <strong>Server Properties</strong> page that is displayed, query the value of <strong>Name</strong>.</li></ol>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.1 "><p><strong id="sql-0012__sql-0012_b161411231143513">Instance Name</strong></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.2 "><p>The instance name must be the same as that in the production environment, which is <strong>MSSQLSERVER</strong> by default.</p>
<p>Perform the following steps to query the instance name:</p>
<ol><li>Log in to the SQL Server database host.</li><li>Go to the <strong>Sql Server Configuration Manager</strong> page.</li><li>View <strong>SQL Server (</strong><em>instance name</em><strong>)</strong> in the services.</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.1 "><p><span><strong>Cluster</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.2 "><p>Database cluster to be registered.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.1 "><p><span><strong>Nodes</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.2 "><p>Host where the database instance resides.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.1 "><p><span><strong>Authentication Method</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.2 "><p>Select <strong>OS authentication</strong> or <strong>Database authentication</strong>.</p>
<ul><li><strong>OS authentication</strong>: authentication based on the OS.</li><li><strong>Database authentication</strong>: authentication through the database administrator username and password.</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.1 "><p><span><strong>Database Username</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.2 "><p>This parameter is displayed when <strong>Authentication Method</strong> is set to <strong>Database authentication</strong>.</p>
<p>Name of the database administrator.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.1 "><p><span><strong>Database Password</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.5.2.2.1.4.2.2.3.1.2 "><p>This parameter is displayed when <strong>Authentication Method</strong> is set to <strong>Database authentication</strong>.</p>
<p>Password of the database administrator.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Click <span class="uicontrol"><b>OK</b></span>.</li></ol>
</p></li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Related Operations</h4><ul><li>If the cluster is of the WSFC type, select all nodes.<p><span><img src="en-us_image_0000001920064725.png"></span></p>
</li><li>If the cluster is of the availability group type, register each node in the cluster as a cluster instance.<p><span><img src="en-us_image_0000001874065564.png"></span></p>
</li></ul>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="sql-0009.html">Backing Up a SQL Server Database</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>