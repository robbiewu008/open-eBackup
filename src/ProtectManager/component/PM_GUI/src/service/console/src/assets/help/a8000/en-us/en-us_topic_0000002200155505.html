<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Configuring the Device Time">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000002200155505">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Configuring the Device Time</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000002200155505"></a><a name="EN-US_TOPIC_0000002200155505"></a>

<h1 class="topictitle1">Configuring the Device Time</h1>
<div><p class="msonormal">This section describes how to set the system time. With correct system time, you can accurately determine the alarm generation time based on alarm logs. You can synchronize the client time to the system and set Network Time Protocol (NTP) automatic synchronization or manually change the system time. After configuring the device time, you must restart all <span id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_text1024332181217">OceanProtect</span> services. Otherwise, data protection jobs will fail to be delivered.</p>
<div class="section"><h4 class="sectiontitle">Prerequisites</h4><ul><li>You have configured the NTP server before synchronizing the time with the NTP server time. For details about how to configure the NTP server, see <a href="en-us_topic_0000002164829006.html">Configuring the DNS Service (Applicable to the OceanProtect E6000 Appliance)</a>.</li><li>To synchronize time with an NTP server in an environment with a firewall configured, port <strong>123</strong> must be enabled.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Context</h4><ul id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_ul10812004"><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li30199176">NTP is a protocol that synchronizes the time of a computer system to Universal Time Coordinated (UTC). Servers that support NTP are called NTP servers.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li3357128">By synchronizing the client time, you can adjust the system time to be consistent with the client time.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li30214159">By configuring the NTP automatic synchronization, you can periodically and automatically synchronize a device with the NTP server which serves as an external time source.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Precautions</h4><p class="msonormal" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_p31427835">Changing the device time may cause the following impacts:</p>
<ul id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_ul14415067"><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li62626740">If the device time is later than the license expiration date, the license may become invalid.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li26769753">If the device time is later than the certificate expiration date, the certificate will expire.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li39601185">If the device time is later than the user-defined password expiration date, the system may force users to change the login password.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li861915674913">If the device time is later than the deadline for saving historical performance data, the system will no longer save historical performance data.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li191421835135512">Changing the device time affects BBU modules' lifespan and may trigger alarms indicating that a BBU module's life expires or is aged.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <strong>Settings</strong> &gt; <strong>Time Settings</strong> to set the device time.</span><p><p class="msonormal">Use one of the following methods to set the device time:</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p class="text">Set the correct time zone and time. Otherwise, the time recorded in alarms or logs may be different from the actual time, affecting fault locating.</p>
</div></div>
<ul><li>Manual<ol type="a" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_ol28824699"><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li53099289">Click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b156621625175">Modify</strong> and select <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b012574401710">Change manually</strong>.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li6075192">Set the device time and time zone.<ul id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_ul54676736"><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li66739458">In the time area, change the device time and click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b3245634131613">OK</strong>.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li63784216">Select the time zone where the device is located from the <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b6768448131611">Time Zone</strong> drop-down list box.</li></ul>
</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li37187033">Click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b13351911318">Save</strong>.<p class="litext" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_p1216505823415">The security alert dialog box is displayed.</p>
</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li168879217356">Confirm the information in the dialog box, select <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b111459601719">I have read and understand the consequences associated with performing this operation</strong>, and click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b1868142720177">OK</strong>.</li></ol>
</li><li>Synchronize with the client time.<ol type="a" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_ol7416125403120"><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_li5988336122411">Click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b166485415311">Modify</strong> and select <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b36816217180">Synchronize with client time</strong>.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li165602623317">If the time zone ID cannot be obtained, DeviceManager displays <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b7134934151814">Client Time Zone</strong>. Specify <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b43921059121819">Client Time Zone</strong>, which is the time zone where the current client resides.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_li10853135332512">Click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b742481141912">Save</strong>.<p class="litext" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_p185385313253">The security alert dialog box is displayed.</p>
</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li2682532103317">Confirm the information in the dialog box, select <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b161219112199">I have read and understand the consequences associated with performing this operation</strong>, and click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b89284411197">OK</strong>.</li></ol>
</li></ul>
<ul><li>Set automatic NTP synchronization.<ol type="a" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_ol22224556"><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_li137294802616">Click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b1758212326197">Modify</strong> and select <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b16879145271916">Synchronize with NTP server time</strong>.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li55358650">In <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b8655131181911">NTP Server Address</strong>, enter the IPv4 address, IPv6 address, or domain name of the NTP server.<div class="note" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_note28465807"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_ul54865676"><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li24029043">A maximum of two NTP servers can be added. If the system cannot synchronize the time from one NTP server, it synchronizes the time from the other one.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li14934795">Ensure that the time of the two NTP servers is consistent.</li></ul>
</div></div>
</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li195430">(Optional) Click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b12137417152014">Test</strong>.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li15829907">Set <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b153471322132013">NTP Authentication</strong> to <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b134282292020">Enable</strong>.<div class="note" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_note7154080"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_ul12869201317422"><li class="text" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li10869513144211">NTP authentication can be enabled only when NTPv4 or later is used. After authentication, the NTP server automatically synchronizes the time to the storage device.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_en-us_topic_0223232331_li173520152424">After NTP authentication is enabled, you need to import the CA certificate.</li></ul>
</div></div>
</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_li312214290298">In <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b1028841818210">Time Zone</strong>, select a time zone.</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_li6857511103011">Click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b141761741142112">Save</strong>.<p class="litext" id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_p10857111120306">The security alert dialog box is displayed.</p>
</li><li id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_li12857131123015">Confirm the information in the dialog box, select <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b2124245535">I have read and understand the consequences associated with performing this operation</strong>, and click <strong id="EN-US_TOPIC_0000002200155505__en-us_topic_0000002200155665_b330005722119">OK</strong>.</li></ol>
</li></ul>
</p></li><li><span>Restart all services of the <span>OceanProtect</span>.</span><p><ol type="a"><li>Use PuTTY to log in to the host as user <strong>root</strong> through the management IP address.</li><li>Run the following command to restart the kube-dns service:<pre class="screen">kubectl delete pod --selector k8s-app=kube-dns -n kube-system</pre>
<p>The command output is as follows:</p>
<p><span><img src="en-us_image_0000002200155813.png"></span></p>
<div class="p">Run the following command to check the status of the kube-dns service. If the service status is <strong>Running</strong>, the kube-dns service is restarted successfully.<pre class="screen">kubectl get pod --selector k8s-app=kube-dns -n kube-system</pre>
</div>
<p>The command output is as follows:</p>
<p><span><img src="en-us_image_0000002164829178.png"></span></p>
</li><li>Run the following command to restart all data backup feature containers:<pre class="screen">kubectl delete --all pods -n dpa</pre>
<p>The command output is as follows:</p>
<p><span><img src="en-us_image_0000002164669478.png"></span></p>
</li><li>Run the following command to check whether all pods are started:<pre class="screen">kubectl get pods -n dpa</pre>
<p>The command output is as follows:</p>
<p><span><img src="en-us_image_0000002164669482.png"></span></p>
<p>If all pods are in the <span class="parmvalue"><b>Running</b></span> state, the service is restarted successfully. This process takes about 5 to 10 minutes.</p>
</li></ol>
</p></li></ol>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>