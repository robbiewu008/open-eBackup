<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="(Optional) Step 5: Registering a NAS Share">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000002164805012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="">
<meta name="DC.Publisher" content="20250306">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000002200046089">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>(Optional) Step 5: Registering a NAS Share</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000002200046089"></a><a name="EN-US_TOPIC_0000002200046089"></a>

<h1 class="topictitle1">(Optional) Step 5: Registering a NAS Share</h1>
<div><p>If you have registered a NAS share by adding a storage device (OceanStor V5, OceanStor Pacific, or NetApp ONTAP), skip this section. If the storage device where a NAS share to be protected reside is not OceanStor V5, OceanStor Pacific, or NetApp ONTAP, or only one NAS share needs to be protected, you can manually register the NAS share with the <span>OceanProtect</span>.</p>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002199964685_uicontrol79081114124111"><b><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002199964685_text99081414144119"><strong>Protection</strong></span> &gt; File Systems &gt; NAS Shares</b></span>.</span><p><div class="note" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002199964685_note397892312184"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002199964685_p5978112341818">For 1.5.0, choose <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002199964685_uicontrol129783237180"><b><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002199964685_text10978172391818"><strong>Protection</strong></span> &gt; File Services &gt; NAS Shares</b></span>.</p>
</div></div>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>Register</strong></span></b></span> to register a NAS share.</span><p><div class="p"><a href="#EN-US_TOPIC_0000002200046089__table1929515516558">Table 1</a> describes the NAS share registration information.
<div class="tablenoborder"><a name="EN-US_TOPIC_0000002200046089__table1929515516558"></a><a name="table1929515516558"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002200046089__table1929515516558" frame="border" border="1" rules="all"><caption><b>Table 1 </b>NAS share registration information</caption><colgroup><col style="width:25.6%"><col style="width:74.4%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.6%" id="mcps1.3.2.2.2.2.1.2.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="74.4%" id="mcps1.3.2.2.2.2.1.2.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25.6%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.1 "><p><strong>Domain Name/IP Address</strong></p>
</td>
<td class="cellrowborder" valign="top" width="74.4%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.2 "><p id="EN-US_TOPIC_0000002200046089__p10295125555515">Domain name or service IP address for accessing a NAS share.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.6%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.1 "><p><span><strong>Share Name</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.4%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.2 "><p>Name of a NAS share</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.6%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.1 "><p><span><strong>Share Protocol</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.4%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.2 "><p><span><strong>NFS</strong></span> or CIFS</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.6%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.1 "><p><span><strong>Authentication Mode</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.4%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.2 "><p>Authentication mode of the CIFS protocol, which can be <span><strong>NTLM Authentication</strong></span> or <span><strong>Kerberos Authentication</strong></span>.</p>
<p>In <span><strong>NTLM Authentication</strong></span> mode, you need to enter <span><strong>Domain Name</strong></span>, as well as <span><strong>Username</strong></span> and <span><strong>Password</strong></span> for accessing the NAS share.</p>
<p>In <span><strong>Kerberos Authentication</strong></span> mode, choose the Kerberos authentication information. If a NAS share is registered for the first time, click <span><strong>Create</strong></span> and configure Kerberos authentication information. <a href="#EN-US_TOPIC_0000002200046089__table93413354118">Table 2</a> describes the parameters.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.6%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.1 "><p><span><strong>Use the protocol encryption mode to connect to the share</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.4%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.2 "><p>Select this option when <span class="uicontrol"><b>Protocol encryption</b></span> is enabled for a NAS share to be protected.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.6%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.1 "><p><strong>Clients</strong></p>
</td>
<td class="cellrowborder" valign="top" width="74.4%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.2 "><p>Select clients for performing backup jobs. </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.6%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.1 "><p><span><strong>Filter Rule</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="74.4%" headers="mcps1.3.2.2.2.2.1.2.2.3.1.2 "><p>Set filtering rules to filter files and directories to be backed up.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Configure Kerberos authentication parameters. For details about related parameters, see <a href="#EN-US_TOPIC_0000002200046089__table93413354118">Table 2</a>.</p>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000002200046089__table93413354118"></a><a name="table93413354118"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002200046089__table93413354118" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Kerberos authentication parameters</caption><colgroup><col style="width:23.24%"><col style="width:76.75999999999999%"></colgroup><thead align="left"><tr id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_row434173521115"><th align="left" class="cellrowborder" valign="top" width="23.24%" id="mcps1.3.2.2.2.2.3.2.3.1.1"><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p1134143591114">Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="76.75999999999999%" id="mcps1.3.2.2.2.2.3.2.3.1.2"><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p1334163541111">Description</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_row123412358116"><td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.2.2.2.2.3.2.3.1.1 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p434935141114"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text116228195434"><strong>Name</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.2.2.2.2.3.2.3.1.2 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p334173518110">User-defined Kerberos authentication name.</p>
</td>
</tr>
<tr id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_row83417352118"><td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.2.2.2.2.3.2.3.1.1 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p143513352112"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text13420328134312"><strong>Principal Name</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.2.2.2.2.3.2.3.1.2 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p16354357116">Principal name of Kerberos authentication.</p>
<div class="note" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_note1997805374919"><span class="notetitle"> NOTE: </span><div class="notebody"><ul id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_ul53571451001"><li id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_li133577516015">Set this parameter to the human-machine username of the big data platform. The user must have the read, write, and execute permissions on the resources to be accessed.</li><li id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_li17687183713589">If you need to restore HDFS ACL information during HDFS file restoration, the registered principal name must have HDFS super user permissions. Here are some examples:<ul id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_ul10684153715580"><li id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_li176852373586">If the big data platform is FusionInsight or CDH, you can add the principal name to the supergroup on the big data platform so that the principal name has HDFS super user permissions.</li><li id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_li986445365918">If the big data platform is TDH, you can add the admin role to the principal name on the big data platform so that the principal name has HDFS super user permissions.</li></ul>
</li></ul>
</div></div>
</td>
</tr>
<tr id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_row143514356116"><td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.2.2.2.2.3.2.3.1.1 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p0352355118"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text872344194318"><strong>Configuration Mode</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.2.2.2.2.3.2.3.1.2 "><div class="p" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p14335165565315">Kerberos authentication mode, which must be the same as that configured on the Kerberos server. Two authentication modes are available:<ul id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_ul79681635144315"><li id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_li1996820353434"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text54429228440"><strong>Password</strong></span>: Use the principal name and password for identity authentication.</li><li id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_li20858113704310"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text126523418216"><strong>Keytab File</strong></span>: Use the principal and keytab file for identity authentication.</li></ul>
</div>
</td>
</tr>
<tr id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_row183523512112"><td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.2.2.2.2.3.2.3.1.1 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p15351835151118"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text114821547144418"><strong>Configuration File</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.2.2.2.2.3.2.3.1.2 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p133131443215">The <span class="filepath" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_filepath077924020372"><b>.conf</b></span> configuration file (for example, <strong id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_b17792404379">krb5.conf</strong>) used during Kerberos authentication. Contact the Kerberos server administrator to obtain the file from the Kerberos server and click <span><img id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_image958945045017" src="en-us_image_0000002200055329.png"></span> to upload it to the management page.</p>
<p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p1958995015013"><span id="EN-US_TOPIC_0000002200046089__ph1061015712220">Take MRS as an example. For details about how to obtain the configuration file, see "Exporting an Authentication Credential File" in the <a href="https://support.huawei.com/enterprise/en/cloud-computing/mapreduce-service-pid-22396131" target="_blank" rel="noopener noreferrer">MapReduce Service Product Documentation</a> of the corresponding version.</span></p>
<div class="p" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p335113531110">Due to problems in Kerberos, if <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_uicontrol1462119340419"><b>renew_lifetime</b></span> exists in the configuration file, comment it out. Otherwise, the registration may fail. For example:<pre class="screen" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_screen43313539415">#renew_lifetime = 7d</pre>
</div>
</td>
</tr>
<tr id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_row12351358112"><td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.2.2.2.2.3.2.3.1.1 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p53510353119"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text132368547446"><strong>Password</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.2.2.2.2.3.2.3.1.2 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p63573513114">This parameter is required only when <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_uicontrol10967144612199"><b><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text155548915452"><strong>Configuration Mode</strong></span></b></span> is set to <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_uicontrol478945111911"><b><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text953102164617"><strong>Password</strong></span></b></span>.</p>
<p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p1477085011175">Set this parameter to the password of <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_uicontrol763018714189"><b><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text1997411411465"><strong>Principal Name</strong></span></b></span>.</p>
</td>
</tr>
<tr id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_row5425131213143"><td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.2.2.2.2.3.2.3.1.1 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p164257122145"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text1522326164613"><strong>Confirm Password</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.2.2.2.2.3.2.3.1.2 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p1042541281412">Confirm the password of <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_uicontrol9284162064619"><b><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text14284102010469"><strong>Principal Name</strong></span></b></span>.</p>
</td>
</tr>
<tr id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_row1728863716141"><td class="cellrowborder" valign="top" width="23.24%" headers="mcps1.3.2.2.2.2.3.2.3.1.1 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p112881037171415"><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text19503531104618"><strong>Keytab File</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="76.75999999999999%" headers="mcps1.3.2.2.2.2.3.2.3.1.2 "><p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p374615219184">The <span class="filepath" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_filepath19934532131518"><b>.keytab</b></span> file used during Kerberos authentication (for example, <strong id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_b41921269182">krb5.keytab</strong>). This parameter is required only when <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_uicontrol6701435124612"><b><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text1170193513465"><strong>Configuration Mode</strong></span></b></span> is set to <span class="uicontrol" id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_uicontrol67464241815"><b><span id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_text8150194415468"><strong>Keytab File</strong></span></b></span>.</p>
<p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p1836535991910">Contact the Kerberos server administrator to obtain the file from the Kerberos server and click <span><img id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_image2782840141712" src="en-us_image_0000002164814330.png"></span> to upload it to the management page.</p>
<p id="EN-US_TOPIC_0000002200046089__en-us_topic_0000002200140845_p2080111116220"><span id="EN-US_TOPIC_0000002200046089__ph437661619211">Take MRS as an example. For details about how to obtain the configuration file, see "Exporting an Authentication Credential File" in the <a href="https://support.huawei.com/enterprise/en/cloud-computing/mapreduce-service-pid-22396131" target="_blank" rel="noopener noreferrer">MapReduce Service Product Documentation</a> of the corresponding version.</span></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span><p><p>When the registration is successful, information about the registered NAS share is displayed on the <span class="uicontrol"><b><span><strong>NAS Shares</strong></span></b></span> page.</p>
</p></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000002164805012.html">Backing Up a NAS Share</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>