<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Preparing for Backup">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000002164770314.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="">
<meta name="DC.Publisher" content="20250306">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000002164770318">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Preparing for Backup</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000002164770318"></a><a name="EN-US_TOPIC_0000002164770318"></a>

<h1 class="topictitle1">Preparing for Backup</h1>
<div><p>Before backing up an Elasticsearch cluster, prepare related information as follows:</p>
<ul><li><a href="#EN-US_TOPIC_0000002164770318__en-us_topic_0000001456414602_en-us_topic_0000001455091930_table10744125193920">Table 1</a> lists the required information.</li><li><a href="#EN-US_TOPIC_0000002164770318__table17163125610819">Table 2</a> lists the information required when the authentication mode for communication between the Elasticsearch cluster and <span>OceanProtect</span> is <span class="uicontrol"><b><span><strong>Simple Authentication</strong></span></b></span>.</li><li><a href="#EN-US_TOPIC_0000002164770318__table8758104318915">Table 3</a> lists the information required when the authentication mode for communication between the Elasticsearch cluster and <span>OceanProtect</span> is <span class="uicontrol"><b><span><strong>Kerberos Authentication</strong></span></b></span>.</li><li><a href="#EN-US_TOPIC_0000002164770318__table1044519108378">Table 4</a> lists the information required when the authentication mode for communication between the Elasticsearch cluster and <span>OceanProtect</span> is <span class="uicontrol"><b>XPack authentication</b></span></li></ul>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000002164770318__en-us_topic_0000001456414602_en-us_topic_0000001455091930_table10744125193920"></a><a name="en-us_topic_0000001456414602_en-us_topic_0000001455091930_table10744125193920"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002164770318__en-us_topic_0000001456414602_en-us_topic_0000001455091930_table10744125193920" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Preparations for backup</caption><colgroup><col style="width:19.41%"><col style="width:13.52%"><col style="width:50.73%"><col style="width:16.34%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="19.41%" id="mcps1.3.3.2.5.1.1"><p>Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="13.52%" id="mcps1.3.3.2.5.1.2"><p>Mandatory or Not (Y/N)</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50.73%" id="mcps1.3.3.2.5.1.3"><p>How to Obtain</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.34%" id="mcps1.3.3.2.5.1.4"><p>To Be Used In</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="19.41%" headers="mcps1.3.3.2.5.1.1 "><p>Owning users and user groups of the Elasticsearch installation directory</p>
</td>
<td class="cellrowborder" valign="top" width="13.52%" headers="mcps1.3.3.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" width="50.73%" headers="mcps1.3.3.2.5.1.3 "><p>Obtain the information from the Elasticsearch cluster administrator.</p>
</td>
<td class="cellrowborder" valign="top" width="16.34%" headers="mcps1.3.3.2.5.1.4 "><p><a href="en-us_topic_0000002200096957.html">Step 2: Creating and Configuring a Mount Directory</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="19.41%" headers="mcps1.3.3.2.5.1.1 "><p>IP address of the Elasticsearch cluster client</p>
</td>
<td class="cellrowborder" valign="top" width="13.52%" headers="mcps1.3.3.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" width="50.73%" headers="mcps1.3.3.2.5.1.3 "><p>Service IP address of the node with the role as EsClient in the Elasticsearch cluster and Service port number of EsClient.</p>
<p>For details about how to obtain the information, see the <a href="en-us_topic_0000002164770342.html#EN-US_TOPIC_0000002164770342__li597054171813">following description</a>.</p>
</td>
<td class="cellrowborder" rowspan="5" valign="top" width="16.34%" headers="mcps1.3.3.2.5.1.4 "><p><a href="en-us_topic_0000002164770342.html">Step 3: Registering an Elasticsearch Cluster</a></p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.1 "><p>Owner of the repository path</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.3 "><p>Owner of the repository path set during Elasticsearch cluster environment setup.</p>
<p>In FusionInsight and MapReduce Service (MRS) big data scenarios, the default value is <strong>omm</strong>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.1 "><p>Attribute of the owner of the repository path</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.3 "><p>Attribute of the owner of the repository path set during Elasticsearch cluster environment setup.</p>
<p>In FusionInsight and MRS big data scenarios, the default value is <strong>wheel</strong>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.1 "><p>Checking whether Kerberos authentication is enabled for the Elasticsearch cluster</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>The OceanProtect does not support the Kerberos authentication mode of open-source Elasticsearch.</p>
</div></div>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.3 "><p>Check whether the value of <span class="parmname"><b>hadoop.security.authentication</b></span> in the <strong>core-site.xml</strong> file of the Hadoop cluster is <span class="parmvalue"><b>kerberos</b></span>. If information similar to the following is displayed, Kerberos authentication is enabled.</p>
<p><span><img src="en-us_image_0000002164770378.png"></span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.1 "><p>Checking whether XPack authentication is enabled for the Elasticsearch cluster</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.2.5.1.3 "><p>Check the value of <span class="parmname"><b>xpack.security.enabled</b></span> in the <strong>elasticsearch.yml</strong> file of the Elasticsearch cluster. If the value is <span class="parmvalue"><b>true</b></span>, XPack authentication is enabled.</p>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000002164770318__table17163125610819"></a><a name="table17163125610819"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002164770318__table17163125610819" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Information required for simple authentication</caption><colgroup><col style="width:19.41%"><col style="width:13.52%"><col style="width:50.73%"><col style="width:16.34%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="19.41%" id="mcps1.3.4.2.5.1.1"><p>Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="13.52%" id="mcps1.3.4.2.5.1.2"><p>Mandatory or Not (Y/N)</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50.73%" id="mcps1.3.4.2.5.1.3"><p>How to Obtain</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.34%" id="mcps1.3.4.2.5.1.4"><p>To Be Used In</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="19.41%" headers="mcps1.3.4.2.5.1.1 "><p>Username and password for authentication</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000002164770318__en-us_topic_0000002164770342_p1550311613485">For <strong id="EN-US_TOPIC_0000002164770318__en-us_topic_0000002164770342_b4660542480">Simple Authentication</strong>, this parameter needs to be set only for version 1.5.0.</p>
</div></div>
</td>
<td class="cellrowborder" valign="top" width="13.52%" headers="mcps1.3.4.2.5.1.2 "><p>Conditionally mandatory</p>
</td>
<td class="cellrowborder" valign="top" width="50.73%" headers="mcps1.3.4.2.5.1.3 "><p>Obtain the information from the big data platform administrator.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>Set this parameter to the human-machine username of the big data platform. The user must have the read and write permissions on the resources to be accessed.</li><li>If Elasticsearch is used in the production environment and the Elasticsearch service is started for the first time, you can obtain the username and password from the command output, as shown in the following figure. (The username is <strong>elastic</strong> and the password is the value of <strong>v7-</strong>.)<p><span><img src="en-us_image_0000002164610666.png"></span></p>
</li></ul>
</div></div>
</td>
<td class="cellrowborder" valign="top" width="16.34%" headers="mcps1.3.4.2.5.1.4 "><p><a href="en-us_topic_0000002164770342.html">Step 3: Registering an Elasticsearch Cluster</a></p>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000002164770318__table8758104318915"></a><a name="table8758104318915"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002164770318__table8758104318915" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Information required for Kerberos authentication</caption><colgroup><col style="width:19.41%"><col style="width:13.52%"><col style="width:50.73%"><col style="width:16.34%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="19.41%" id="mcps1.3.5.2.5.1.1"><p>Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="13.52%" id="mcps1.3.5.2.5.1.2"><p>Mandatory or Not (Y/N)</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50.73%" id="mcps1.3.5.2.5.1.3"><p>How to Obtain</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.34%" id="mcps1.3.5.2.5.1.4"><p>To Be Used In</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="19.41%" headers="mcps1.3.5.2.5.1.1 "><p>Principal name of Kerberos authentication</p>
</td>
<td class="cellrowborder" valign="top" width="13.52%" headers="mcps1.3.5.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" width="50.73%" headers="mcps1.3.5.2.5.1.3 "><p>Format: <em>Principal name</em><strong>@</strong><em>Local domain</em></p>
<p>Obtain the principal name from the Kerberos server administrator. For details about how to obtain the local domain, see <a href="en-us_topic_0000002164770342.html#EN-US_TOPIC_0000002164770342__table93413354118">Table 2</a>.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_TOPIC_0000002164770318__en-us_topic_0000002164770342_p185420508162">Set this parameter to the human-machine username of the big data platform. The user must have the read and write permissions on the resources to be accessed.</p>
</div></div>
</td>
<td class="cellrowborder" rowspan="5" valign="top" width="16.34%" headers="mcps1.3.5.2.5.1.4 "><p><a href="en-us_topic_0000002164770342.html">Step 3: Registering an Elasticsearch Cluster</a></p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.1 "><p><span class="filepath"><b>.conf</b></span> configuration file (for example, <strong>krb5.conf</strong>) used during Kerberos authentication</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.3 "><p>Contact the Kerberos server administrator to obtain the file from the Kerberos server.</p>
<p><span id="EN-US_TOPIC_0000002164770318__ph112321942173816">Take MRS as an example. For details about how to obtain the configuration file, see "Exporting an Authentication Credential File" in the <a href="https://support.huawei.com/enterprise/en/cloud-computing/mapreduce-service-pid-22396131" target="_blank" rel="noopener noreferrer">MapReduce Service Product Documentation</a> of the corresponding version.</span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.1 "><p>Password of the principal name</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.2 "><p>N</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.3 "><p>If Kerberos authentication is performed using a password, you must obtain the password of the principal name.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.1 "><p><span class="filepath"><b>.keytab</b></span> file</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.2 "><p>N</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.3 "><p>If Kerberos authentication is performed using a <strong>.keytab</strong> file, you must obtain the <span class="filepath"><b>.keytab</b></span> file.</p>
<p>Contact the Kerberos server administrator to obtain the file from the Kerberos server.</p>
<p><span>Take MRS as an example. For details about how to obtain the configuration file, see "Exporting an Authentication Credential File" in the <a href="https://support.huawei.com/enterprise/en/cloud-computing/mapreduce-service-pid-22396131" target="_blank" rel="noopener noreferrer">MapReduce Service Product Documentation</a> of the corresponding version.</span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.1 "><p>CA certificate</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.2 "><p>N</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.2.5.1.3 "><p>If data encryption is required during the communication between the <span>OceanProtect</span> and the big data platform, you must import the CA certificate.</p>
<p>For details about how to obtain the certificate, see <a href="en-us_topic_0000002164770310.html#EN-US_TOPIC_0000002164770310__section6706354142710">Obtaining and Importing a Certificate</a>.</p>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><a name="EN-US_TOPIC_0000002164770318__table1044519108378"></a><a name="table1044519108378"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000002164770318__table1044519108378" frame="border" border="1" rules="all"><caption><b>Table 4 </b>Information required for XPack authentication</caption><colgroup><col style="width:25%"><col style="width:25%"><col style="width:25%"><col style="width:25%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.6.2.5.1.1"><p>Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.6.2.5.1.2"><p>Mandatory or Not (Y/N)</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.6.2.5.1.3"><p>How to Obtain</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.6.2.5.1.4"><p>To Be Used In</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.6.2.5.1.1 "><p>Username and password for authentication</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.6.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.6.2.5.1.3 "><p>Obtain the information from the big data platform administrator.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>The user must have the read and write permissions on the resource to be accessed.</p>
</div></div>
</td>
<td class="cellrowborder" rowspan="3" valign="top" width="25%" headers="mcps1.3.6.2.5.1.4 "><p><a href="en-us_topic_0000002164770342.html">Step 3: Registering an Elasticsearch Cluster</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.6.2.5.1.1 "><p>Checking whether SSL authentication is enabled for the Elasticsearch cluster</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.6.2.5.1.2 "><p>Y</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.6.2.5.1.3 "><p>Check the values of <span class="parmname"><b>xpack.security.http.ssl:enabled</b></span> and <span class="parmname"><b>xpack.security.transport.ssl:enabled</b></span> in the <strong>elasticsearch.yml</strong> file of the Elasticsearch cluster. If the values are both <span class="parmvalue"><b>true</b></span>, SSL authentication is enabled.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.6.2.5.1.1 "><p>CA certificate</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.6.2.5.1.2 "><p>N</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.6.2.5.1.3 "><p>If SSL authentication has been enabled for the Elasticsearch cluster, you must obtain the CA certificate in advance.</p>
<p>For details about how to obtain the certificate, see <a href="en-us_topic_0000002164770310.html#EN-US_TOPIC_0000002164770310__section6706354142710">Obtaining and Importing a Certificate</a>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000002164770314.html">Backup</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>