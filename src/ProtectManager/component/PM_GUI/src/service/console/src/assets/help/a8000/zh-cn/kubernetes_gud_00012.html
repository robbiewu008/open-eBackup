<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="步骤1：注册集群">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="kubernetes_gud_00011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect 备份一体机 1.5.0-1.6.0 帮助中心">
<meta name="DC.Publisher" content="20240320">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="kubernetes_gud_00012">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>步骤1：注册集群</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="kubernetes_gud_00012"></a><a name="kubernetes_gud_00012"></a>

<h1 class="topictitle1">步骤1：注册集群</h1>
<div><p>执行Kubernetes集群备份恢复前，需要将Kubernetes集群注册至<span>OceanProtect</span>。一套<span>OceanProtect</span>最多支持4套Kubernetes集群。</p>
<div class="section"><h4 class="sectiontitle">前提条件</h4><ul><li>已获取Kubernetes配置文件到维护终端本地路径中。<p id="kubernetes_gud_00012__p174291634202919">配置文件名称为kubeconfig，获取方法请参见<a href="kubernetes_gud_00065.html">获取kubeconfig配置文件</a>。</p>
</li><li>已获取Kubernetes集群后端存储的管理IP/域名。</li><li>已创建角色为“管理员”，登录方式为“RESTful”的存储设备用户，该用户用于将Kubernetes后端存储资源接入<span>OceanProtect</span>。创建用户的详细操作请参见存储设备对应版本的《管理员指南》。</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">操作步骤</h4><ol><li id="kubernetes_gud_00012__li0198134611381"><span>选择<span class="uicontrol" id="kubernetes_gud_00012__zh-cn_topic_0000001839142377_uicontrol84751741193812">“<span id="kubernetes_gud_00012__zh-cn_topic_0000001839142377_text194759416387">保护</span> &gt; 容器 &gt; Kubernetes FlexVolume”</span>。</span></li><li><span>单击<span class="uicontrol">“<span>注册</span>”</span>，注册Kubernetes FlexVolume集群信息。</span><p><div class="p">Kubernetes FlexVolume集群注册信息如<a href="#kubernetes_gud_00012__table613227155112">表1</a>所示。
<div class="tablenoborder"><a name="kubernetes_gud_00012__table613227155112"></a><a name="table613227155112"></a><table cellpadding="4" cellspacing="0" summary="" id="kubernetes_gud_00012__table613227155112" frame="border" border="1" rules="all"><caption><b>表1 </b>Kubernetes FlexVolume集群注册信息</caption><colgroup><col style="width:25.69%"><col style="width:74.31%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.69%" id="mcps1.3.3.2.2.2.1.2.2.3.1.1"><p>参数</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="74.31%" id="mcps1.3.3.2.2.2.1.2.2.3.1.2"><p>说明</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25.69%" headers="mcps1.3.3.2.2.2.1.2.2.3.1.1 "><p><span>名称</span></p>
</td>
<td class="cellrowborder" valign="top" width="74.31%" headers="mcps1.3.3.2.2.2.1.2.2.3.1.2 "><p>用户自定义集群名称。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.69%" headers="mcps1.3.3.2.2.2.1.2.2.3.1.1 "><p><span>配置文件</span></p>
</td>
<td class="cellrowborder" valign="top" width="74.31%" headers="mcps1.3.3.2.2.2.1.2.2.3.1.2 "><p>选择已获取的Kubernetes配置文件kubeconfig。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.69%" headers="mcps1.3.3.2.2.2.1.2.2.3.1.1 "><p><span>代理主机</span></p>
</td>
<td class="cellrowborder" valign="top" width="74.31%" headers="mcps1.3.3.2.2.2.1.2.2.3.1.2 "><p>选择可用于备份Kubernetes的代理主机。</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</p></li><li><span>在“<span>存储资源</span>”区域，单击“<span>添加</span>”。</span><p><p>仅支持添加OceanStor V3、OceanStor V5或OceanStor Dorado类型的生产存储资源。</p>
<p>存储资源参数说明如<a href="#kubernetes_gud_00012__table15286164351012">表2</a>所示。</p>

<div class="tablenoborder"><a name="kubernetes_gud_00012__table15286164351012"></a><a name="table15286164351012"></a><table cellpadding="4" cellspacing="0" summary="" id="kubernetes_gud_00012__table15286164351012" frame="border" border="1" rules="all"><caption><b>表2 </b>存储资源信息</caption><colgroup><col style="width:25.629999999999995%"><col style="width:74.37%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.629999999999995%" id="mcps1.3.3.2.3.2.3.2.3.1.1"><p>参数</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="74.37%" id="mcps1.3.3.2.3.2.3.2.3.1.2"><p>说明</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.2.3.2.3.2.3.1.1 "><p><span>IP/域名</span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.2.3.2.3.2.3.1.2 "><p>存储资源的管理IP地址或者域名。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.2.3.2.3.2.3.1.1 "><p><span>端口</span></p>
</td>
<td class="cellrowborder" valign="top" width="74.37%" headers="mcps1.3.3.2.3.2.3.2.3.1.2 "><p>存储资源的访问端口，默认是8088。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.629999999999995%" headers="mcps1.3.3.2.3.2.3.2.3.1.1 "><p><span>用户名</span></p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="74.37%" headers="mcps1.3.3.2.3.2.3.2.3.1.2 "><p>访问存储资源的系统管理员和密码。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.2.3.2.3.2.3.1.1 "><p><span>密码</span></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>单击<span class="uicontrol">“<span>确定</span>”</span>。</span><p><p>注册成功后，已注册的Kubernetes信息将在“<span>集群</span>”页签显示。系统将自动发现该Kubernetes集群下的命名空间和StatefulSet，分别展示在“<span>命名空间</span>”页签和“<span>StatefulSet</span>”页签。</p>
</p></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="kubernetes_gud_00011.html">备份命名空间/StatefulSet</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div></body>
</html>