<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="备份前准备">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="HCS_Stack_gud_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="">
<meta name="DC.Publisher" content="20250306">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="HCS_Stack_gud_0011">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>备份前准备</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="HCS_Stack_gud_0011"></a><a name="HCS_Stack_gud_0011"></a>

<h1 class="topictitle1">备份前准备</h1>
<div><p>备份前，请参考<a href="#HCS_Stack_gud_0011__zh-cn_topic_0000001514140621_table10744125193920">表1</a>提前准备证书、账号、IP地址等信息。</p>

<div class="tablenoborder"><a name="HCS_Stack_gud_0011__zh-cn_topic_0000001514140621_table10744125193920"></a><a name="zh-cn_topic_0000001514140621_table10744125193920"></a><table cellpadding="4" cellspacing="0" summary="" id="HCS_Stack_gud_0011__zh-cn_topic_0000001514140621_table10744125193920" frame="border" border="1" rules="all"><caption><b>表1 </b>备份前准备</caption><colgroup><col style="width:17.34%"><col style="width:12.75%"><col style="width:53.56999999999999%"><col style="width:16.34%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="17.34%" id="mcps1.3.2.2.5.1.1"><p>准备项</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="12.75%" id="mcps1.3.2.2.5.1.2"><p>是否必须</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="53.56999999999999%" id="mcps1.3.2.2.5.1.3"><p>获取方式</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.34%" id="mcps1.3.2.2.5.1.4"><p>数据使用章节</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="17.34%" headers="mcps1.3.2.2.5.1.1 "><p>Cinder模块证书</p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="12.75%" headers="mcps1.3.2.2.5.1.2 "><p>可选</p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="53.56999999999999%" headers="mcps1.3.2.2.5.1.3 "><p>当注册集群需要校验证书时，才需要获取证书。获取方法请参见<a href="HCS_Stack_gud_0013.html">步骤1：（可选）获取证书</a>。</p>
</td>
<td class="cellrowborder" rowspan="7" valign="top" width="16.34%" headers="mcps1.3.2.2.5.1.4 "><p><a href="HCS_Stack_gud_0015.html">步骤2：注册华为云Stack</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.1 "><p>存储资源证书</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.1 "><p>ManageOne运营面的运营管理员bss_admin的密码</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.2 "><p>可选</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.3 "><p>请联系华为云Stack运营管理员获取。</p>
<div class="note" id="HCS_Stack_gud_0011__note8453152174918"><span class="notetitle"> 说明： </span><div class="notebody"><p id="HCS_Stack_gud_0011__p1245362114497">如果需要使用自定义用户，以最小权限将华为云Stack接入<span id="HCS_Stack_gud_0011__text12410937181815">OceanProtect</span>，请参见华为云Stack对应版本《产品文档》中的<span class="uicontrol" id="HCS_Stack_gud_0011__uicontrol156361124493">“安全管理”</span>章节，创建自定义用户。具体步骤如下：</p>
<ol id="HCS_Stack_gud_0011__ol16337037165217"><li id="HCS_Stack_gud_0011__li7337637135219"><a name="HCS_Stack_gud_0011__li7337637135219"></a><a name="li7337637135219"></a>参考<span class="uicontrol" id="HCS_Stack_gud_0011__uicontrol89101831101218">“管理策略”</span>章节创建策略。其中，服务选择<span class="uicontrol" id="HCS_Stack_gud_0011__uicontrol158749173530">“云服务管理中心”</span>，权限选择<span class="uicontrol" id="HCS_Stack_gud_0011__uicontrol4509013195418">“vdc_readonly”</span>角色，该角色具有对租户中用户、资源空间、自运维等的查询权限。</li><li id="HCS_Stack_gud_0011__li66202308549"><a name="HCS_Stack_gud_0011__li66202308549"></a><a name="li66202308549"></a>参考<span class="uicontrol" id="HCS_Stack_gud_0011__uicontrol3956173401219">“管理集成账号”</span>章节创建集成账号。</li><li id="HCS_Stack_gud_0011__li1619114155813">参考<span class="uicontrol" id="HCS_Stack_gud_0011__uicontrol16668123711216">“管理用户组”</span>章节创建用户组。将<a href="#HCS_Stack_gud_0011__li7337637135219">1</a>中创建的策略及<a href="#HCS_Stack_gud_0011__li66202308549">2</a>中创建的集成账号添加进用户组。完成后，可以使用该用户组将华为云Stack接入<span id="HCS_Stack_gud_0011__text12543171420173">OceanProtect</span>。</li></ol>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.1 "><p>存储设备管理员用户名和密码</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.2 "><p>必选</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.3 "><p>请联系华为云Stack设备管理员获取。</p>
<p>您也可以新建角色为“管理员”，登录方式为“RESTful”的存储设备用户。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.1 "><p>华为云Stack API Gateway的浮动IP地址</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.2 "><p>必选</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.3 "><p>请参考华为云Stack软件安装阶段HCC Turnkey导出的参数信息汇总文件《<em>xxx</em>_export_all_v2_CN.xlsx》的“工具生成的IP参数”页签，搜索“AGW-LB-Float-IP”，获取对应的IP地址。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.1 "><p>华为云Stack的访问域名</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.2 "><p>必选</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.3 "><p>请参考华为云Stack软件安装阶段HCC Turnkey导出的参数信息汇总文件《<em>xxx</em>_export_all_v2_CN.xlsx》的“基本参数”页签，搜索“external_global_domain_name”，获取对应的参数值。</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.1 "><p>业务存储的管理IP地址</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.2 "><p>必选</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.2.5.1.3 "><ul id="HCS_Stack_gud_0011__ul179773157314"><li id="HCS_Stack_gud_0011__li1797751513310">华为SAN存储的管理IP地址获取方式：请参考华为云Stack软件安装阶段HCC Turnkey导出的参数信息汇总文件《<em id="HCS_Stack_gud_0011__i458810571318">xxx</em>_export_all_v2_CN.xlsx》的“基本参数”页签，搜索“业务存储REST URL”，获取对应参数值中的IP地址。</li><li id="HCS_Stack_gud_0011__li1951120142324">华为分布式块存储的管理IP地址获取方式：请参考华为云Stack软件安装阶段HCC Turnkey导出的参数信息汇总文件《<em id="HCS_Stack_gud_0011__i128706593320">xxx</em>_export_all_v2_CN.xlsx》的“Portal”页签，搜索“华为分布式块存储 Business”，获取对应参数值中的IP地址。<div class="note" id="HCS_Stack_gud_0011__note871485915219"><span class="notetitle"> 说明： </span><div class="notebody"><p id="HCS_Stack_gud_0011__p10714859182111">如果待备份虚拟机的存储信息不在此汇总文件中，则请联系华为云Stack的环境管理员获取，并添加至华为云Stack的注册信息中。</p>
</div></div>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.34%" headers="mcps1.3.2.2.5.1.1 "><p>待保护项目/资源集或云硬盘所在VDC的用户名和密码</p>
</td>
<td class="cellrowborder" valign="top" width="12.75%" headers="mcps1.3.2.2.5.1.2 "><p>必选</p>
</td>
<td class="cellrowborder" valign="top" width="53.56999999999999%" headers="mcps1.3.2.2.5.1.3 "><p>请联系VDC管理员获取。</p>
</td>
<td class="cellrowborder" valign="top" width="16.34%" headers="mcps1.3.2.2.5.1.4 "><p><a href="HCS_Stack_gud_0016.html">步骤3：添加租户并授权资源</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="HCS_Stack_gud_0008.html">备份</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div></body>
</html>