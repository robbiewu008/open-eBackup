<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Step 8: Enabling BCT (Applicable to RMAN-based Backup)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001792389212.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20240608">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001839188393">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Step 8: Enabling BCT (Applicable to RMAN-based Backup)</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000001839188393"></a><a name="EN-US_TOPIC_0000001839188393"></a>

<h1 class="topictitle1">Step 8: Enabling BCT (Applicable to RMAN-based Backup)</h1>
<div><p>Before performing incremental backup, you need to enable the block change tracking (BCT) function of the Oracle database to improve the incremental backup performance.</p>
<div class="section"><h4 class="sectiontitle">Context</h4><p>BCT is provided by Oracle 10g. It is used for recording the changes of each data block in the data file and saving the changes in the BCT trace file. When RMAN performs incremental backup after BCT is enabled, it uses BCT to trace data changes in files and reads only changed data blocks, instead of scanning all data files. In this way, the performance of RMAN incremental backup is improved.</p>
</div>
<div class="section"><h4 class="sectiontitle">Precautions</h4><ul><li>The BCT files occupy some storage space (which is calculated according to the formula: 1/30000 x Database size x Number of redo threads <em>N</em>).</li><li>After the BCT trace file is lost, the database cannot be started normally next time. You can disable BCT or re-create the file in the mount state to recover the database.</li><li>After the BCT trace file is lost, the incremental backup optimization function disappears. The re-created file can only optimize the incremental backup generated after the next full backup.</li><li>RMAN full or incremental backup cannot be performed properly after the BCT trace file is lost. However, you can disable BCT or re-create the BCT file to use RMAN.</li><li>The BCT trace file must be stored on the shared disk for all nodes to access.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Log in to the Oracle database host.</span><p><ul id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_ul1983714162204"><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li7258697580">If the Linux OS is used, use PuTTY to log in to the Oracle database host and run the <strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b119369483451">su - oracle</strong> command to switch to user <strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b18221101415382">oracle</strong>.</li><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li1366015032013">If the Windows OS is used, log in to the Oracle database host as the system administrator.</li></ul>
</p></li><li><span>Run the following commands to log in to the Oracle database instance.</span><p><ul id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_ul7420345341"><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li15682124913711">OS authentication:<ul id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_ul89443983816"><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li18420124173415">If the Linux OS is used, run the following commands:<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p95148598366"><a name="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li18420124173415"></a><a name="en-us_topic_0000001839188333_li18420124173415"></a><strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b14236563719">export ORACLE_SID=</strong><em id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_i85144598369">Database instance name</em></p>
<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p145141259153613"><strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b1597618293715">sqlplus / as sysdba</strong></p>
</li><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li7402151163816">If the Windows OS is used, perform the following operations:<ol type="a" id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_ol124110408264"><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li624120402267">Press <span class="uicontrol" id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_en-us_topic_0000001839188333_uicontrol11819941114510"><b>Win+R</b></span> to open the <strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_en-us_topic_0000001839188333_b1015191219408">Run</strong> window.</li><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li161821338277">Enter <span class="parmvalue" id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_parmvalue122291222476"><b>cmd</b></span> and run the following commands:<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p1755152313372"><strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b19591532143713">set ORACLE_SID=</strong><em id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_i16755423133718">Database instance name</em></p>
<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p1075515234379"><strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b540852910371">sqlplus / as sysdba</strong></p>
</li></ol>
</li></ul>
</li><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li105571236103417">Database authentication:<ul id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_ul1136516538386"><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li1723334817382">If the Linux OS is used, run the following commands:<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p920984963717"><a name="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li1723334817382"></a><a name="en-us_topic_0000001839188333_li1723334817382"></a><strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b162511338427">export ORACLE_SID=</strong><em id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_i142521037423">Database instance name</em></p>
<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p182093496371"><strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b034785743716">sqlplus</strong></p>
<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p17915722412">Enter the name of a user with the <strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b0440649114212">sysdba</strong> permissions as prompted:</p>
<pre class="screen" id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_screen9915112104114"><em id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_i1915102164113">username </em>as sysdba</pre>
<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p159150224117">Enter the password as prompted.</p>
</li><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li122822426407">If the Windows OS is used, perform the following operations:<ol type="a" id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_ol587720252273"><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li5168124414479">Press <span class="uicontrol" id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_en-us_topic_0000001839188333_uicontrol11819941114510_1"><b>Win+R</b></span> to open the <strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_en-us_topic_0000001839188333_b1015191219408_1">Run</strong> window.</li><li id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_li3877172517270">Enter <span class="parmvalue" id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_parmvalue89061315114212"><b>cmd</b></span> and run the following commands:<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p8745723103813"><strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b0361183517422">set ORACLE_SID=</strong><em id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_i8361163518426">Database instance name</em></p>
<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p15745182333814"><strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b11154427163811">sqlplus</strong></p>
<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p71274192512">Enter the name of a user with the <strong id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_b330420012221">sysdba</strong> permissions as prompted:</p>
<pre class="screen" id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_screen18896121620243"><em id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_i380114413256">username </em>as sysdba</pre>
<p id="EN-US_TOPIC_0000001839188393__en-us_topic_0000001839188333_p15251105852511">Enter the password as prompted.</p>
</li></ol>
</li></ul>
</li></ul>
</p></li><li><span>Run the following commands to check whether BCT is enabled for the database:</span><p><p><strong>set linesize 999;</strong></p>
<p><strong>COL status FORMAT a20;</strong></p>
<p><strong>COL filename FORMAT a500;</strong></p>
<p><strong>select status, filename from v$block_change_tracking;</strong></p>
<p>If the value of <span class="uicontrol"><b>STATUS</b></span> is <span class="uicontrol"><b>DISABLED</b></span> in the command output, BCT is disabled.</p>
</p></li><li><span>Run the following command to enable BCT:</span><p><p><strong>alter database enable block change tracking using file '</strong><em>Path and name of the trace file</em><strong>' reuse;</strong></p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The trace file path specified in the preceding command must exist. The trace file name can be customized.</p>
</div></div>
<div class="p">Example:<pre class="screen">alter database enable block change tracking using file '/oradata/block_track.log' reuse;</pre>
</div>
</p></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000001792389212.html">Backing Up an Oracle Database</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>