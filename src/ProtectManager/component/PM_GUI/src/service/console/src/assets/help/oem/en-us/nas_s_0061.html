<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Restoring a NAS Share">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="nas_s_0056.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
  <meta name="DC.Publisher" content="20241029">
  <meta name="prodname" content="csbs">
  <meta name="documenttype" content="usermanual">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="nas_s_0061">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Restoring a NAS Share</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="nas_s_0061"></a><a name="nas_s_0061"></a>
  <h1 class="topictitle1">Restoring a NAS Share</h1>
  <div>
   <p>This section describes how to restore a NAS share that has been backed up to the original location or a new location.</p>
   <div class="section">
    <h4 class="sectiontitle">Context</h4>
    <p id="nas_s_0061__nas_s_0059_p13356226151412">The <span id="nas_s_0061__nas_s_0059_text143181219121420">product</span> supports restoration to the original location or a new location using backup copies or replication copies (data cannot be restored to the original location).</p>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Prerequisites</h4>
    <ul>
     <li id="nas_s_0061__li632210479486">To restore a NAS share to a new location, register the NAS share at the new location or the storage device where the NAS share resides with the <span id="nas_s_0061__text5542395141">product</span>. The following lists the supported storage device types.
      <ul id="nas_s_0061__ul571916508480">
       <li id="nas_s_0061__nas_s_0059_nas_s_0013_li3415133617174">OceanStor Dorado V7</li>
       <li id="nas_s_0061__nas_s_0059_nas_s_0013_li1739551514266">OceanStor V7</li>
       <li id="nas_s_0061__nas_s_0059_nas_s_0013_li984654311123">OceanStor Dorado 6.x</li>
       <li id="nas_s_0061__nas_s_0059_nas_s_0013_li151737411958">OceanStor 6.x</li>
       <li id="nas_s_0061__nas_s_0059_nas_s_0013_li72988389413">OceanProtect 1.3.0 and later versions</li>
      </ul></li>
     <li id="nas_s_0061__li17945216184613">If you want to restore a NAS share to a new location, you need to configure the access permission for the <span id="nas_s_0061__text11734103918143">product</span> on the new storage device. For details, see <a href="nas_s_0025.html">Step 4: Configuring Access Permissions (Applicable to OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a>. During the operation, configure a client or add a user for the target NAS share.</li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li id="nas_s_0061__li0198134611381"><span>Choose <span class="uicontrol" id="nas_s_0061__en-us_topic_0000001839142377_uicontrol1387642214492"><b><span id="nas_s_0061__en-us_topic_0000001839142377_text18761122134919"><strong>Explore</strong></span> &gt; <span id="nas_s_0061__en-us_topic_0000001839142377_text087662214918"><strong>Copy Data</strong></span> &gt; File Systems &gt; <span id="nas_s_0061__en-us_topic_0000001839142377_text2897115217345"><strong>NAS Shares</strong></span></b></span>.</span><p></p>
      <div class="note" id="nas_s_0061__en-us_topic_0000001839142377_note1634925131911">
       <img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span>
       <div class="notebody">
        <p id="nas_s_0061__en-us_topic_0000001839142377_p1934182521913">For 1.5.0, choose <span class="uicontrol" id="nas_s_0061__en-us_topic_0000001839142377_uicontrol08045348196"><b><span id="nas_s_0061__en-us_topic_0000001839142377_text980410346197"><strong>Explore</strong></span> &gt; <span id="nas_s_0061__en-us_topic_0000001839142377_text4804183441910"><strong>Copy Data</strong></span> &gt; File Services &gt; <span id="nas_s_0061__en-us_topic_0000001839142377_text20804834141911"><strong>NAS Shares</strong></span></b></span>.</p>
       </div>
      </div> <p></p></li>
     <li id="nas_s_0061__li87691438131514"><span>A copy can be searched by NAS share resource or copy. This section uses the NAS share resource as an example.</span><p></p><p id="nas_s_0061__p142551140161511">On the <span id="nas_s_0061__text6827103218214"><strong>Resources</strong></span> tab page, locate the NAS share to be recovered by NAS share name and click the name.</p> <p></p></li>
     <li><span>On the <span class="uicontrol" id="nas_s_0061__nas_s_0059_uicontrol1812414562220"><b><span id="nas_s_0061__nas_s_0059_text18993182162710"><strong>Copy Data</strong></span></b></span> page, select the year, month, and day in sequence to locate the copy.</span><p></p><p id="nas_s_0061__nas_s_0059_p9918150182310">If <span><img id="nas_s_0061__nas_s_0059_image886000161711" src="en-us_image_0000001792520510.png"></span> is displayed below a month or date, a copy exists in the month or on the day.</p> <p></p></li>
     <li><span>In the row where the copy resides, choose <span class="uicontrol" id="nas_s_0061__nas_s_0059_uicontrol4705161613273"><b><span id="nas_s_0061__nas_s_0059_text04951528155216"><strong>More</strong></span> &gt; <span id="nas_s_0061__nas_s_0059_text12444191814117"><strong>Restore</strong></span></b></span>.</span></li>
     <li><span>Restore a NAS share to its original location or a new location.</span><p></p>
      <ul>
       <li>Restore data to the original location.<p><a href="#nas_s_0061__table1452025982813">Table 1</a> describes the related parameters.</p>
        <div class="tablenoborder">
         <a name="nas_s_0061__table1452025982813"></a><a name="table1452025982813"></a>
         <table cellpadding="4" cellspacing="0" summary="" id="nas_s_0061__table1452025982813" frame="border" border="1" rules="all">
          <caption>
           <b>Table 1 </b>Parameters for restoring data to the original location
          </caption>
          <colgroup>
           <col style="width:13.569999999999999%">
           <col style="width:86.42999999999999%">
          </colgroup>
          <thead align="left">
           <tr>
            <th align="left" class="cellrowborder" valign="top" width="13.569999999999999%" id="mcps1.3.4.2.5.2.1.1.2.2.3.1.1"><p>Parameter</p></th>
            <th align="left" class="cellrowborder" valign="top" width="86.42999999999999%" id="mcps1.3.4.2.5.2.1.1.2.2.3.1.2"><p>Description</p></th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.1.2.2.3.1.1 "><p><span><strong>Location</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.1.2.2.3.1.2 "><p>Location of a NAS share, which cannot be modified.</p></td>
           </tr>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.1.2.2.3.1.1 "><p><span><strong>Overwrite Rule</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.1.2.2.3.1.2 "><p>If files with the same names exist in the restoration path, you can choose to replace or skip existing files.</p>
             <ul>
              <li><span><strong>Replace existing files</strong></span></li>
              <li><span><strong>Skip existing files</strong></span></li>
              <li><span><strong>Only replace the files older than the restoration file</strong></span></li>
             </ul></td>
           </tr>
          </tbody>
         </table>
        </div></li>
       <li>Restore data to a new location.<p><a href="#nas_s_0061__nas_s_0059_table429861453516">Table 2</a> describes the parameters for restoring data to the <span><strong>OceanStor V5</strong></span>, OceanStor Pacific, or NetApp ONTAP.</p>
        <div class="tablenoborder">
         <a name="nas_s_0061__nas_s_0059_table429861453516"></a><a name="nas_s_0059_table429861453516"></a>
         <table cellpadding="4" cellspacing="0" summary="" id="nas_s_0061__nas_s_0059_table429861453516" frame="border" border="1" rules="all">
          <caption>
           <b>Table 2 </b>Parameters for restoring data to the <span><strong>OceanStor V5</strong></span>, OceanStor Pacific, or NetApp ONTAP
          </caption>
          <colgroup>
           <col style="width:13.569999999999999%">
           <col style="width:86.42999999999999%">
          </colgroup>
          <thead align="left">
           <tr>
            <th align="left" class="cellrowborder" valign="top" width="13.569999999999999%" id="mcps1.3.4.2.5.2.1.2.2.2.3.1.1"><p>Parameter</p></th>
            <th align="left" class="cellrowborder" valign="top" width="86.42999999999999%" id="mcps1.3.4.2.5.2.1.2.2.2.3.1.2"><p>Description</p></th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.2.2.3.1.1 "><p><span><strong>Storage Device</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.2.2.3.1.2 "><p>Select the storage device where the new location resides.</p>
             <div class="note">
              <span class="notetitle"> NOTE: </span>
              <div class="notebody">
               <p id="nas_s_0061__p105412525318">The NAS share registered using the <a href="nas_s_0024.html">Step 5: Registering a NAS Share (Applicable to Storage Devices Except OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a> belongs to the <strong id="nas_s_0061__b993784413119">otherDevice</strong> storage device.</p>
              </div>
             </div></td>
           </tr>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.2.2.3.1.1 "><p><span><strong>Share Name</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.2.2.3.1.2 "><p>Select the name of the share that accesses a file system. If no share is available, click <span><strong>Register</strong></span> to add a NAS share. For details about NAS share registration parameters, see <a href="nas_s_0024.html#nas_s_0024__table1929515516558">Table 1</a>.</p>
             <div class="note">
              <span class="notetitle"> NOTE: </span>
              <div class="notebody">
               <ul>
                <li>For an NFS share, ensure that the current device has the read and write permissions on the NFS share directory and the <strong>no_root_squash</strong> option is enabled. For details about how to configure NFS share access permissions, see <a href="nas_s_0025.html">Step 4: Configuring Access Permissions (Applicable to OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a>.</li>
                <li>For a CIFS share, ensure that the current device has the read and write permissions on the CIFS share directory. You are advised to use a user in the Administrator group for backup. Otherwise, only files and directories whose read and write permissions are granted to the device can be backed up. For details about how to configure CIFS share access permissions, see <a href="nas_s_0025.html">Step 4: Configuring Access Permissions (Applicable to OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a>.</li>
                <li>For an NFS/CIFS share, ensure that the security style of the file system to which the current share belongs is the same as that of the file system to which the backup share belongs. Otherwise, the file permission may be changed.</li>
                <li id="nas_s_0061__li455841518615">If you select <strong id="nas_s_0061__b3395162023216">otherDevice</strong> for <strong id="nas_s_0061__b1161002293216">Storage Device</strong> and no share name is available, click <span class="uicontrol" id="nas_s_0061__uicontrol743075417202"><b>Register</b></span>. After the registration is complete, click <span class="uicontrol" id="nas_s_0061__uicontrol10630846192012"><b>OK</b></span>. You can view the share name in the drop-down list box. For details about the parameters for registering a share name, see <a href="nas_s_0024.html#nas_s_0024__table1929515516558">Table 1</a>.</li>
                <li>When a CIFS share is used for restoration, if the user to which the original copy file belongs does not exist in the target storage to be restored, the permission of the user cannot be restored.</li>
               </ul>
              </div>
             </div></td>
           </tr>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.2.2.3.1.1 "><p><span><strong>Overwrite Rule</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.2.2.3.1.2 "><p>If files with the same names exist in the restoration path, you can choose to replace or skip existing files.</p>
             <ul>
              <li><span><strong>Replace existing files</strong></span></li>
              <li><span><strong>Skip existing files</strong></span></li>
              <li><span><strong>Only replace the files older than the restoration file</strong></span></li>
             </ul></td>
           </tr>
          </tbody>
         </table>
        </div> <p><a href="#nas_s_0061__nas_s_0059_table1248313820599">Table 3</a> describes the parameters for restoring data to OceanProtect 1.3.0 or later or OceanStor Dorado V7/OceanStor V7/OceanStor Dorado 6.x/OceanStor 6.x.</p>
        <div class="tablenoborder">
         <a name="nas_s_0061__nas_s_0059_table1248313820599"></a><a name="nas_s_0059_table1248313820599"></a>
         <table cellpadding="4" cellspacing="0" summary="" id="nas_s_0061__nas_s_0059_table1248313820599" frame="border" border="1" rules="all">
          <caption>
           <b>Table 3 </b>Parameters for restoring data to OceanStor Dorado V7/OceanStor V7/OceanStor Dorado 6.x/OceanStor 6.x/OceanProtect 1.3.0 or later
          </caption>
          <colgroup>
           <col style="width:13.569999999999999%">
           <col style="width:86.42999999999999%">
          </colgroup>
          <thead align="left">
           <tr>
            <th align="left" class="cellrowborder" valign="top" width="13.569999999999999%" id="mcps1.3.4.2.5.2.1.2.4.2.3.1.1"><p>Parameter</p></th>
            <th align="left" class="cellrowborder" valign="top" width="86.42999999999999%" id="mcps1.3.4.2.5.2.1.2.4.2.3.1.2"><p>Description</p></th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.1 "><p><span><strong>Storage Device</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.2 "><p>Select the storage device where the new location resides.</p>
             <div class="note">
              <span class="notetitle"> NOTE: </span>
              <div class="notebody">
               <p>The NAS share registered using the <a href="nas_s_0024.html">Step 5: Registering a NAS Share (Applicable to Storage Devices Except OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a> belongs to the <strong id="nas_s_0061__nas_s_0061_b993784413119">otherDevice</strong> storage device.</p>
              </div>
             </div></td>
           </tr>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.1 "><p><span><strong>File Systems</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.2 "><p>Select the target file system for restoration.</p></td>
           </tr>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.1 "><p><span><strong>Share Name</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.2 "><p>Select the share name of the target file system for restoration.</p>
             <div class="note">
              <span class="notetitle"> NOTE: </span>
              <div class="notebody">
               <ul>
                <li>For an NFS share, ensure that the current device has the read and write permissions on the NFS share directory and the <strong>no_root_squash</strong> option is enabled. For details about how to configure NFS share access permissions, see <a href="nas_s_0025.html">Step 4: Configuring Access Permissions (Applicable to OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a>.</li>
                <li>For a CIFS share, ensure that the current device has the read and write permissions on the CIFS share directory. You are advised to use a user in the Administrator group for backup. Otherwise, only files and directories whose read and write permissions are granted to the device can be backed up. For details about how to configure CIFS share access permissions, see <a href="nas_s_0025.html">Step 4: Configuring Access Permissions (Applicable to OceanStor V5/OceanStor Pacific/NetApp ONTAP)</a>.</li>
                <li>For an NFS/CIFS share, ensure that the security style of the file system to which the current share belongs is the same as that of the file system to which the backup share belongs. Otherwise, the file permission may be changed.</li>
                <li>If you select <strong id="nas_s_0061__nas_s_0061_b3395162023216">otherDevice</strong> for <strong id="nas_s_0061__nas_s_0061_b1161002293216">Storage Device</strong> and no share name is available, click <span class="uicontrol" id="nas_s_0061__nas_s_0061_uicontrol743075417202"><b>Register</b></span>. After the registration is complete, click <span class="uicontrol" id="nas_s_0061__nas_s_0061_uicontrol10630846192012"><b>OK</b></span>. You can view the share name in the drop-down list box. For details about the parameters for registering a share name, see <a href="nas_s_0024.html#nas_s_0024__table1929515516558">Table 1</a>.</li>
               </ul>
              </div>
             </div></td>
           </tr>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.1 "><p><span><strong>FQDN/IP</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.2 "><p>Fully qualified domain name (FQDN) or service IP address for accessing a NAS share.</p> <p>The FQDN format is <em>Name of the storage device where a NAS share resides</em><strong>.</strong><em>Name of the domain to which the storage device is added</em>. For example, if the name of the storage device where a NAS share resides is <em>Huawei.Storage</em> and the name of the domain to which the storage device is added is <em>huawei.com</em>, the FQDN is <em>Huawei.Storage.huawei.com</em>.</p>
             <div class="note">
              <span class="notetitle"> NOTE: </span>
              <div class="notebody">
               <p>If the FQDN is required, configure the DNS service on the device management page of the <span>product</span> so that the <span>product</span> can access external domain names. For details about how to configure the DNS service, see <a href="nas_s_0099.html">Configuring the DNS Service</a>.</p>
              </div>
             </div></td>
           </tr>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.1 "><p><span><strong>Authentication Method</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.2 "><p>Authentication mode of a file system. This parameter is available when the share protocol of a backup copy is CIFS. For details about this parameter, see <a href="nas_s_0024.html#nas_s_0024__table1929515516558">Table 1</a>.</p></td>
           </tr>
           <tr>
            <td class="cellrowborder" valign="top" width="13.569999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.1 "><p><span><strong>Overwrite Rule</strong></span></p></td>
            <td class="cellrowborder" valign="top" width="86.42999999999999%" headers="mcps1.3.4.2.5.2.1.2.4.2.3.1.2 "><p>If files with the same names exist in the restoration path, you can choose to replace or skip existing files.</p>
             <ul>
              <li><span><strong>Replace existing files</strong></span></li>
              <li><span><strong>Skip existing files</strong></span></li>
              <li><span><strong>Only replace the files older than the restoration file</strong></span></li>
             </ul></td>
           </tr>
          </tbody>
         </table>
        </div></li>
      </ul> <p></p></li>
     <li id="nas_s_0061__li1168243513296"><span>Click <span class="uicontrol" id="nas_s_0061__uicontrol8682163517294"><b><span id="nas_s_0061__text923644131319"><strong>OK</strong></span></b></span>. Before you restore data using the copy, ensure that the target location for restoration has sufficient free space for restoration. The confirmation method is as follows:</span><p></p>
      <ul id="nas_s_0061__ul698861123720">
       <li id="nas_s_0061__li17226131513373">Requirements for restoration using a full copy: Remaining space of the target location ≥ Data volume of the full copy before reduction. To obtain the data volume of the full copy before reduction, view <span class="uicontrol" id="nas_s_0061__uicontrol6781131216406"><b>Data Volume Before Reduction</b></span> of the backup job on the <span class="uicontrol" id="nas_s_0061__uicontrol18893135113394"><b>Job Information</b></span> tab page.</li>
       <li id="nas_s_0061__li3988191115372">Requirements for restoration using forever incremental copies or incremental copies: Remaining space of the target location ≥ Total amount of data of all copies generated in the following period before reduction: from the current permanent incremental copy or incremental copy to the last full copy. To obtain the total amount of data before reduction, add the value of <span class="uicontrol" id="nas_s_0061__uicontrol561253514498"><b>Data Volume Before Reduction</b></span> of each backup job on the <span class="uicontrol" id="nas_s_0061__uicontrol81551548216"><b>Job Information</b></span> tab page.</li>
      </ul> <p></p></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="nas_s_0056.html">Restoration</a>
    </div>
   </div>
  </div>
 </body>
</html>