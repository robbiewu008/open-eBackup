<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Restoring VMware VM Disks">
  <meta name="product" content="">
  <meta name="DC.Relation" scheme="URI" content="en-us_topic_0000001792547700.html">
  <meta name="prodname" content="">
  <meta name="version" content="">
  <meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
  <meta name="DC.Publisher" content="20240608">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="EN-US_TOPIC_0000001839187073">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Restoring VMware VM Disks</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="EN-US_TOPIC_0000001839187073"></a><a name="EN-US_TOPIC_0000001839187073"></a>
  <h1 class="topictitle1">Restoring VMware VM Disks</h1>
  <div>
   <p>This section describes how to restore disks of a VM that has been backed up to the original VM or a new VM.</p>
   <div class="section">
    <h4 class="sectiontitle">Context</h4>
    <p>The <span>product</span> allows you to restore disks to the original or a new VM using backup copies, replication copies (restoration to the original VM is not supported), copies generated by live mount, or imported copies. When using a copy generated by live mount, ensure that the copy has been unmounted from the VM.</p>
    <ul>
     <li>Restoring disks to the original VM<p>When disk data is restored to the original VM, if a disk exists in the corresponding slot of the original VM, the data on the disk will be replaced. If the original disk still exists in the corresponding slot of the original VM, incremental restoration is performed. (Incremental restoration is performed only when the latest backup copy is used for restoration for the first time. In other cases, full restoration is performed). If no disk exists in the corresponding slot of the original VM, full restoration is performed. That is, a disk is created for restoration and then mounted to the corresponding slot.</p></li>
     <li>Restoring disks to a new VM<p>When disk data is restored to a new VM, if a disk exists in the corresponding slot of the specified new VM, the data on the disk will be replaced. If no disk exists in the corresponding slot of the new VM, full restoration is performed. That is, a disk is created for restoration and then mounted to the corresponding slot.</p></li>
    </ul>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Prerequisites</h4>
    <p>For 1.6.0 and later versions, if the disks to be restored contain RDM disks, ensure that valid connections, such as iSCSI and Fibre Channel connections, have been established between the target ESXi host and the production storage where the RDM disks reside. For details, see "Configuring Connectivity" in the <a href="https://support.huawei.com/enterprise/en/doc/EDOC1100116456/772ffe7f/configuring-connectivity?idPath=7919749|251366268|250389224|261066246|250662070" target="_blank" rel="noopener noreferrer">OceanStor Dorado 6.x and OceanStor 6.x Host Connectivity Guide for VMware ESXi</a>.</p>
   </div>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_en-us_topic_0000001839142377_uicontrol1812933174613"><b><span id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_en-us_topic_0000001839142377_text0129103112462"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_en-us_topic_0000001839142377_text81291431134613"><strong>Copy Data</strong></span> &gt; <span id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_en-us_topic_0000001839142377_text860175510430"><strong>Virtualization</strong></span> &gt; <span id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_en-us_topic_0000001839142377_text8319371528"><strong>VMware</strong></span></b></span>.</span></li>
     <li><span>You can search for a copy by VM or copy. This section uses a VM as an example.</span><p></p><p>Click <strong>Resources</strong> to switch to the corresponding page, search for the VM to be restored by name, and click the VM name.</p> <p></p></li>
     <li><span>Click <span class="uicontrol"><b><span><strong>Copy Data</strong></span></b></span> and select the year, month, and day in sequence to find the copy.</span><p></p><p>If <span><img src="en-us_image_0000001839267101.png"></span> is displayed below a month or day, a copy is generated in the month or on the day.</p> <p></p></li>
     <li><span>Find the copy used for restoration and click <span><strong>Copy Time</strong></span>.</span></li>
     <li><span>Select the disk to be restored and click <span class="uicontrol"><b>Restore</b></span>.</span></li>
     <li><span>Restore the VM disk to the original VM or a new VM.</span><p></p>
      <ul>
       <li>Restore the VM disk to the original VM.</li>
       <li>Restore the VM disk to a new VM.
        <div class="p">
         <a href="#EN-US_TOPIC_0000001839187073__table15668141795417">Table 1</a> describes the related parameters. 
         <div class="tablenoborder">
          <a name="EN-US_TOPIC_0000001839187073__table15668141795417"></a><a name="table15668141795417"></a>
          <table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0000001839187073__table15668141795417" frame="border" border="1" rules="all">
           <caption>
            <b>Table 1 </b>New VM information
           </caption>
           <colgroup>
            <col style="width:29.87%">
            <col style="width:70.13000000000001%">
           </colgroup>
           <thead align="left">
            <tr>
             <th align="left" class="cellrowborder" valign="top" width="29.87%" id="mcps1.3.4.2.6.2.1.2.1.2.2.3.1.1"><p>Parameter</p></th>
             <th align="left" class="cellrowborder" valign="top" width="70.13000000000001%" id="mcps1.3.4.2.6.2.1.2.1.2.2.3.1.2"><p>Description</p></th>
            </tr>
           </thead>
           <tbody>
            <tr>
             <td class="cellrowborder" valign="top" width="29.87%" headers="mcps1.3.4.2.6.2.1.2.1.2.2.3.1.1 "><p><span><strong>Compute Location</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="70.13000000000001%" headers="mcps1.3.4.2.6.2.1.2.1.2.2.3.1.2 "><p>Target VM to which the backup disk is restored.</p>
              <div class="note">
               <span class="notetitle"> NOTE: </span>
               <div class="notebody">
                <p>The OS type of the target VM must be the same as that of the source VM.</p>
               </div>
              </div></td>
            </tr>
            <tr>
             <td class="cellrowborder" valign="top" width="29.87%" headers="mcps1.3.4.2.6.2.1.2.1.2.2.3.1.1 "><p><span><strong>Storage Location</strong></span></p></td>
             <td class="cellrowborder" valign="top" width="70.13000000000001%" headers="mcps1.3.4.2.6.2.1.2.1.2.2.3.1.2 "><p>Target datastore to which the backup disk is restored.</p>
              <ul>
               <li><span><strong>Different Datastores</strong></span>: A datastore is selected for each disk to implement data restoration.</li>
               <li><span><strong>Same Datastore</strong></span>: All disks are restored to the same datastore.</li>
              </ul></td>
            </tr>
           </tbody>
          </table>
         </div>
        </div></li>
      </ul> <p></p></li>
     <li><span>You can decide whether to enable <span class="uicontrol" id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_uicontrol929613123508"><b>NBDSSL-based Restore</b></span>, which is enabled by default.</span><p></p>
      <div class="p" id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_p12928266516">
       In SAN transmission mode:
       <ul id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_ul565274616519">
        <li id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_li14652184635110">After this function is enabled, if backup copy disks contain thick provision lazy zeroed or thin provisioned disks, the NBDSSL mode is used for restoration. If disks are all thick provision eager zeroed disks, the SAN mode is used for restoration.</li>
        <li id="EN-US_TOPIC_0000001839187073__en-us_topic_0000001839187089_li1365234645115">After this function is disabled, the SAN mode is used for restoration using backup copies.</li>
       </ul>
      </div> <p></p></li>
     <li><span>For 1.6.0 and later versions: You can specify an agent host for executing restoration jobs. If no agent host is specified, the system automatically allocates an agent host.</span></li>
     <li><span>Click <span class="uicontrol"><b>OK</b></span>.</span></li>
    </ol>
   </div>
  </div>
  <div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>Parent topic:</strong> <a href="en-us_topic_0000001792547700.html">Restoration</a>
    </div>
   </div>
  </div>
 </body>
</html>