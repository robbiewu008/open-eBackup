<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Restoring VMware VMs">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="en-us_topic_0000002200055021.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="">
<meta name="DC.Publisher" content="20250306">
<meta name="prodname" content="csbs">
<meta name="documenttype" content="usermanual">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000002164654302">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Restoring VMware VMs</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0000002164654302"></a><a name="EN-US_TOPIC_0000002164654302"></a>

<h1 class="topictitle1">Restoring VMware VMs</h1>
<div><p>This section describes how to restore an entire VM that has been backed up to the original location or a new location.</p>
<div class="section"><h4 class="sectiontitle">Context</h4><div class="p">The <span>OceanProtect</span> allows you to restore VMs to the original or a new location using backup copies, replication copies (restoration to the original location is not supported), archive copies (restoration to the original location is not supported after a replication copy is archived),copies generated by live mount, or imported copies.<ul><li>Restored to the original location<p>If you restore a VM to the original location, the system creates a VM in the path of the original VM (that is, the cluster or ESXi host to which the original VM belongs) and fully restores the backup data to the new VM.</p>
<p>When data is restored to the original location, if the original location is a cluster and vSphere distributed resource scheduler (DRS) is not enabled for the cluster, the system restores the VM to the host to which the VM belongs when the copy is generated. For details about how to check or enable vSphere DRS, visit the <a href="https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.resmgmt.doc/GUID-827DBD6D-08B7-4411-9214-9E126671457F.html" target="_blank" rel="noopener noreferrer">VMware official website</a>.</p>
</li><li>Restored to a new location<p>When data is restored to a new location, the system performs full restoration and restores the backup data to a specified new path. That is, the user specifies the ESXi host or cluster where the new VM is located and the corresponding datastore.</p>
<p>When data is restored to a new location, if the new location is a cluster, vSphere DRS must be enabled for the cluster. Otherwise, the restoration cannot be performed. You are advised to select a host in the cluster for restoration or enable vSphere DRS on the vCenter before restoration. For details about how to check or enable vSphere DRS, visit the <a href="https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.resmgmt.doc/GUID-827DBD6D-08B7-4411-9214-9E126671457F.html" target="_blank" rel="noopener noreferrer">VMware official website</a>.</p>
</li></ul>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li id="EN-US_TOPIC_0000002164654302__li0198134611381"><span>Choose <span class="uicontrol" id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002199964685_uicontrol1812933174613"><b><span id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002199964685_text0129103112462"><strong>Explore</strong></span> &gt; <span id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002199964685_text81291431134613"><strong>Copy Data</strong></span> &gt; <span id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002199964685_text860175510430"><strong>Virtualization</strong></span> &gt; <span id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002199964685_text8319371528"><strong>VMware</strong></span></b></span>.</span></li><li><span>You can search for a copy by VM or copy. This section uses a VM as an example.</span><p><p>Click <strong>Resources</strong> to switch to the corresponding page, search for the VM to be restored by name, and click the VM name.</p>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>Copy Data</strong></span></b></span> and select the year, month, and day in sequence to find the copy.</span><p><p>If <span><img src="en-us_image_0000002164814162.png"></span> is displayed below a month or date, copies exist in the month or on the date.</p>
</p></li><li><span>In the row that contains the target copy, choose <span class="uicontrol"><b><span><strong>More</strong></span> &gt; Restore</b></span>.</span></li><li><span>Restore a VM to the original location or a new location.</span><p><ul><li>Restore the VM to the original location.<ol type="a"><li>Set <strong>Restore To</strong> to <span class="uicontrol"><b><span><strong>Original location</strong></span></b></span>.</li><li>Set a name for the new VM.<p>The name of the new VM cannot be the same as that of other VMs on the vCenter Server or ESXi host.</p>
</li><li id="EN-US_TOPIC_0000002164654302__li1221013597276">Choose whether to enable the <strong id="EN-US_TOPIC_0000002164654302__b123812572599">Enable Network Adapters</strong> function, which is disabled by default.<ul id="EN-US_TOPIC_0000002164654302__ul10473512087"><li id="EN-US_TOPIC_0000002164654302__li64731812984">If this option is disabled, all network adapters of the VM are disconnected after the restoration. To remotely log in to the VM, you need to select <strong id="EN-US_TOPIC_0000002164654302__b117251644183410">Connect</strong> for the network adapters on the vSphere or ESXi page after the restoration. For details, see <a href="en-us_topic_0000002164654230.html">How Do I Enable the Network Adapter of a VMware VM?</a>.</li><li id="EN-US_TOPIC_0000002164654302__li587672511810">If this option is enabled and the original VM of the copy still exists, a network conflict may occur between the new VM and the original VM after the restoration. In this case, check the network of the new VM after VM restoration.</li></ul>
</li><li id="EN-US_TOPIC_0000002164654302__li1964792011356">Choose whether to enable <strong id="EN-US_TOPIC_0000002164654302__b0157195510112">Power on Automatically After Restoration</strong>, which is enabled by default.</li><li>Choose whether to enable <strong>Delete original VM</strong>, which is disabled by default.<p>If this option is enabled, the original VM will be deleted after the VM is successfully restored. Otherwise, the original VM will be retained.</p>
</li><li id="EN-US_TOPIC_0000002164654302__li1372711219491">You can decide whether to enable <span class="uicontrol" id="EN-US_TOPIC_0000002164654302__uicontrol929613123508"><b>NBDSSL-based Restore</b></span>, which is enabled by default.<div class="p" id="EN-US_TOPIC_0000002164654302__p12928266516">In SAN transmission mode:<ul id="EN-US_TOPIC_0000002164654302__ul565274616519"><li id="EN-US_TOPIC_0000002164654302__li14652184635110">After this function is enabled, if backup copy disks contain thick provision lazy zeroed or thin provisioned disks, the NBDSSL mode is used for restoration. If disks are all thick provision eager zeroed disks, the SAN mode is used for restoration.</li><li id="EN-US_TOPIC_0000002164654302__li1365234645115">After this function is disabled, the SAN mode is used for restoration using backup copies.</li></ul>
</div>
</li><li id="EN-US_TOPIC_0000002164654302__li1992593514010">For 1.6.0 and later versions: Choose whether to enable <strong id="EN-US_TOPIC_0000002164654302__b877015150377">Snapshot Generation</strong>, which is enabled by default.<p id="EN-US_TOPIC_0000002164654302__p188232028217">If this function is enabled, operations on VMs during restoration will not affect the restoration result. If this function is disabled, the restoration speed will be improved.</p>
</li><li id="EN-US_TOPIC_0000002164654302__li181973512199">For 1.6.0 and later versions: You can specify a client for executing restoration jobs. If no client is specified, the system automatically allocates a client.</li><li>Click <span class="uicontrol"><b>OK</b></span>.</li></ol>
</li><li>Restore the VM to a new location.<ol type="a"><li>Select <span class="uicontrol"><b><span><strong>New location</strong></span></b></span> for restoring the VM.</li><li>Set a name for the new VM.<p>The name of the new VM cannot be the same as that of other VMs on the vCenter Server or ESXi host.</p>
</li><li>Set information about a new location to which the VM is restored.
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>New location information</caption><colgroup><col style="width:29.87%"><col style="width:70.13000000000001%"></colgroup><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.87%" id="mcps1.3.3.2.5.2.1.2.1.3.1.2.3.1.1"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.13000000000001%" id="mcps1.3.3.2.5.2.1.2.1.3.1.2.3.1.2"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.87%" headers="mcps1.3.3.2.5.2.1.2.1.3.1.2.3.1.1 "><p><span><strong>Compute Location</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="70.13000000000001%" headers="mcps1.3.3.2.5.2.1.2.1.3.1.2.3.1.2 "><p>Compute resources used by the VM after being restored.</p>
<p>Select a cluster, host, resource pool, or vAPP as the target.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>The VMware version of the target ESXi host cannot be earlier than that of the source ESXi host.</li><li>For 1.6.0 and later versions: If the disks in the copy contain RDM disks, select a VMware host system for <strong>Compute Location</strong>. Otherwise, the disk type of <strong>VM Disk Files</strong> can only be <strong>Common disk</strong>.</li></ul>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.87%" headers="mcps1.3.3.2.5.2.1.2.1.3.1.2.3.1.1 "><p><span><strong>Storage Location</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="70.13000000000001%" headers="mcps1.3.3.2.5.2.1.2.1.3.1.2.3.1.2 "><p>Datastore to which the VM configuration files and disk data are restored.</p>
<ul><li><span><strong>Different Datastores</strong></span><ul><li><span><strong>VM Profile</strong></span>: indicates the datastore where the VM configuration files (excluding the VMDK file) are located.</li><li><span><strong>VM Disk Files</strong></span>: indicates the datastore where the virtual disk data is stored.<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>To improve data security, you can store the VM configuration files on an independent datastore and disk data on another datastore.</p>
</div></div>
</li></ul>
</li><li><span><strong>Same Datastore</strong></span><p>The VM configuration files and all virtual disk data are stored in the same datastore.</p>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.87%" headers="mcps1.3.3.2.5.2.1.2.1.3.1.2.3.1.1 "><p><span><strong>Network Location</strong></span></p>
</td>
<td class="cellrowborder" valign="top" width="70.13000000000001%" headers="mcps1.3.3.2.5.2.1.2.1.3.1.2.3.1.2 "><p>Network to which a VM is connected after being restored.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Choose whether to enable the <strong id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_b123812572599">Enable Network Adapters</strong> function, which is disabled by default.<ul id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_ul10473512087"><li id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_li64731812984">If this option is disabled, all network adapters of the VM are disconnected after the restoration. To remotely log in to the VM, you need to select <strong id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_b117251644183410">Connect</strong> for the network adapters on the vSphere or ESXi page after the restoration. For details, see <a href="en-us_topic_0000002164654230.html">How Do I Enable the Network Adapter of a VMware VM?</a>.</li><li id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_li587672511810">If this option is enabled and the original VM of the copy still exists, a network conflict may occur between the new VM and the original VM after the restoration. In this case, check the network of the new VM after VM restoration.</li></ul>
</li><li>Choose whether to enable <strong id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_b0157195510112">Power on Automatically After Restoration</strong>, which is enabled by default.</li><li>You can decide whether to enable <span class="uicontrol" id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_uicontrol929613123508"><b>NBDSSL-based Restore</b></span>, which is enabled by default.<div class="p" id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_p12928266516">In SAN transmission mode:<ul id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_ul565274616519"><li id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_li14652184635110">After this function is enabled, if backup copy disks contain thick provision lazy zeroed or thin provisioned disks, the NBDSSL mode is used for restoration. If disks are all thick provision eager zeroed disks, the SAN mode is used for restoration.</li><li id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_li1365234645115">After this function is disabled, the SAN mode is used for restoration using backup copies.</li></ul>
</div>
</li><li>For 1.6.0 and later versions: Choose whether to enable <strong id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_b877015150377">Snapshot Generation</strong>, which is enabled by default.<p id="EN-US_TOPIC_0000002164654302__en-us_topic_0000002164654302_p188232028217">If this function is enabled, operations on VMs during restoration will not affect the restoration result. If this function is disabled, the restoration speed will be improved.</p>
</li><li>For 1.6.0 and later versions: You can specify a client for executing restoration jobs. If no client is specified, the system automatically allocates a client.</li></ol>
</li></ul>
</p></li><li id="EN-US_TOPIC_0000002164654302__li1168243513296"><span>Click <span class="uicontrol" id="EN-US_TOPIC_0000002164654302__uicontrol183011741155012"><b>OK</b></span>.</span></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0000002200055021.html">Restoration</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>