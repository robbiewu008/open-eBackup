<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->


<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Adding an Internal Communication Network for a Member Node (Applicable to 1.6.0 and Later Versions)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="HA00014.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="30-OceanProtect Appliance 1.5.0-1.6.0 Help Center">
<meta name="DC.Publisher" content="20241029">
<meta name="documenttype" content="usermanual">
<meta name="prodname" content="csbs">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="HA00018">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>Adding an Internal Communication Network for a Member Node (Applicable to 1.6.0 and Later Versions)</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="HA00018"></a><a name="HA00018"></a>

<h1 class="topictitle1">Adding an Internal Communication Network for a Member Node (Applicable to 1.6.0 and Later Versions)</h1>
<div><p>If you want to use cluster HA, perform operations in this section to add an internal communication network for a member node to build a multi-cluster environment.</p>
<div class="section"><h4 class="sectiontitle">Prerequisites</h4><ul><li>Before configuring cluster HA, ensure that Network Time Protocol (NTP) automatic synchronization has been configured for each node on DeviceManager. For details, see <i><cite>OceanProtect DataBackup 1.5.0-1.6.0 Administrator Guide</cite></i>"Setting the Device Time" in the .</li><li>At least two IP addresses have been reserved for the internal communication network of a member node.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Precautions</h4><ul><li>After the internal communication network of a member node is added, the system restarts and backup jobs may fail.</li><li>After the internal communication network is added and member nodes are added, the internal communication network cannot be modified. Exercise caution when performing this operation.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>Choose <span class="menucascade"><b><span class="uicontrol"><span><strong>System</strong></span></span></b> &gt; <b><span class="uicontrol"><span><strong>Infrastructure</strong></span></span></b> &gt; <b><span class="uicontrol"><span><strong>Cluster Management</strong></span></span></b></span>.</span></li><li><span>Click <span class="uicontrol"><b><span><strong>Backup Cluster</strong></span></b></span>.</span></li><li><span>Locate the row that contains the member node to be added, and choose <span class="menucascade"><b><span class="uicontrol"><span><strong>More</strong></span></span></b> &gt; <b><span class="uicontrol"><span><strong>Add Internal Communication Network</strong></span></span></b></span>.</span><p><p></p>
<p></p>
</p></li><li><span>Configure the internal communication network.</span><p><p id="HA00018__ha00017_p112498365583"><a href="#HA00018__ha00017_table1271775219581">Table 1</a> describes the parameters.</p>

<div class="tablenoborder"><a name="HA00018__ha00017_table1271775219581"></a><a name="ha00017_table1271775219581"></a><table cellpadding="4" cellspacing="0" summary="" id="HA00018__ha00017_table1271775219581" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Internal communication network parameters</caption><colgroup><col style="width:27.51%"><col style="width:72.49%"></colgroup><thead align="left"><tr id="HA00018__ha00017_row671735210582"><th align="left" class="cellrowborder" valign="top" width="27.51%" id="mcps1.3.4.2.4.2.2.2.3.1.1"><p id="HA00018__ha00017_p127170527585">Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="72.49%" id="mcps1.3.4.2.4.2.2.2.3.1.2"><p id="HA00018__ha00017_p14717105210582">Description</p>
</th>
</tr>
</thead>
<tbody><tr id="HA00018__ha00017_row1671716529587"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p1850122675214">IP Address Type</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p950162665220">The value can be <span class="uicontrol" id="HA00018__ha00017_uicontrol4501162610524"><b>IPv4</b></span> or <span class="uicontrol" id="HA00018__ha00017_uicontrol55015269529"><b>IPv6</b></span>.</p>
</td>
</tr>
<tr id="HA00018__ha00017_row5717175255813"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p11501172611521">Subnet Mask</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p65012269528">Subnet mask of the IPv4 address of the internal communication network.</p>
<div class="note" id="HA00018__ha00017_note450192645218"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="HA00018__ha00017_p1950118268527">This parameter is available only when <strong id="HA00018__ha00017_b16581274291">IP Address Type</strong> is set to <strong id="HA00018__ha00017_b258177192919">IPv4</strong>.</p>
</div></div>
</td>
</tr>
<tr id="HA00018__ha00017_row15190524915"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p128231221797">Prefix</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p1823023915">Prefix of the IPv6 address of the internal communication network.</p>
<div class="note" id="HA00018__ha00017_note182317217910"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="HA00018__ha00017_p38231421592">This parameter is available only when <strong id="HA00018__ha00017_b1494524162914">IP Address Type</strong> is set to <strong id="HA00018__ha00017_b59451441162916">IPv6</strong>.</p>
</div></div>
</td>
</tr>
<tr id="HA00018__ha00017_row97178526583"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p138362301630">IP Address1</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p150162614524">User-defined IP address 1 of the internal communication network, which is used as the IP address of the internal database. Ensure that this address is different from other IP addresses. Otherwise, an IP network conflict occurs.</p>
</td>
</tr>
<tr id="HA00018__ha00017_row4677100615"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p166832818319">IP Address2</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p1567612426615">User-defined IP address 2 of the internal communication network, which is used as the IP address of the internal infrastructure. Ensure that this address is different from other IP addresses. Otherwise, an IP network conflict occurs.</p>
</td>
</tr>
<tr id="HA00018__ha00017_row105601815118"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p19485114617">Gateway</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p195601811211">Gateway of the internal communication network.</p>
</td>
</tr>
<tr id="HA00018__ha00017_row1895291817"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p11924719611">Enable VLAN</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p15227685919">This option is deselected by default. Before selecting this option, ensure that the VLAN has been configured for the service. After this option is selected, the configured service ports will apply to the VLAN.</p>
</td>
</tr>
<tr id="HA00018__ha00017_row19633719804"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p186331219705">VLAN ID</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p1363321911019">This parameter is required after <strong id="HA00018__ha00017_b799351464415">Enable VLAN</strong> is selected. This ID is a new ID defined by the user when the VLAN is configured.</p>
<p id="HA00018__ha00017_p11738192021312">The VLAN ID ranges from 1 to 4094. There can be one or more VLAN IDs. Use commas (,) to separate multiple VLAN IDs.</p>
</td>
</tr>
<tr id="HA00018__ha00017_row13874315101"><td class="cellrowborder" valign="top" width="27.51%" headers="mcps1.3.4.2.4.2.2.2.3.1.1 "><p id="HA00018__ha00017_p4874510108">Port Type</p>
</td>
<td class="cellrowborder" valign="top" width="72.49%" headers="mcps1.3.4.2.4.2.2.2.3.1.2 "><p id="HA00018__ha00017_p1087415101014">The value can be <span class="uicontrol" id="HA00018__ha00017_uicontrol487917374114"><b><span id="HA00018__ha00017_text0324135641118"><strong>Ethernet Port</strong></span></b></span> or <span class="uicontrol" id="HA00018__ha00017_uicontrol2127491215"><b><span id="HA00018__ha00017_text27091153127"><strong>Bond Port</strong></span></b></span>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>After selecting <strong id="HA00018__ha00017_b1364717387011">Port Type</strong>, select service ports in the <span class="uicontrol" id="HA00018__ha00017_uicontrol299760201715"><b>Available Ports</b></span> area. You can select one or more ports to configure service ports. In the <span class="uicontrol" id="HA00018__ha00017_uicontrol4460153101611"><b>Selected Ports</b></span> area, click <span><img id="HA00018__ha00017_image12321110183" src="en-us_image_0000001959449433.png"></span> in the row where the port to be removed resides to remove it from the <span class="uicontrol" id="HA00018__ha00017_uicontrol1816013477188"><b>Selected Ports</b></span> area, or click <span class="uicontrol" id="HA00018__ha00017_uicontrol197077118194"><b>Delete All</b></span> to remove all ports from the <span class="uicontrol" id="HA00018__ha00017_uicontrol682619781918"><b>Selected Ports</b></span> area.</span><p><p id="HA00018__ha00017_p154109180412">After selecting <strong id="HA00018__ha00017_b544813511174">Port Type</strong>, you can perform the following operations:</p>
<ul id="HA00018__ha00017_ul4168101284719"><li id="HA00018__ha00017_li161691123478">Port selection: You can select <span class="uicontrol" id="HA00018__ha00017_uicontrol1843105516496"><b>Creating a port</b></span> or <span class="uicontrol" id="HA00018__ha00017_uicontrol239791105017"><b>Reusing the configured port</b></span>.</li><li id="HA00018__ha00017_li6280184155013"><strong id="HA00018__ha00017_b458011617451">Port Sharing</strong> (optional): This option is available when <span class="uicontrol" id="HA00018__ha00017_uicontrol225594865817"><b>Port Type</b></span> is set to <span class="uicontrol" id="HA00018__ha00017_uicontrol089964425819"><b>Bond Port</b></span>. If <span class="uicontrol" id="HA00018__ha00017_uicontrol756410491518"><b>Port Sharing</b></span> is enabled, the number of required ports can be reduced, but the reliability of the internal communication network decreases.</li></ul>
<div class="note" id="HA00018__ha00017_note89765103387"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="HA00018__ha00017_p4727041145210">If multiple sets of the <span id="HA00018__ha00017_text1278956184819">OceanProtect</span> form a cluster, reserve two additional IP addresses for each node to synchronize configuration information in the cluster.</p>
</div></div>
</p></li><li><span>(Optional) In the <strong>Advanced</strong> area, select <span class="uicontrol"><b>Configure Route</b></span> to configure a route for the internal communication network. Choose <span class="uicontrol"><b>Add</b></span> to add the corresponding route. The route type can be <span class="uicontrol"><b>Network segment route</b></span>, <span class="uicontrol"><b>Host route</b></span>, or <span class="uicontrol"><b>Default route</b></span>.</span><p><p></p>
<div class="p"><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If a gateway has been configured for the logical port, default routes cannot be added.</p>
</div></div>
</div>
</p></li><li><span>Click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span></li><li><span>In the <span class="uicontrol"><b><span><strong>Danger</strong></span></b></span> dialog box that is displayed, confirm the information, select <span class="uicontrol"><b><span><strong>I have read and understand the consequences associated with performing this operation.</strong></span></b></span>, and click <span class="uicontrol"><b><span><strong>OK</strong></span></b></span>.</span><p><p><span><img src="en-us_image_0000001935631166.png"></span></p>
<p></p>
</p></li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="HA00014.html">Configuring Cluster HA</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>