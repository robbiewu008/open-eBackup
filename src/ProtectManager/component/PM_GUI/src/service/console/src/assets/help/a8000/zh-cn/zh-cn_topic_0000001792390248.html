
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="开启nginx端口的输入输出功能">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ZH-CN_TOPIC_0000001792390248">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>开启nginx端口的输入输出功能</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="ZH-CN_TOPIC_0000001792390248"></a><a name="ZH-CN_TOPIC_0000001792390248"></a>

<h1 class="topictitle1">开启nginx端口的输入输出功能</h1>
<div><p>当代理主机开启了防火墙功能，请参考本节打开nginx侦听端口的输入输出功能，nginx侦听端口是OceanProtect与代理主机的通信端口。本节以Red Hat Enterprise Linux Server release 7.2版本为例进行说明。如果未开启防火墙或者受保护资源不是FusionCompute、Oracle、HDFS、HBase、Hive、Elasticsearch、ClickHouse、Redis、PostgreSQL、MySQL/MariaDB、GaussDB T、GaussDB(DWS)、华为云Stack GaussDB、openGauss、Dameng、对象存储、NAS文件、SAP HANA、Kingbase、MongoDB、TDSQL、GBase 8a、TiDB、GaussDB、OceanBase、华为云Stack、Kubernetes FlexVolume、OpenStack、DB2或文件集，请忽略本节。</p>
<div class="section"><h4 class="sectiontitle">操作步骤</h4><ol><li><span>使用PuTTY，登录代理主机。</span></li><li><span>执行以下命令查看是否已开启防火墙。</span><p><p><strong>systemctl status firewalld</strong></p>
<p>当回显显示“Active: active (running)”时，表示已开启防火墙，继续执行后续步骤。否则结束处理。</p>
</p></li><li><span>执行以下命令查看nginx侦听端口。</span><p><p><strong>netstat -anp | grep nginx</strong></p>
<div class="p">示例如下，<span class="parmvalue">“59521”</span>为nginx的侦听端口。<pre class="screen">[root@localhost <font style="font-size:8pt" Face="Courier New" >~</font>]# netstat -anp | grep nginx
tcp        0      0 192.168.97.167:59521       0.0.0.0:*               LISTEN      2483/nginx: master
unix  3      [ ]         STREAM     CONNECTED     20149    2483/nginx: master
unix  3      [ ]         STREAM     CONNECTED     20148    2483/nginx: master</pre>
</div>
</p></li><li><span>执行以下命令查询已开启输入输出功能的端口列表中是否包含nginx侦听端口。</span><p><p><strong>firewall-cmd --permanent --zone=public --list-ports</strong></p>
<p>回显中包含nginx侦听端口，则处理结束。否则继续执行后续步骤。</p>
</p></li><li><span>执行以下命令开启nginx侦听端口的输入输出功能。</span><p><p>以端口号<span class="parmvalue">“59521”</span>为例说明。</p>
<p><strong>firewall-cmd --zone=public --add-port=</strong><em>59521</em><strong>/tcp --permanent</strong></p>
</p></li><li><span>执行以下命令重启防火墙。</span><p><p><strong>firewall-cmd --reload</strong></p>
</p></li></ol>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div></body>
</html>