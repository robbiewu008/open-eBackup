<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  This file is a part of the open-eBackup project.
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at
  http://mozilla.org/MPL/2.0/.
  
  Copyright (c) [2024] Huawei Technologies Co.,Ltd.
  
  THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
  EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
  MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
  -->

<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DC.Type" content="topic">
  <meta name="DC.Title" content="Residual Resources Exist for a Restoration Job">
  <meta name="DC.Format" content="XHTML">
  <meta name="DC.Identifier" content="EN-US_TOPIC_0000002053451505">
  <meta name="DC.Language" content="en-us">
  <link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
  <title>Residual Resources Exist for a Restoration Job</title>
 </head>
 <body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px">
  <a name="EN-US_TOPIC_0000002053451505"></a><a name="EN-US_TOPIC_0000002053451505"></a>
  <h1 class="topictitle1">Residual Resources Exist for a Restoration Job</h1>
  <div>
   <p>During table-level restoration, an auxiliary database instance is generated on the target host. When the restoration job is complete, the generated auxiliary database instance is deleted automatically. If the restoration job details contain information indicating that residual resources may exist for the restoration job, you need to manually delete the residual resources.</p>
   <div class="section">
    <h4 class="sectiontitle">Procedure</h4>
    <ol>
     <li id="EN-US_TOPIC_0000002053451505__li10370134113596"><a name="EN-US_TOPIC_0000002053451505__li10370134113596"></a><a name="li10370134113596"></a><span>Check whether there are residual resources on the target host.</span><p></p>
      <ol type="a">
       <li>Log in to the OceanProtect WebUI.</li>
       <li>Obtain the SID of the auxiliary database instance from the restoration job details page.</li>
       <li>Check whether there are residual resources on the host.
        <ol class="substepthirdol">
         <li>Use PuTTY to log in to the Oracle database host.</li>
         <li>Run the following command to switch to user <strong>oracle</strong>:<pre class="screen">su - oracle</pre></li>
         <li>Run the following commands to check whether resources related to the auxiliary database instance exist on the host. In this example, <em>Instance SID</em> is set to <strong>hw1726111726</strong>.<pre class="screen">find $ORACLE_BASE/ -iname <em>Instance SID</em>
find $ORACLE_BASE/* -iname <em>'*hw1726111726*'</em> | grep -v admin | grep -v oradata</pre> <p>If the residual resource path is displayed in the command output, residual resources exist.</p> <p>If the following information is displayed, residual resources of secondary database instance <strong>hw1726111726</strong> exist.</p> <pre class="screen">[oracle@adg1 ~]$ find $ORACLE_BASE/ -iname <em>hw1726111726</em>
/u01/app/oracle_base/diag/rdbms/hw1726111726
/u01/app/oracle_base/diag/rdbms/hw1726111726/hw1726111726
/u01/app/oracle_base/admin/hw1726111726
[oracle@adg1 ~]$
[oracle@adg1 ~]$ find $ORACLE_BASE/* -iname <em>'*hw1726111726*'</em> | grep -v admin | grep -v oradata
/u01/app/oracle_base/dbhome_1/dbs/inithw1726111726.ora
/u01/app/oracle_base/dbhome_1/dbs/hc_hw1726111726.dat
/u01/app/oracle_base/dbhome_1/dbs/lkHW1726111726
/u01/app/oracle_base/dbhome_1/rdbms/log/hw1726111726_ora_11840.trc
/u01/app/oracle_base/dbhome_1/rdbms/audit/hw1726111726_ora_11768_20240912112848327066143795.aud
/u01/app/oracle_base/dbhome_1/rdbms/audit/hw1726111726_ora_11840_20240912112849361156143795.aud
/u01/app/oracle_base/dbhome_1/rdbms/audit/hw1726111726_ora_17518_20240912113510572998143795.aud
/u01/app/oracle_base/dbhome_1/rdbms/audit/hw1726111726_ora_17604_20240912113510751735143795.aud
/u01/app/oracle_base/dbhome_1/rdbms/audit/hw1726111726_ora_23101_20240912113527045619143795.aud
/u01/app/oracle_base/dbhome_1/rdbms/audit/hw1726111726_ora_24116_20240912113531006770143795.aud
......
[oracle@adg1 ~]$</pre></li>
        </ol></li>
      </ol> <p></p></li>
     <li><span>Shut down the database mounted to the host.</span><p></p>
      <ol type="a">
       <li>Use PuTTY to log in to the Oracle database host.</li>
       <li>Run the following command to switch to user <strong id="EN-US_TOPIC_0000002053451505__oracle_gud_0095_b16255161422315">oracle</strong>:<p id="EN-US_TOPIC_0000002053451505__oracle_gud_0095_p139165195318"><strong id="EN-US_TOPIC_0000002053451505__oracle_gud_0095_b86201184533">su - oracle</strong></p></li>
       <li>Run the following commands to clear the residual resources of the auxiliary database instance. In this example, <em>Instance SID</em> is set to <strong>hw1726111726</strong>.<pre class="screen">find $ORACLE_BASE/ -iname <em><strong>Instance SID</strong></em><em><strong> </strong></em>-exec rm -rf {} \;
find $ORACLE_BASE/* -iname '*hw1726111726*' | grep -v admin | grep -v oradata | xargs rm -rf</pre> <p>If the following information is displayed, the residual resources of the auxiliary database instance have been cleared. You can perform <a href="#EN-US_TOPIC_0000002053451505__li10370134113596">1</a> to check whether the residual resources have been cleared.</p> <pre class="screen">[oracle@adg1 ~]$ find $ORACLE_BASE/ -iname hw1726111726  -exec rm -rf {} \;
find: '/u01/app/oracle_base/diag/rdbms/hw1726111726': No such file or directory
find: '/u01/app/oracle_base/admin/hw1726111726': No such file or directory
[oracle@adg1 ~]$ find $ORACLE_BASE/ -iname hw1726111726
[oracle@adg1 ~]$
[oracle@adg1 ~]$ find $ORACLE_BASE/* -iname '*hw1726111726*' | grep -v admin | grep -v oradata | xargs rm -rf
[oracle@adg1 ~]$
[oracle@adg1 ~]$ find $ORACLE_BASE/* -iname '*hw1726111726*' | grep -v admin | grep -v oradata
[oracle@adg1 ~]$</pre></li>
      </ol> <p></p></li>
    </ol>
   </div>
   <p></p>
  </div>
 </body>
</html>