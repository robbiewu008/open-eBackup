TOP_DIR=${AGENT_ROOT}
BIN_DIR=${AGENT_ROOT}/bin
PLUGINS_DIR=${AGENT_ROOT}/bin/plugins

SRC_AGENT_DIR = ${TOP_DIR}/src/src/agent
SRC_ROOT_EXEC_DIR = ${TOP_DIR}/src/src/rootexec
SRC_CRYPTO_DIR = ${TOP_DIR}/src/src/tools/crypto
SRC_SCRIPTSIGN_DIR = ${TOP_DIR}/src/src/tools/scriptsign
SRC_DATAMIGRATION_DIR = ${TOP_DIR}/src/src/tools/datamigration
SRC_MONITOR_DIR = ${TOP_DIR}/src/src/tools/monitor
SRC_XMLCFG_DIR = ${TOP_DIR}/src/src/tools/xmlcfg
SRC_AGENTCLI_DIR = ${TOP_DIR}/src/src/tools/agentcli
SRC_GETINPUT_DIR = ${TOP_DIR}/src/src/tools/getinput
SRC_APPS_DIR = ${TOP_DIR}/src/src/apps
SRC_APPS_DB2_DIR = ${TOP_DIR}/src/src/apps/db2
SRC_APPS_ORACLE_DIR = ${TOP_DIR}/src/src/apps/oracle
SRC_APPS_RESTORE_DIR = ${TOP_DIR}/src/src/apps/restore
SRC_APPS_CACHE_DIR = ${TOP_DIR}/src/src/apps/cache
SRC_APPS_SYBASE_DIR = ${TOP_DIR}/src/src/apps/sybase
SRC_APPS_HANA_DIR = ${TOP_DIR}/src/src/apps/hana
SRC_APPS_APP_DIR = ${TOP_DIR}/src/src/apps/app
SRC_APPS_ORACLENATIVE_DIR = ${TOP_DIR}/src/src/apps/oraclenative
SRC_APPS_VMWARENATIVE_DIR = ${TOP_DIR}/src/src/apps/vmwarenative
SRC_ARRAY_DIR = ${TOP_DIR}/src/src/array
SRC_CLUSTER_DIR = ${TOP_DIR}/src/src/cluster
SRC_COMMON_DIR = ${TOP_DIR}/src/src/common
SRC_DEVICE_DIR = ${TOP_DIR}/src/src/device
SRC_HOST_DIR = ${TOP_DIR}/src/src/host
SRC_MOBILITY_DIR = ${TOP_DIR}/src/src/mobility
SRC_UPGRADEKERNEL_DIR = ${TOP_DIR}/src/src/tools/driverTools/UpgradeKernel
SRC_PLUGINFX_DIR = ${TOP_DIR}/src/src/pluginfx
SRC_PLUGINS_DIR = ${TOP_DIR}/src/src/plugins
SRC_PLUGINS_DEVICE_DIR = ${TOP_DIR}/src/src/plugins/device
SRC_PLUGINS_HOST_DIR = ${TOP_DIR}/src/src/plugins/host
SRC_PLUGINS_DB2_DIR = ${TOP_DIR}/src/src/plugins/db2
SRC_PLUGINS_ORACLE_DIR = ${TOP_DIR}/src/src/plugins/oracle
SRC_PLUGINS_RESTORE_DIR = ${TOP_DIR}/src/src/plugins/restore
SRC_PLUGINS_CLUSTER_DIR = ${TOP_DIR}/src/src/plugins/cluster
SRC_PLUGINS_CACHE_DIR = ${TOP_DIR}/src/src/plugins/cache
SRC_PLUGINS_SYBASE_DIR = ${TOP_DIR}/src/src/plugins/sybase
SRC_PLUGINS_HANA_DIR = ${TOP_DIR}/src/src/plugins/hana
SRC_PLUGINS_APP_DIR = ${TOP_DIR}/src/src/plugins/app
SRC_PLUGINS_MOBILITY_DIR = ${TOP_DIR}/src/src/plugins/mobility
SRC_PLUGINS_DPPSERVER_DIR = ${TOP_DIR}/src/src/plugins/dppserver
SRC_PLUGINS_ORACLENATIVE_DIR = ${TOP_DIR}/src/src/plugins/oraclenative
SRC_PLUGINS_VMWARENATIVE_DIR = ${TOP_DIR}/src/src/plugins/vmwarenative
SRC_MESSAGE_DIR = ${TOP_DIR}/src/src/message
SRC_CURLCLIENT_DIR = ${TOP_DIR}/src/src/curlclient
SRC_ALARM_DIR = ${TOP_DIR}/src/src/alarm
SRC_TASKMANAGE_DIR = ${TOP_DIR}/src/src/taskmanager
SRC_SECUREC_DIR = ${TOP_DIR}/platform/securec/src
SRC_JSON_DIR = ${TOP_DIR}/open_src/jsoncpp/src/lib_json
SRC_TINYXML_DIR = ${TOP_DIR}/open_src/tinyxml

BASE_INC = ${TOP_DIR}/src/inc
INC_SECUREC_DIR = ${TOP_DIR}/platform/securec/include
INC_KMC_MAIN_DIR = ${TOP_DIR}/platform/kmc
INC_KMC_INC_DIR = ${TOP_DIR}/platform/kmc/include

OPEN_SRC_DIR = ${TOP_DIR}/open_src
PLATORM_SRC_DIR = ${TOP_DIR}/platform
BASE_OPEN_INC = ${OPEN_SRC_DIR}
OPEN_OPENSSL_DIR = ${OPEN_SRC_DIR}/openssl
OPEN_SNMP_DIR = ${OPEN_SRC_DIR}/snmp++
OPEN_FCGI_DIR = ${OPEN_SRC_DIR}/fcgi
OPEN_SQLITE_DIR = ${OPEN_SRC_DIR}/sqlite
OPEN_FCGI_DIR = ${OPEN_SRC_DIR}/fcgi
OPEN_JSON_DIR = ${OPEN_SRC_DIR}/jsoncpp
OPEN_TINYXML_DIR = ${OPEN_SRC_DIR}/tinyxml
OPEN_CURL_DIR = ${OPEN_SRC_DIR}/curl
SRC_OPEN_SQLITE_DIR = ${OPEN_SQLITE_DIR}
INC_OPEN_SQLITE_DIR = ${OPEN_SQLITE_DIR}
INC_OPEN_OPENSSL_DIR = ${OPEN_OPENSSL_DIR}/include
INC_OPEN_SNMP_DIR = ${OPEN_SNMP_DIR}/include
INC_OPEN_SNMP_MAIN_DIR = ${OPEN_SNMP_DIR}
INC_OPEN_JSON_DIR = ${OPEN_JSON_DIR}/include
SRC_OPEN_TINYXML_DIR = ${OPEN_TINYXML_DIR}
INC_OPEN_TINYXML_DIR = ${OPEN_TINYXML_DIR}
INC_OPEN_CURL_DIR = ${OPEN_CURL_DIR}/include/
OPEN_CURL_LIB_DIR = ${OPEN_CURL_DIR}/lib/.libs
OPEN_OPENSSL_LIB_DIR = ${OPEN_OPENSSL_DIR}/.openssl/lib
OPEN_SNMP_LIB_DIR = ${OPEN_SNMP_DIR}/src/.libs
OPEN_FCGI_LIB_DIR = ${OPEN_FCGI_DIR}/libfcgi/.libs
KMC_LIB_DIR = ${PLATORM_SRC_DIR}/kmc/lib

OBJ_DIR = ${TOP_DIR}/obj
OBJ_AGENT_DIR = ${OBJ_DIR}/agent
OBJ_ROOT_EXEC_DIR = ${OBJ_DIR}/rootexec
OBJ_MONITOR_DIR = ${OBJ_DIR}/monitor
OBJ_CRYPTO_DIR = ${OBJ_DIR}/crypto
OBJ_SCRIPTSIGN_DIR = ${OBJ_DIR}/scriptsign
OBJ_DATAMIGRATION_DIR = ${OBJ_DIR}/datamigration
OBJ_XMLCFG_DIR = ${OBJ_DIR}/xmlcfg
OBJ_AGENTCLI_DIR = ${OBJ_DIR}/agentcli
OBJ_GETINPUT_DIR = ${OBJ_DIR}/getinput
OBJ_APPS_DIR = ${OBJ_DIR}/apps
OBJ_APPS_DB2_DIR = ${OBJ_DIR}/apps/db2
OBJ_APPS_ORACLE_DIR = ${OBJ_DIR}/apps/oracle
OBJ_APPS_RESTORE_DIR = ${OBJ_DIR}/apps/restore
OBJ_APPS_CACHE_DIR = ${OBJ_DIR}/apps/cache
OBJ_APPS_SYBASE_DIR = ${OBJ_DIR}/apps/sybase
OBJ_APPS_HANA_DIR = ${OBJ_DIR}/apps/hana
OBJ_APPS_APP_DIR = ${OBJ_DIR}/apps/app
OBJ_APPS_ORACLENATIVE_DIR = ${OBJ_DIR}/apps/oraclenative
OBJ_APPS_VMWARENATIVE_DIR = ${OBJ_DIR}/apps/vmwarenative
OBJ_ARRAY_DIR = ${OBJ_DIR}/array
OBJ_CLUSTER_DIR = ${OBJ_DIR}/cluster
OBJ_COMMON_DIR = ${OBJ_DIR}/common
OBJ_DEVICE_DIR = ${OBJ_DIR}/device
OBJ_HOST_DIR = ${OBJ_DIR}/host
OBJ_MOBILITY_DIR = ${OBJ_DIR}/mobility
OBJ_UPGRADEKERNEL_DIR = ${OBJ_DIR}/upgradeKernel
OBJ_PLUGINFX_DIR = ${OBJ_DIR}/pluginfx
OBJ_PLUGINS_DIR = ${OBJ_DIR}/plugins
OBJ_PLUGINS_DEVICE_DIR = ${OBJ_DIR}/plugins/device
OBJ_PLUGINS_HOST_DIR = ${OBJ_DIR}/plugins/host
OBJ_PLUGINS_DB2_DIR = ${OBJ_DIR}/plugins/db2
OBJ_PLUGINS_ORACLE_DIR = ${OBJ_DIR}/plugins/oracle
OBJ_PLUGINS_RESTORE_DIR = ${OBJ_DIR}/plugins/restore
OBJ_PLUGINS_CLUSTER_DIR = ${OBJ_DIR}/plugins/cluster
OBJ_PLUGINS_CACHE_DIR = ${OBJ_DIR}/plugins/cache
OBJ_PLUGINS_SYBASE_DIR = ${OBJ_DIR}/plugins/sybase
OBJ_PLUGINS_HANA_DIR = ${OBJ_DIR}/plugins/hana
OBJ_PLUGINS_APP_DIR = ${OBJ_DIR}/plugins/app
OBJ_PLUGINS_MOBILITY_DIR = ${OBJ_DIR}/plugins/mobility
OBJ_PLUGINS_DPPSERVER_DIR = ${OBJ_DIR}/plugins/dppserver
OBJ_PLUGINS_ORACLENATIVE_DIR = ${OBJ_DIR}/plugins/oraclenative
OBJ_PLUGINS_VMWARENATIVE_DIR = ${OBJ_DIR}/plugins/vmwarenative
OBJ_MESSAGE_DIR = ${OBJ_DIR}/message
OBJ_CURLCLIENT_DIR = ${OBJ_DIR}/curlclient
OBJ_ALARM_DIR = ${OBJ_DIR}/alarm
OBJ_TASKMANAGER_DIR = ${OBJ_DIR}/taskmanager
OBJ_SQLITE_DIR = ${OBJ_DIR}/sqlite
OBJ_JSON_DIR = ${OBJ_DIR}/json
OBJ_TINYXML_DIR = ${OBJ_DIR}/tinyxml
OBJ_SECUREC_DIR = ${OBJ_DIR}/securec


AGENT_SRCS = $(wildcard ${SRC_AGENT_DIR}/*.cpp)
AGENT_OBJS = $(patsubst ${SRC_AGENT_DIR}/%.cpp, ${OBJ_AGENT_DIR}/%.o, $(AGENT_SRCS))
ROOT_EXEC_SRCS = $(wildcard ${SRC_ROOT_EXEC_DIR}/*.cpp)
ROOT_EXEC_OBJS = $(patsubst ${SRC_ROOT_EXEC_DIR}/%.cpp, ${OBJ_ROOT_EXEC_DIR}/%.o, $(ROOT_EXEC_SRCS))
CRYPTO_SRCS = $(wildcard ${SRC_CRYPTO_DIR}/*.cpp)
CRYPTO_OBJS = $(patsubst ${SRC_CRYPTO_DIR}/%.cpp, ${OBJ_CRYPTO_DIR}/%.o, $(CRYPTO_SRCS))
SCRIPTSIGN_SRCS = $(wildcard ${SRC_SCRIPTSIGN_DIR}/*.cpp)
SCRIPTSIGN_OBJS = $(patsubst ${SRC_SCRIPTSIGN_DIR}/%.cpp, ${OBJ_SCRIPTSIGN_DIR}/%.o, $(SCRIPTSIGN_SRCS))
DATAMIGRATION_SRCS = $(wildcard ${SRC_DATAMIGRATION_DIR}/*.cpp)
DATAMIGRATION_OBJS = $(patsubst ${SRC_DATAMIGRATION_DIR}/%.cpp, ${OBJ_DATAMIGRATION_DIR}/%.o, $(DATAMIGRATION_SRCS))
MONITOR_SRCS = $(wildcard ${SRC_MONITOR_DIR}/*.cpp)
MONITOR_OBJS = $(patsubst ${SRC_MONITOR_DIR}/%.cpp, ${OBJ_MONITOR_DIR}/%.o, $(MONITOR_SRCS))
XMLCFG_SRCS = $(wildcard ${SRC_XMLCFG_DIR}/*.cpp)
XMLCFG_OBJS = $(patsubst ${SRC_XMLCFG_DIR}/%.cpp, ${OBJ_XMLCFG_DIR}/%.o, $(XMLCFG_SRCS))
AGENTCLI_SRCS = $(wildcard ${SRC_AGENTCLI_DIR}/*.cpp)
AGENTCLI_OBJS = $(patsubst ${SRC_AGENTCLI_DIR}/%.cpp, ${OBJ_AGENTCLI_DIR}/%.o, $(AGENTCLI_SRCS))
GETINPUT_SRCS = $(wildcard ${SRC_GETINPUT_DIR}/*.cpp)
GETINPUT_OBJS = $(patsubst ${SRC_GETINPUT_DIR}/%.cpp, ${OBJ_GETINPUT_DIR}/%.o, $(GETINPUT_SRCS))
APPS_DB2_SRCS = $(wildcard ${SRC_APPS_DB2_DIR}/*.cpp)
APPS_DB2_OBJS = $(patsubst ${SRC_APPS_DB2_DIR}/%.cpp, ${OBJ_APPS_DB2_DIR}/%.o, $(APPS_DB2_SRCS))
APPS_ORACLE_SRCS = $(wildcard ${SRC_APPS_ORACLE_DIR}/*.cpp)
APPS_ORACLE_OBJS = $(patsubst ${SRC_APPS_ORACLE_DIR}/%.cpp, ${OBJ_APPS_ORACLE_DIR}/%.o, $(APPS_ORACLE_SRCS))
APPS_RESTORE_SRCS = $(wildcard ${SRC_APPS_RESTORE_DIR}/*.cpp)
APPS_RESTORE_OBJS = $(patsubst ${SRC_APPS_RESTORE_DIR}/%.cpp, ${OBJ_APPS_RESTORE_DIR}/%.o, $(APPS_RESTORE_SRCS))
APPS_CACHE_SRCS = $(wildcard ${SRC_APPS_CACHE_DIR}/*.cpp)
APPS_CACHE_OBJS = $(patsubst ${SRC_APPS_CACHE_DIR}/%.cpp, ${OBJ_APPS_CACHE_DIR}/%.o, $(APPS_CACHE_SRCS))
APPS_SYBASE_SRCS = $(wildcard ${SRC_APPS_SYBASE_DIR}/*.cpp)
APPS_SYBASE_OBJS = $(patsubst ${SRC_APPS_SYBASE_DIR}/%.cpp, ${OBJ_APPS_SYBASE_DIR}/%.o, $(APPS_SYBASE_SRCS))
APPS_HANA_SRCS = $(wildcard ${SRC_APPS_HANA_DIR}/*.cpp)
APPS_HANA_OBJS = $(patsubst ${SRC_APPS_HANA_DIR}/%.cpp, ${OBJ_APPS_HANA_DIR}/%.o, $(APPS_HANA_SRCS))
APPS_APP_SRCS = $(wildcard ${SRC_APPS_APP_DIR}/*.cpp)
APPS_APP_OBJS = $(patsubst ${SRC_APPS_APP_DIR}/%.cpp, ${OBJ_APPS_APP_DIR}/%.o, $(APPS_APP_SRCS))
APPS_ORACLENATIVE_SRCS = $(wildcard ${SRC_APPS_ORACLENATIVE_DIR}/*.cpp)
APPS_ORACLENATIVE_OBJS = $(patsubst ${SRC_APPS_ORACLENATIVE_DIR}/%.cpp, ${OBJ_APPS_ORACLENATIVE_DIR}/%.o, $(APPS_ORACLENATIVE_SRCS))
APPS_VMWARENATIVE_SRCS = $(wildcard ${SRC_APPS_VMWARENATIVE_DIR}/*.cpp)
APPS_VMWARENATIVE_OBJS = $(patsubst ${SRC_APPS_VMWARENATIVE_DIR}/%.cpp, ${OBJ_APPS_VMWARENATIVE_DIR}/%.o, $(APPS_VMWARENATIVE_SRCS))
ARRAY_RCS = $(wildcard ${SRC_ARRAY_DIR}/*.cpp)
ARRAY_OBJS = $(patsubst ${SRC_ARRAY_DIR}/%.cpp, ${OBJ_ARRAY_DIR}/%.o, $(ARRAY_RCS))
CLUSTER_RCS = $(wildcard ${SRC_CLUSTER_DIR}/*.cpp)
CLUSTER_OBJS = $(patsubst ${SRC_CLUSTER_DIR}/%.cpp, ${OBJ_CLUSTER_DIR}/%.o, $(CLUSTER_RCS))
COMMON_RCS = $(wildcard ${SRC_COMMON_DIR}/*.cpp)
COMMON_OBJS = $(patsubst ${SRC_COMMON_DIR}/%.cpp, ${OBJ_COMMON_DIR}/%.o, $(COMMON_RCS))
DEVICE_RCS = $(wildcard ${SRC_DEVICE_DIR}/*.cpp)
DEVICE_OBJS = $(patsubst ${SRC_DEVICE_DIR}/%.cpp, ${OBJ_DEVICE_DIR}/%.o, $(DEVICE_RCS))
HOST_RCS = $(wildcard ${SRC_HOST_DIR}/*.cpp)
HOST_OBJS = $(patsubst ${SRC_HOST_DIR}/%.cpp, ${OBJ_HOST_DIR}/%.o, $(HOST_RCS))
UPGRADEKERNEL_RCS = $(wildcard ${SRC_UPGRADEKERNEL_DIR}/*.cpp)
UPGRADEKERNEL_OBJS = $(patsubst ${SRC_UPGRADEKERNEL_DIR}/%.cpp, ${OBJ_UPGRADEKERNEL_DIR}/%.o, $(UPGRADEKERNEL_RCS))
# MOBILITY_RCS = $(wildcard ${SRC_MOBILITY_DIR}/*.cpp)
# MOBILITY_OBJS = $(patsubst ${SRC_MOBILITY_DIR}/%.cpp, ${OBJ_MOBILITY_DIR}/%.o, $(MOBILITY_RCS))
PLUGINFX_SRCS = $(wildcard ${SRC_PLUGINFX_DIR}/*.cpp)
PLUGINFX_OBJS = $(patsubst ${SRC_PLUGINFX_DIR}/%.cpp, ${OBJ_PLUGINFX_DIR}/%.o, $(PLUGINFX_SRCS))
PLUGINS_SRCS = $(wildcard ${SRC_PLUGINS_DIR}/*.cpp)
PLUGINS_OBJS = $(patsubst ${SRC_PLUGINS_DIR}/%.cpp, ${OBJ_PLUGINS_DIR}/%.o, $(PLUGINS_SRCS))
PLUGINS_DEVICE_SRCS = $(wildcard ${SRC_PLUGINS_DEVICE_DIR}/*.cpp)
PLUGINS_DEVICE_OBJS = $(patsubst ${SRC_PLUGINS_DEVICE_DIR}/%.cpp, ${OBJ_PLUGINS_DEVICE_DIR}/%.o, $(PLUGINS_DEVICE_SRCS))
PLUGINS_HOST_SRCS = $(wildcard ${SRC_PLUGINS_HOST_DIR}/*.cpp)
PLUGINS_HOST_OBJS = $(patsubst ${SRC_PLUGINS_HOST_DIR}/%.cpp, ${OBJ_PLUGINS_HOST_DIR}/%.o, $(PLUGINS_HOST_SRCS))
PLUGINS_DB2_SRCS = $(wildcard ${SRC_PLUGINS_DB2_DIR}/*.cpp)
PLUGINS_DB2_OBJS = $(patsubst ${SRC_PLUGINS_DB2_DIR}/%.cpp, ${OBJ_PLUGINS_DB2_DIR}/%.o, $(PLUGINS_DB2_SRCS))
PLUGINS_ORACLE_SRCS = $(wildcard ${SRC_PLUGINS_ORACLE_DIR}/*.cpp)
PLUGINS_ORACLE_OBJS = $(patsubst ${SRC_PLUGINS_ORACLE_DIR}/%.cpp, ${OBJ_PLUGINS_ORACLE_DIR}/%.o, $(PLUGINS_ORACLE_SRCS))
PLUGINS_RESTORE_SRCS = $(wildcard ${SRC_PLUGINS_RESTORE_DIR}/*.cpp)
PLUGINS_RESTORE_OBJS = $(patsubst ${SRC_PLUGINS_RESTORE_DIR}/%.cpp, ${OBJ_PLUGINS_RESTORE_DIR}/%.o, $(PLUGINS_RESTORE_SRCS))
PLUGINS_CLUSTER_SRCS = $(wildcard ${SRC_PLUGINS_CLUSTER_DIR}/*.cpp)
PLUGINS_CLUSTER_OBJS = $(patsubst ${SRC_PLUGINS_CLUSTER_DIR}/%.cpp, ${OBJ_PLUGINS_CLUSTER_DIR}/%.o, $(PLUGINS_CLUSTER_SRCS))
PLUGINS_CACHE_SRCS = $(wildcard ${SRC_PLUGINS_CACHE_DIR}/*.cpp)
PLUGINS_CACHE_OBJS = $(patsubst ${SRC_PLUGINS_CACHE_DIR}/%.cpp, ${OBJ_PLUGINS_CACHE_DIR}/%.o, $(PLUGINS_CACHE_SRCS))
PLUGINS_SYBASE_SRCS = $(wildcard ${SRC_PLUGINS_SYBASE_DIR}/*.cpp)
PLUGINS_SYBASE_OBJS = $(patsubst ${SRC_PLUGINS_SYBASE_DIR}/%.cpp, ${OBJ_PLUGINS_SYBASE_DIR}/%.o, $(PLUGINS_SYBASE_SRCS))
PLUGINS_HANA_SRCS = $(wildcard ${SRC_PLUGINS_HANA_DIR}/*.cpp)
PLUGINS_HANA_OBJS = $(patsubst ${SRC_PLUGINS_HANA_DIR}/%.cpp, ${OBJ_PLUGINS_HANA_DIR}/%.o, $(PLUGINS_HANA_SRCS))
PLUGINS_APP_SRCS = $(wildcard ${SRC_PLUGINS_APP_DIR}/*.cpp)
PLUGINS_APP_OBJS = $(patsubst ${SRC_PLUGINS_APP_DIR}/%.cpp, ${OBJ_PLUGINS_APP_DIR}/%.o, $(PLUGINS_APP_SRCS))
PLUGINS_MOBILITY_SRCS = $(wildcard ${SRC_PLUGINS_MOBILITY_DIR}/*.cpp)
# PLUGINS_MOBILITY_OBJS = $(patsubst ${SRC_PLUGINS_MOBILITY_DIR}/%.cpp, ${OBJ_PLUGINS_MOBILITY_DIR}/%.o, $(PLUGINS_MOBILITY_SRCS))
# PLUGINS_DPPSERVER_SRCS = $(wildcard ${SRC_PLUGINS_DPPSERVER_DIR}/*.cpp)
PLUGINS_DPPSERVER_OBJS = $(patsubst ${SRC_PLUGINS_DPPSERVER_DIR}/%.cpp, ${OBJ_PLUGINS_DPPSERVER_DIR}/%.o, $(PLUGINS_DPPSERVER_SRCS))
PLUGINS_ORACLENATIVE_SRCS = $(wildcard ${SRC_PLUGINS_ORACLENATIVE_DIR}/*.cpp)
PLUGINS_ORACLENATIVE_OBJS = $(patsubst ${SRC_PLUGINS_ORACLENATIVE_DIR}/%.cpp, ${OBJ_PLUGINS_ORACLENATIVE_DIR}/%.o, $(PLUGINS_ORACLENATIVE_SRCS))
PLUGINS_VMWARENATIVE_SRCS = $(wildcard ${SRC_PLUGINS_VMWARENATIVE_DIR}/*.cpp)
PLUGINS_VMWARENATIVE_OBJS = $(patsubst ${SRC_PLUGINS_VMWARENATIVE_DIR}/%.cpp, ${OBJ_PLUGINS_VMWARENATIVE_DIR}/%.o, $(PLUGINS_VMWARENATIVE_SRCS))

REST_SRCS = $(wildcard ${SRC_MESSAGE_DIR}/rest/*.cpp)
REST_OBJS = $(patsubst ${SRC_MESSAGE_DIR}/rest/%.cpp, ${OBJ_MESSAGE_DIR}/rest/%.o, $(REST_SRCS))
TCP_SRCS = $(wildcard ${SRC_MESSAGE_DIR}/tcp/*.cpp)
TCP_OBJS = $(patsubst ${SRC_MESSAGE_DIR}/tcp/%.cpp, ${OBJ_MESSAGE_DIR}/tcp/%.o, $(TCP_SRCS))
CURLCLIENT_SRCS = $(wildcard ${SRC_CURLCLIENT_DIR}/*.cpp)
CURLCLIENT_OBJS = $(patsubst ${SRC_CURLCLIENT_DIR}/%.cpp, ${OBJ_CURLCLIENT_DIR}/%.o, $(CURLCLIENT_SRCS))
ALARM_SRCS = $(wildcard ${SRC_ALARM_DIR}/*.cpp)
ALARM_OBJS = $(patsubst ${SRC_ALARM_DIR}/%.cpp, ${OBJ_ALARM_DIR}/%.o, $(ALARM_SRCS))
TASKMANAGER_SRCS = $(wildcard ${SRC_TASKMANAGE_DIR}/*.cpp)
TASKMANAGER_OBJS = $(patsubst ${SRC_TASKMANAGE_DIR}/%.cpp, ${OBJ_TASKMANAGER_DIR}/%.o, $(TASKMANAGER_SRCS))
SECUREC_SRCS = $(wildcard ${SRC_SECUREC_DIR}/*.c)
SECUREC_OBJS = $(patsubst ${SRC_SECUREC_DIR}/%.c, ${OBJ_SECUREC_DIR}/%.o, $(SECUREC_SRCS))
JSON_SRCS = $(wildcard ${SRC_JSON_DIR}/*.cpp)
JSON_OBJS = $(patsubst ${SRC_JSON_DIR}/%.cpp, ${OBJ_JSON_DIR}/%.o, $(JSON_SRCS))
SQLITE_OBJS = ${OBJ_SQLITE_DIR}/sqlite3.o
TINYXML_SRCS = $(wildcard ${SRC_TINYXML_DIR}/tiny*.cpp)
TINYXML_OBJS = $(patsubst ${SRC_TINYXML_DIR}/%.cpp, ${OBJ_TINYXML_DIR}/%.o, $(TINYXML_SRCS))

#####dataprocess#####
SRC_DATACONFIG_DIR = ${TOP_DIR}/src/src/dataprocess/dataconfig
SRC_DATAMSG_DIR = ${TOP_DIR}/src/src/dataprocess/datamessage
SRC_DATAPATH_DIR = ${TOP_DIR}/src/src/dataprocess/datapath
SRC_DATARW_DIR = ${TOP_DIR}/src/src/dataprocess/datareadwrite
SRC_DATAVMWARE_DIR = ${TOP_DIR}/src/src/dataprocess/vmwarenative
SRC_DP_QOS_DIR = ${TOP_DIR}/src/src/dataprocess/jobqosmanager
SRC_DP_SCH_DIR = ${TOP_DIR}/src/src/dataprocess/ioscheduler


OBJ_DATAMSG_DIR = ${OBJ_DIR}/dataprocess/datamessage
OBJ_DATARW_DIR = ${OBJ_DIR}/dataprocess/datareadwrite
OBJ_DATAPATH_DIR = ${OBJ_DIR}/dataprocess/datapath
OBJ_DATACONFIG_DIR = ${OBJ_DIR}/dataprocess/dataconfig
OBJ_DATAVMWARE_DIR = ${OBJ_DIR}/dataprocess/vmwarenative
OBJ_DP_QOS_DIR = ${OBJ_DIR}/dataprocess/jobqosmanager
OBJ_DP_SCH_DIR = ${OBJ_DIR}/dataprocess/ioscheduler


DATACONFIG_SRCS = $(wildcard ${SRC_DATACONFIG_DIR}/*.cpp)
DATACONFIG_OBJS = $(patsubst ${SRC_DATACONFIG_DIR}/%.cpp, ${OBJ_DATACONFIG_DIR}/%.o, $(DATACONFIG_SRCS))
DATAMSG_SRCS = $(wildcard ${SRC_DATAMSG_DIR}/*.cpp)
DATAMSG_OBJS = $(patsubst ${SRC_DATAMSG_DIR}/%.cpp, ${OBJ_DATAMSG_DIR}/%.o, $(DATAMSG_SRCS))
DATAPATH_SRCS = $(wildcard ${SRC_DATAPATH_DIR}/*.cpp)
DATAPATH_OBJS = $(patsubst ${SRC_DATAPATH_DIR}/%.cpp, ${OBJ_DATAPATH_DIR}/%.o, $(DATAPATH_SRCS))
DATARW_SRCS = $(wildcard ${SRC_DATARW_DIR}/*.cpp)
DATARW_OBJS = $(patsubst ${SRC_DATARW_DIR}/%.cpp, ${OBJ_DATARW_DIR}/%.o, $(DATARW_SRCS))
DATAVMWARE_SRCS = $(wildcard ${SRC_DATAVMWARE_DIR}/*.cpp)
DATAVMWARE_OBJS = $(patsubst ${SRC_DATAVMWARE_DIR}/%.cpp, ${OBJ_DATAVMWARE_DIR}/%.o, $(DATAVMWARE_SRCS))
DP_QOS_SRCS = $(wildcard ${SRC_DP_QOS_DIR}/*.cpp)
DP_QOS_OBJS = $(patsubst ${SRC_DP_QOS_DIR}/%.cpp, ${OBJ_DP_QOS_DIR}/%.o, $(DP_QOS_SRCS))
DP_SCH_OBJS = $(patsubst ${SRC_DP_SCH_DIR}/%.cpp, ${OBJ_DP_SCH_DIR}/%.o, $(DP_SCH_SRCS))
DP_SCH_SRCS = $(wildcard ${SRC_DP_SCH_DIR}/*.cpp)

#####dataprocess#####

RD_CFLAGS = -DWITH_OPENSSL

AGENT = ${BIN_DIR}/rdagent
ROOTEXEC = ${BIN_DIR}/rootexec
CRYPTO = ${BIN_DIR}/crypto
SCRIPTSIGN = ${BIN_DIR}/scriptsign
DATAMIGRATION = ${BIN_DIR}/datamigration
MONITOR = ${BIN_DIR}/monitor
XMLCFG = ${BIN_DIR}/xmlcfg
AGENTCLI = ${BIN_DIR}/agentcli
GETINPUT = ${BIN_DIR}/getinput
# UPGRADEKERNEL = ${BIN_DIR}/upgradekernel
LIB_COMMON = ${BIN_DIR}/libcommon.so
LIB_HOST = ${PLUGINS_DIR}/libhost-${AGENT_BUILD_NUM}.so
LIB_DEVICE = ${PLUGINS_DIR}/libdevice-${AGENT_BUILD_NUM}.so
LIB_ORACLE = ${PLUGINS_DIR}/liboracle-${AGENT_BUILD_NUM}.so
LIB_RESTORE = ${PLUGINS_DIR}/librestore-${AGENT_BUILD_NUM}.so
LIB_DB2 = ${PLUGINS_DIR}/libdb2-${AGENT_BUILD_NUM}.so
LIB_CLUSTER = ${PLUGINS_DIR}/libcluster-${AGENT_BUILD_NUM}.so
LIB_CACHE = ${PLUGINS_DIR}/libcache-${AGENT_BUILD_NUM}.so
LIB_APP = ${PLUGINS_DIR}/libapp-${AGENT_BUILD_NUM}.so
LIB_SYBASE = ${PLUGINS_DIR}/libsybase-${AGENT_BUILD_NUM}.so
LIB_HANA = ${PLUGINS_DIR}/libhana-${AGENT_BUILD_NUM}.so
# LIB_MOBILITY = ${PLUGINS_DIR}/libhdrs-${AGENT_BUILD_NUM}.so
LIB_ORACLENATIVE = ${PLUGINS_DIR}/liboraclenative-${AGENT_BUILD_NUM}.so
LIB_VMWARENATIVE = ${PLUGINS_DIR}/libvmwarenative-${AGENT_BUILD_NUM}.so
LIB_DPPSERVER = ${PLUGINS_DIR}/libdppserver-${AGENT_BUILD_NUM}.so

LIB_APPORACLE_NATIVE = ${BIN_DIR}/liboraclenative.a
LIB_APPVMWARE_NATIVE = ${BIN_DIR}/libvmwarenative.a
LIB_APPORACLE = ${BIN_DIR}/liboracle.a
LIB_TASKMANAGER = ${BIN_DIR}/libtaskmanager.a
LIB_APPDEVICE = ${BIN_DIR}/libdevice.a
LIB_APPHOST = ${BIN_DIR}/libhost.a
LIB_COMMON_STATIC = ${BIN_DIR}/libcommon.a

TARGET = ${AGENT} ${MONITOR} ${ROOTEXEC} ${CRYPTO} ${SCRIPTSIGN} ${DATAMIGRATION} ${XMLCFG} ${AGENTCLI} ${GETINPUT} ${LIB_COMMON} ${LIB_HOST} ${LIB_DEVICE} ${LIB_ORACLE} ${LIB_RESTORE} ${LIB_DB2} ${LIB_CLUSTER} ${LIB_CACHE} ${LIB_APP} ${LIB_SYBASE} ${LIB_HANA} ${LIB_ORACLENATIVE} ${LIB_VMWARENATIVE}

all:${TARGET}

${AGENT}:${LIB_COMMON} ${AGENT_OBJS} ${PLUGINFX_OBJS} ${PLUGINS_OBJS} ${CURLCLIENT_OBJS} ${LIB_APPHOST}
	${CPPC} ${oFLAGS} -o ${AGENT} ${AGENT_OBJS} ${PLUGINFX_OBJS} ${PLUGINS_OBJS} ${CURLCLIENT_OBJS} -L${BIN_DIR} -L${OPEN_CURL_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lKMC -lSDP -lpthread -lrt ${STFLAGS} -lhost ${STLIBS} -lcurl -lsnmp++ -lfcgi -lssl -lcrypto ${DYFLAGS} ${COV_OFLAGS}

${LIB_COMMON}:${COMMON_OBJS} ${REST_OBJS} ${TCP_OBJS} ${ARRAY_OBJS} ${ALARM_OBJS} ${TINYXML_OBJS} ${JSON_OBJS} ${SQLITE_OBJS} ${SECUREC_OBJS}  ${DATAMSG_OBJS}
	${CPPC} ${DFLAGS} -L${OPEN_OPENSSL_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${BIN_DIR} -L${OPEN_CURL_LIB_DIR} -L${KMC_LIB_DIR} -lKMC -lSDP -lssl -lcrypto -ldl -lpthread -lrt ${STFLAGS} ${STLIBS} -lcurl -lsnmp++ -lfcgi ${DYFLAGS} -o ${LIB_COMMON} ${COMMON_OBJS} ${ARRAY_OBJS} ${ALARM_OBJS} ${TINYXML_OBJS} ${JSON_OBJS} ${SQLITE_OBJS} ${SECUREC_OBJS} ${REST_OBJS} ${TCP_OBJS} ${DATAMSG_OBJS} ${COV_OFLAGS}

# static link common and other objs, don't use common dynamic library
${ROOTEXEC}:${LIB_COMMON} ${ROOT_EXEC_OBJS} ${LIB_COMMON_STATIC}
	${CPPC} ${OFLAGS} -o ${ROOTEXEC} ${ROOT_EXEC_OBJS} -L${OPEN_OPENSSL_LIB_DIR} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lKMC -lSDP -lsnmp++ -lssl -lcrypto -ldl -lrt -lpthread -static-libstdc++ ${STFLAGS} ${STLIBS} -lfcgi ${DYFLAGS} ${COV_OFLAGS}

${LIB_COMMON_STATIC}:${COMMON_OBJS} ${REST_OBJS} ${TCP_OBJS} ${ARRAY_OBJS} ${ALARM_OBJS} ${TINYXML_OBJS} ${JSON_OBJS} ${SQLITE_OBJS} ${SECUREC_OBJS} ${DATAMSG_OBJS}
	${ARNew} ${LIB_COMMON_STATIC} ${COMMON_OBJS} ${ARRAY_OBJS} ${ALARM_OBJS} ${TINYXML_OBJS} ${JSON_OBJS} ${SQLITE_OBJS} ${SECUREC_OBJS} ${REST_OBJS} ${TCP_OBJS} ${DATAMSG_OBJS}

${CRYPTO}:${LIB_COMMON} ${CRYPTO_OBJS}
	${CPPC} ${OFLAGS} -o ${CRYPTO} ${CRYPTO_OBJS} -L${OPEN_OPENSSL_LIB_DIR} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lKMC -lSDP -lsnmp++  -lssl -lcrypto -lpthread -ldl -lrt ${STFLAGS} ${STLIBS} -lfcgi ${DYFLAGS} ${COV_OFLAGS}

${SCRIPTSIGN}:${LIB_COMMON} ${SCRIPTSIGN_OBJS}
	${CPPC} ${OFLAGS} -o ${SCRIPTSIGN} ${SCRIPTSIGN_OBJS} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lKMC -lSDP -lsnmp++ -lssl -lcrypto -lpthread -ldl -lrt -lfcgi ${STFLAGS} ${STLIBS} ${DYFLAGS} ${COV_OFLAGS}

${DATAMIGRATION}:${LIB_COMMON} ${DATAMIGRATION_OBJS}
	${CPPC} ${OFLAGS} -o ${DATAMIGRATION} ${DATAMIGRATION_OBJS} -L${BIN_DIR} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lKMC -lSDP -lsnmp++ -lssl -lcrypto -lpthread -ldl -lrt ${STFLAGS} ${STLIBS} -lfcgi  ${DYFLAGS} ${COV_OFLAGS}

${MONITOR}:${LIB_COMMON} ${MONITOR_OBJS}
	${CPPC} ${OFLAGS} -o ${MONITOR} ${MONITOR_OBJS} -L${OPEN_FCGI_LIB_DIR} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lsnmp++ -lKMC -lSDP -lssl -lcrypto -lpthread -ldl -lrt ${STFLAGS} ${STLIBS} -lfcgi ${DYFLAGS} ${COV_OFLAGS}

${XMLCFG}:${LIB_COMMON} ${XMLCFG_OBJS}
	${CPPC} ${OFLAGS} -o ${XMLCFG} ${XMLCFG_OBJS} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lsnmp++ -lKMC -lSDP -lssl -lcrypto -lfcgi -lpthread -ldl -lrt ${STFLAGS} ${STLIBS} ${DYFLAGS} ${COV_OFLAGS}

${AGENTCLI}:${LIB_COMMON} ${AGENTCLI_OBJS} ${LIB_APPHOST} ${CURLCLIENT_OBJS}
	${CPPC} ${OFLAGS} -o ${AGENTCLI} ${AGENTCLI_OBJS} ${CURLCLIENT_OBJS} -L${OPEN_CURL_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lKMC -lSDP -lsnmp++ -lcurl -lssl -lcrypto -lpthread -ldl -lrt ${STFLAGS} ${STLIBS} -lfcgi -lhost ${DYFLAGS} ${COV_OFLAGS}

${GETINPUT}:${LIB_COMMON} ${GETINPUT_OBJS}
	${CPPC} ${OFLAGS} -o ${GETINPUT} ${GETINPUT_OBJS} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -lcommon -lKMC -lSDP -lsnmp++ -lssl -lcrypto -lfcgi -lpthread -ldl -lrt ${STFLAGS} ${STLIBS} ${DYFLAGS} ${COV_OFLAGS}

${LIB_HOST}:${LIB_COMMON} ${LIB_APPHOST} ${PLUGINS_OBJS} ${PLUGINS_HOST_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_HOST} ${PLUGINS_OBJS} ${PLUGINS_HOST_OBJS} -L${OPEN_FCGI_LIB_DIR} -L${BIN_DIR} -lrt -lcommon ${STFLAGS} -lhost ${DYFLAGS} ${COV_OFLAGS}

${LIB_DEVICE}:${LIB_COMMON} ${LIB_APPDEVICE} ${PLUGINS_OBJS} ${PLUGINS_DEVICE_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_DEVICE} ${PLUGINS_OBJS} ${PLUGINS_DEVICE_OBJS} -L${BIN_DIR} -L${KMC_LIB_DIR} -lKMC -lSDP -lcommon -lrt ${STFLAGS} -ldevice ${DYFLAGS} ${COV_OFLAGS}

${LIB_CLUSTER}:${LIB_COMMON} ${CLUSTER_OBJS} ${PLUGINS_OBJS} ${PLUGINS_CLUSTER_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_CLUSTER} ${CLUSTER_OBJS} ${PLUGINS_OBJS} ${PLUGINS_CLUSTER_OBJS} -L${BIN_DIR} -lcommon ${COV_OFLAGS}

${LIB_ORACLE}:${LIB_COMMON} ${LIB_APPORACLE} ${PLUGINS_OBJS} ${PLUGINS_ORACLE_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_ORACLE} ${PLUGINS_OBJS} ${PLUGINS_ORACLE_OBJS} -L${BIN_DIR} -L${OPEN_OPENSSL_LIB_DIR} -lcommon -lssl -lcrypto -loracle ${COV_OFLAGS}

${LIB_RESTORE}:${LIB_COMMON} ${APPS_RESTORE_OBJS} ${PLUGINS_OBJS} ${PLUGINS_RESTORE_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_RESTORE} ${APPS_RESTORE_OBJS} ${PLUGINS_OBJS} ${PLUGINS_RESTORE_OBJS} -L${BIN_DIR} -lcommon ${COV_OFLAGS}

${LIB_DB2}:${LIB_COMMON} ${APPS_DB2_OBJS} ${PLUGINS_OBJS} ${PLUGINS_DB2_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_DB2} ${APPS_DB2_OBJS} ${PLUGINS_OBJS} ${PLUGINS_DB2_OBJS} -L${BIN_DIR} -L${KMC_LIB_DIR} -lKMC -lSDP -lcommon ${COV_OFLAGS}

${LIB_CACHE}:${LIB_COMMON} ${APPS_CACHE_OBJS} ${PLUGINS_OBJS} ${PLUGINS_CACHE_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_CACHE} ${APPS_CACHE_OBJS} ${PLUGINS_OBJS} ${PLUGINS_CACHE_OBJS} -L${BIN_DIR} -lcommon ${COV_OFLAGS}

${LIB_SYBASE}:${LIB_COMMON} ${APPS_SYBASE_OBJS} ${PLUGINS_OBJS} ${PLUGINS_SYBASE_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_SYBASE} ${APPS_SYBASE_OBJS} ${PLUGINS_OBJS} ${PLUGINS_SYBASE_OBJS} -L${BIN_DIR} -L${OPEN_OPENSSL_LIB_DIR} -lcommon -lssl -lcrypto ${COV_OFLAGS}
    
${LIB_HANA}:${LIB_COMMON} ${APPS_HANA_OBJS} ${PLUGINS_OBJS} ${PLUGINS_HANA_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_HANA} ${APPS_HANA_OBJS} ${PLUGINS_OBJS} ${PLUGINS_HANA_OBJS} -L${BIN_DIR} -lcommon ${COV_OFLAGS}

${LIB_APP}:${LIB_COMMON} ${APPS_APP_OBJS} ${PLUGINS_OBJS} ${PLUGINS_APP_OBJS} ${LIB_APPORACLE}
	${CPPC} ${dFLAGS} -o ${LIB_APP} ${APPS_APP_OBJS} ${PLUGINS_OBJS} ${PLUGINS_APP_OBJS} -L${BIN_DIR} -L${KMC_LIB_DIR} -lKMC -lSDP -lcommon -loracle ${COV_OFLAGS}

${LIB_ORACLENATIVE}:${LIB_COMMON} ${PLUGINS_OBJS} ${PLUGINS_ORACLENATIVE_OBJS} ${LIB_APPORACLE_NATIVE} ${LIB_APPORACLE} ${LIB_APPHOST} ${LIB_TASKMANAGER} ${LIB_APPDEVICE}
	${CPPC} ${dFLAGS} -o ${LIB_ORACLENATIVE} ${PLUGINS_OBJS} ${PLUGINS_ORACLENATIVE_OBJS} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${KMC_LIB_DIR} -lKMC -lSDP -lcommon -loraclenative -loracle -ltaskmanager -ldevice -lhost ${COV_OFLAGS}

${LIB_VMWARENATIVE}:${LIB_COMMON} ${PLUGINS_OBJS} ${PLUGINS_VMWARENATIVE_OBJS} ${LIB_APPVMWARE_NATIVE} ${LIB_APPHOST} ${LIB_TASKMANAGER}
	${CPPC} ${dFLAGS} -o ${LIB_VMWARENATIVE} ${PLUGINS_OBJS} ${PLUGINS_VMWARENATIVE_OBJS} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -lKMC -lSDP -lcommon -lssl -lcrypto -lvmwarenative -ltaskmanager -lhost ${COV_OFLAGS}



DATAPROCESS = ${BIN_DIR}/dataprocess
dp:${DATAPROCESS}

${DATAPROCESS}:${LIB_COMMON} ${DATACONFIG_OBJS} ${DATAPATH_OBJS} ${DATARW_OBJS} ${DATAVMWARE_OBJS} ${CURLCLIENT_OBJS} ${DP_QOS_OBJS} ${DP_SCH_OBJS}
	${CPPC} ${oFLAGS} -o ${DATAPROCESS} ${DATACONFIG_OBJS} ${DATAPATH_OBJS} ${DATARW_OBJS} ${DATAVMWARE_OBJS} ${CURLCLIENT_OBJS} ${DP_QOS_OBJS} ${DP_SCH_OBJS} -L${BIN_DIR} -L${OPEN_CURL_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -ldl -lpthread -lrt -static-libstdc++ -lcommon ${STFLAGS} ${STLIBS} -lcurl -lsnmp++ -lfcgi -lssl -lcrypto ${DYFLAGS} ${COV_OFLAGS}
	
${DATAMSG_OBJS}:${OBJ_DATAMSG_DIR}/%.o:${SRC_DATAMSG_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATAPATH_OBJS}:${OBJ_DATAPATH_DIR}/%.o:${SRC_DATAPATH_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATACONFIG_OBJS}:${OBJ_DATACONFIG_DIR}/%.o:${SRC_DATACONFIG_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATARW_OBJS}:${OBJ_DATARW_DIR}/%.o:${SRC_DATARW_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATAVMWARE_OBJS}:${OBJ_DATAVMWARE_DIR}/%.o:${SRC_DATAVMWARE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DP_QOS_OBJS}:${OBJ_DP_QOS_DIR}/%.o:${SRC_DP_QOS_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}	
	
${DP_SCH_OBJS}:${OBJ_DP_SCH_DIR}/%.o:${SRC_DP_SCH_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}	
############dataprocess################################

#############
${TCP_OBJS}:${OBJ_MESSAGE_DIR}/tcp/%.o:${SRC_MESSAGE_DIR}/tcp/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${REST_OBJS}:${OBJ_MESSAGE_DIR}/rest/%.o:${SRC_MESSAGE_DIR}/rest/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}
#############

${COMMON_OBJS}:${OBJ_COMMON_DIR}/%.o:${SRC_COMMON_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_KMC_MAIN_DIR} -I${INC_KMC_INC_DIR} -I${BASE_OPEN_INC} -I${INC_OPEN_OPENSSL_DIR} \
	-I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${ARRAY_OBJS}:${OBJ_ARRAY_DIR}/%.o:${SRC_ARRAY_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${BASE_OPEN_INC} -o $@ -c $< ${COV_CFLAGS}
	
${CLUSTER_OBJS}:${OBJ_CLUSTER_DIR}/%.o:${SRC_CLUSTER_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${BASE_OPEN_INC} -o $@ -c $< ${COV_CFLAGS}

${LIB_APPDEVICE}:${DEVICE_OBJS}
	${ARNew} ${LIB_APPDEVICE} ${DEVICE_OBJS}

${DEVICE_OBJS}:${OBJ_DEVICE_DIR}/%.o:${SRC_DEVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${OPEN_SRC_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_APPHOST}:${HOST_OBJS}
	${ARNew} ${LIB_APPHOST} ${HOST_OBJS}

${HOST_OBJS}:${OBJ_HOST_DIR}/%.o:${SRC_HOST_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_OPEN_TINYXML_DIR} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${APPS_DB2_OBJS}:${OBJ_APPS_DB2_DIR}/%.o:${SRC_APPS_DB2_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_APPORACLE}:${APPS_ORACLE_OBJS}
	${ARNew} ${LIB_APPORACLE} ${APPS_ORACLE_OBJS}

${APPS_ORACLE_OBJS}:${OBJ_APPS_ORACLE_DIR}/%.o:${SRC_APPS_ORACLE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${APPS_RESTORE_OBJS}:${OBJ_APPS_RESTORE_DIR}/%.o:${SRC_APPS_RESTORE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${APPS_CACHE_OBJS}:${OBJ_APPS_CACHE_DIR}/%.o:${SRC_APPS_CACHE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -o $@ -c $<  ${COV_OFLAGS}

${APPS_SYBASE_OBJS}:${OBJ_APPS_SYBASE_DIR}/%.o:${SRC_APPS_SYBASE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -o $@ -c $<  ${COV_OFLAGS}

${APPS_HANA_OBJS}:${OBJ_APPS_HANA_DIR}/%.o:${SRC_APPS_HANA_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -o $@ -c $<  ${COV_OFLAGS}
    
${APPS_APP_OBJS}:${OBJ_APPS_APP_DIR}/%.o:${SRC_APPS_APP_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_APPORACLE_NATIVE}:${APPS_ORACLENATIVE_OBJS}
	${ARNew} ${LIB_APPORACLE_NATIVE} ${APPS_ORACLENATIVE_OBJS}

${LIB_APPVMWARE_NATIVE}:${APPS_VMWARENATIVE_OBJS}
	${ARNew} ${LIB_APPVMWARE_NATIVE} ${APPS_VMWARENATIVE_OBJS}

${APPS_ORACLENATIVE_OBJS}:${OBJ_APPS_ORACLENATIVE_DIR}/%.o:${SRC_APPS_ORACLENATIVE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${APPS_VMWARENATIVE_OBJS}:${OBJ_APPS_VMWARENATIVE_DIR}/%.o:${SRC_APPS_VMWARENATIVE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${AGENT_OBJS}:${OBJ_AGENT_DIR}/%.o:${SRC_AGENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_SNMP_DIR} -I${INC_OPEN_SNMP_MAIN_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${ROOT_EXEC_OBJS}:${OBJ_ROOT_EXEC_DIR}/%.o:${SRC_ROOT_EXEC_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${BASE_OPEN_INC} -o $@ -c $< ${COV_CFLAGS}
	
${CRYPTO_OBJS}:${OBJ_CRYPTO_DIR}/%.o:${SRC_CRYPTO_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
	
${SCRIPTSIGN_OBJS}:${OBJ_SCRIPTSIGN_DIR}/%.o:${SRC_SCRIPTSIGN_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATAMIGRATION_OBJS}:${OBJ_DATAMIGRATION_DIR}/%.o:${SRC_DATAMIGRATION_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
	
${MONITOR_OBJS}:${OBJ_MONITOR_DIR}/%.o:${SRC_MONITOR_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} \
	-I${INC_OPEN_SNMP_DIR} -I${INC_OPEN_SNMP_MAIN_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${XMLCFG_OBJS}:${OBJ_XMLCFG_DIR}/%.o:${SRC_XMLCFG_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
	
${AGENTCLI_OBJS}:${OBJ_AGENTCLI_DIR}/%.o:${SRC_AGENTCLI_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
	
${GETINPUT_OBJS}:${OBJ_GETINPUT_DIR}/%.o:${SRC_GETINPUT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${CURLCLIENT_OBJS}:${OBJ_CURLCLIENT_DIR}/%.o:${SRC_CURLCLIENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_OPEN_CURL_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${ALARM_OBJS}:${OBJ_ALARM_DIR}/%.o:${SRC_ALARM_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_SNMP_DIR} \
	-I${INC_OPEN_SNMP_MAIN_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_TASKMANAGER}:${TASKMANAGER_OBJS}
	${ARNew} ${LIB_TASKMANAGER} ${TASKMANAGER_OBJS}

${TASKMANAGER_OBJS}:${OBJ_TASKMANAGER_DIR}/%.o:${SRC_TASKMANAGE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINFX_OBJS}:${OBJ_PLUGINFX_DIR}/%.o:${SRC_PLUGINFX_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_OBJS}:${OBJ_PLUGINS_DIR}/%.o:${SRC_PLUGINS_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_DEVICE_OBJS}:${OBJ_PLUGINS_DEVICE_DIR}/%.o:${SRC_PLUGINS_DEVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_CLUSTER_OBJS}:${OBJ_PLUGINS_CLUSTER_DIR}/%.o:${SRC_PLUGINS_CLUSTER_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_HOST_OBJS}:${OBJ_PLUGINS_HOST_DIR}/%.o:${SRC_PLUGINS_HOST_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_DB2_OBJS}:${OBJ_PLUGINS_DB2_DIR}/%.o:${SRC_PLUGINS_DB2_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${PLUGINS_ORACLE_OBJS}:${OBJ_PLUGINS_ORACLE_DIR}/%.o:${SRC_PLUGINS_ORACLE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_RESTORE_OBJS}:${OBJ_PLUGINS_RESTORE_DIR}/%.o:${SRC_PLUGINS_RESTORE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_CACHE_OBJS}:${OBJ_PLUGINS_CACHE_DIR}/%.o:${SRC_PLUGINS_CACHE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_OFLAGS}
    
${PLUGINS_SYBASE_OBJS}:${OBJ_PLUGINS_SYBASE_DIR}/%.o:${SRC_PLUGINS_SYBASE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_OFLAGS}
    
${PLUGINS_HANA_OBJS}:${OBJ_PLUGINS_HANA_DIR}/%.o:${SRC_PLUGINS_HANA_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_OFLAGS}

${PLUGINS_APP_OBJS}:${OBJ_PLUGINS_APP_DIR}/%.o:${SRC_PLUGINS_APP_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_DPPSERVER_OBJS}:${OBJ_PLUGINS_DPPSERVER_DIR}/%.o:${SRC_PLUGINS_DPPSERVER_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_ORACLENATIVE_OBJS}:${OBJ_PLUGINS_ORACLENATIVE_DIR}/%.o:${SRC_PLUGINS_ORACLENATIVE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_VMWARENATIVE_OBJS}:${OBJ_PLUGINS_VMWARENATIVE_DIR}/%.o:${SRC_PLUGINS_VMWARENATIVE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${SQLITE_OBJS}:${SRC_OPEN_SQLITE_DIR}/sqlite3.c
	${cc} ${cFLAGS} ${RD_CFLAGS} -I${INC_OPEN_SQLITE_DIR} -o $@ -c ${SRC_OPEN_SQLITE_DIR}/sqlite3.c

${JSON_OBJS}:${OBJ_JSON_DIR}/%.o:${SRC_JSON_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${INC_OPEN_JSON_DIR} -o $@ -c $<

${TINYXML_OBJS}:${OBJ_TINYXML_DIR}/%.o:${SRC_TINYXML_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $<

${SECUREC_OBJS}:${OBJ_SECUREC_DIR}/%.o:${SRC_SECUREC_DIR}/%.c
	${CC} ${cFLAGS} -I${INC_SECUREC_DIR} -o $@ -c $<

clean:
	find ${OBJ_DIR} -name "*.o" | xargs -L 1  rm -rf
	rm -rf ${TARGET} ${BIN_DIR}/*.a 
