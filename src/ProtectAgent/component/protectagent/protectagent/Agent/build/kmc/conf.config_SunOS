#----------------------------------------------------------------------------------------------------------
# Compiler and linker options for Solaris
#----------------------------------------------------------------------------------------------------------
# Compiler Details
# CC=cc
# CXX=CC
AR=ar rc
NM=nm
OBJ_DUMP=objdump -d

KMC_OPT=-DWSEC_COMPILE_CAC_OPENSSL -DWSEC_USE_OPENSSL_110 -DWSEC_LINUX -DKMC_MULTIPROCESS -DWSEC_ERR_CODE_BASE=0 -DWSEC_AES_GCM_SUPPORT -DWSEC_COMPILE_MIP_OTHER -DWSEC_WRI_LOG_AUTO_END_WITH_CRLF
CXXFLAGS=$(KMC_OPT) -fPIC -pipe -Wl,-z,now  -nostdlib
CFLAGS=-m64 -DSTDCXX_98_HEADERS  -DSOLARIS $(KMC_OPT) -fPIC -pipe -Wl,-z,now -nostdlib

OPENSSLVN=openssl110

#work dir
#WORK_DIR = $(subst /Build,,$(shell pwd))
WORK_DIR = ${AGENT_ROOT}

#External depended head file path ,you can change it to your own path 
EXTERNAL_OPENSSL_PATH = $(WORK_DIR)/open_src/openssl
EXTERNAL_SECUREC_PATH = $(WORK_DIR)/platform/securec

# include path 
INCLUDE_PATH =  -I$(EXTERNAL_OPENSSL_PATH)/include/   \
                -I$(EXTERNAL_SECUREC_PATH)/include/   \
                -I$(WORK_DIR)/platform/kmc/include/   \
                -I$(WORK_DIR)/platform/kmc/src/common \
                -I$(WORK_DIR)/platform/kmc/src/cac \
                -I$(WORK_DIR)/platform/kmc/src/kmc \
                -I$(WORK_DIR)/platform/kmc/src/sdp \
                -I$(WORK_DIR)/platform/kmc/src/mip \
                -I$(WORK_DIR)/platform/kmc/src/mip/linux \
                -I$(WORK_DIR)/platform/kmc/src/mip/other \
# library path
ifeq ($(strip $(ENCRYPT_ADAPTER)), -DWSEC_COMPILE_CAC_IPSI)
	LIBRARY_PATH = -L $(WORK_DIR)/External/lib/$(RELY_LIB_BITS)/ipsi \
				   -L $(WORK_DIR)/External/lib/$(RELY_LIB_BITS)/securec
	ifeq ($(strip $(LIBTYPE_SHARED)), y)
		LIBRARY_NAME = $(WORK_DIR)/External/lib/$(RELY_LIB_BITS)/securec/libsecurec.a
		LIBRARY_NAME += $(WORK_DIR)/External/lib/$(RELY_LIB_BITS)/ipsi/libipsi_crypto.a 
	else
		LIBRARY_NAME = 	-lipsi_crypto -lsecurec 
	endif
else
	LIBRARY_PATH = -L $(EXTERNAL_OPENSSL_PATH)/.openssl/lib \
				   -L $(WORK_DIR)/platform/kmc/lib
	ifeq ($(strip $(LIBTYPE_SHARED)), y)
		LIBRARY_NAME = $(WORK_DIR)/platform/kmc/lib/libsecurec.a
		LIBRARY_NAME += $(EXTERNAL_OPENSSL_PATH)/.openssl/lib/libcrypto.a 
	else
		LIBRARY_NAME = 	-lcrypto -lsecurec
	endif
endif
LIBRARY_NAME += $(FLAGS_FOR_BITS)
#source file path
VPATH = $(WORK_DIR)/platform/kmc/src/common:$(WORK_DIR)/platform/kmc/src/kmc:$(WORK_DIR)/platform/kmc/src/sdp:$(WORK_DIR)/platform/kmc/src/cac:$(WORK_DIR)/platform/kmc/src/mip:$(WORK_DIR)/platform/kmc/src/mip/linux:$(WORK_DIR)/platform/kmc/src/mip/other
