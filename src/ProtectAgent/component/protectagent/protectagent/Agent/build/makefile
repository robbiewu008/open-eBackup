TOP_DIR=${AGENT_ROOT}
BIN_DIR=${AGENT_ROOT}/bin
PLUGINS_DIR=${AGENT_ROOT}/bin/plugins
SYSTEM=$(shell uname -s)
SRC_AFS_DIR = ${TOP_DIR}/src/src/afs
SRC_AGENT_DIR = ${TOP_DIR}/src/src/agent
SRC_ROOT_EXEC_DIR = ${TOP_DIR}/src/src/rootexec
SRC_CRYPTO_DIR = ${TOP_DIR}/src/src/tools/crypto
SRC_SCRIPTSIGN_DIR = ${TOP_DIR}/src/src/tools/scriptsign
SRC_DATAMIGRATION_DIR = ${TOP_DIR}/src/src/tools/datamigration
SRC_MONITOR_DIR = ${TOP_DIR}/src/src/tools/monitor
SRC_XMLCFG_DIR = ${TOP_DIR}/src/src/tools/xmlcfg
SRC_AGENTCLI_DIR = ${TOP_DIR}/src/src/tools/agentcli
SRC_GETINPUT_DIR = ${TOP_DIR}/src/src/tools/getinput
SRC_APPS_DIR = ${TOP_DIR}/src/src/apps
SRC_APPS_ORACLE_DIR = ${TOP_DIR}/src/src/apps/oracle
SRC_APPS_APP_DIR = ${TOP_DIR}/src/src/apps/app
SRC_APPS_ORACLENATIVE_DIR = ${TOP_DIR}/src/src/apps/oraclenative
SRC_APPS_VMWARENATIVE_DIR = ${TOP_DIR}/src/src/apps/vmwarenative
SRC_ARRAY_DIR = ${TOP_DIR}/src/src/array
SRC_COMMON_DIR = ${TOP_DIR}/src/src/common
SRC_SECURE_COM_DIR = ${TOP_DIR}/src/src/securecom
SRC_DEVICE_DIR = ${TOP_DIR}/src/src/device
SRC_HOST_DIR = ${TOP_DIR}/src/src/host
SRC_PLUGINFX_DIR = ${TOP_DIR}/src/src/pluginfx
SRC_PLUGINS_DIR = ${TOP_DIR}/src/src/plugins
SRC_PLUGINS_HOST_DIR = ${TOP_DIR}/src/src/plugins/host
SRC_PLUGINS_ORACLE_DIR = ${TOP_DIR}/src/src/plugins/oracle
SRC_PLUGINS_APP_DIR = ${TOP_DIR}/src/src/plugins/app
SRC_PLUGINS_DPPSERVER_DIR = ${TOP_DIR}/src/src/plugins/dppserver
SRC_PLUGINS_ORACLENATIVE_DIR = ${TOP_DIR}/src/src/plugins/oraclenative
SRC_PLUGINS_VMWARENATIVE_DIR = ${TOP_DIR}/src/src/plugins/vmwarenative
SRC_MESSAGE_DIR = ${TOP_DIR}/src/src/message
SRC_CURLCLIENT_DIR = ${TOP_DIR}/src/src/message/curlclient
SRC_ALARM_DIR = ${TOP_DIR}/src/src/alarm
SRC_TASKMANAGE_DIR = ${TOP_DIR}/src/src/taskmanager
SRC_SECUREC_DIR = ${TOP_DIR}/platform/securec/src
SRC_JSON_DIR = ${TOP_DIR}/open_src/jsoncpp/src/lib_json
SRC_TINYXML_DIR = ${TOP_DIR}/open_src/tinyxml
SRC_APPPROTECT_DIR = ${TOP_DIR}/src/src/apps/appprotect
SRC_APPPROTECT_PLUGIN_DIR = ${TOP_DIR}/src/src/apps/appprotect/plugininterface
SRC_PLUGINS_APPPROTECT_FRAME_DIR = ${TOP_DIR}/src/src/plugins/appprotect

BASE_INC = ${TOP_DIR}/src/inc
INC_SECUREC_DIR = ${TOP_DIR}/platform/securec/include
INC_KMC_MAIN_DIR = ${TOP_DIR}/platform/kmc
INC_KMC_INC_DIR = ${TOP_DIR}/platform/kmc/include
INC_KMC_INC_SDP_DIR = ${TOP_DIR}/platform/kmc/sdp
INC_APPPROTECT_DIR = ${TOP_DIR}/src/inc/apps/appprotect
INC_APPPROTECT_PLUGIN_DIR = ${TOP_DIR}/src/inc/apps/appprotect/plugininterface
INC_PLUGINS_APPPROTECT_FRAME_DIR = ${TOP_DIR}/src/inc/plugins/appprotect

OPEN_SRC_DIR = ${TOP_DIR}/open_src
PLATORM_SRC_DIR = ${TOP_DIR}/platform
BASE_OPEN_INC = ${OPEN_SRC_DIR}
OPEN_OPENSSL_DIR = ${OPEN_SRC_DIR}/openssl
OPEN_OPENSSLV1_DIR = ${OPEN_SRC_DIR}/opensslv1
OPEN_SNMP_DIR = ${OPEN_SRC_DIR}/snmp++
OPEN_FCGI_DIR = ${OPEN_SRC_DIR}/fcgi
OPEN_SQLITE_DIR = ${OPEN_SRC_DIR}/sqlite
OPEN_JSON_DIR = ${OPEN_SRC_DIR}/jsoncpp
OPEN_TINYXML_DIR = ${OPEN_SRC_DIR}/tinyxml
OPEN_CURL_DIR = ${OPEN_SRC_DIR}/curl
OPEN_UUID_DIR = ${OPEN_SRC_DIR}/libuuid
OPEN_TCMALLOC_DIR = ${OPEN_SRC_DIR}/gperftools/tcmalloc
OPEN_THRIFT_DIR = ${OPEN_SRC_DIR}/thrift/.libs/lib
INC_OPEN_THRIFT_DIR	= ${OPEN_SRC_DIR}/thrift/.libs/include
OPEN_THRIFTV1_DIR = ${OPEN_SRC_DIR}/thriftv1/.libs/lib
OPEN_THRIFT_STATIC = ${OPEN_THRIFT_DIR}/libthrift.a
OPEN_THRIFT_DYNAMIC = ${OPEN_THRIFT_DIR}/libthrift.so

SRC_OPEN_SQLITE_DIR = ${OPEN_SQLITE_DIR}
INC_OPEN_SQLITE_DIR = ${OPEN_SQLITE_DIR}
INC_OPEN_OPENSSL_DIR = ${OPEN_OPENSSL_DIR}/include
INC_OPEN_SNMP_DIR = ${OPEN_SNMP_DIR}/include
INC_OPEN_SNMP_MAIN_DIR = ${OPEN_SNMP_DIR}
INC_OPEN_JSON_DIR = ${OPEN_JSON_DIR}/include
SRC_OPEN_TINYXML_DIR = ${OPEN_TINYXML_DIR}
INC_OPEN_TINYXML_DIR = ${OPEN_TINYXML_DIR}/
INC_OPEN_CURL_DIR = ${OPEN_CURL_DIR}/include/
INC_OPEN_UUID_DIR = ${OPEN_UUID_DIR}/include/
INC_TCMALLOC_DIR = ${OPEN_TCMALLOC_DIR}/include
INC_BOOST_DIR = ${OPEN_SRC_DIR}/boost/.libs/include
INC_LIBEVENT_DIR = ${OPEN_SRC_DIR}/libevent/.libs/include/

OPEN_CURL_LIB_DIR = ${OPEN_CURL_DIR}/lib64
OPEN_OPENSSL_LIB_DIR = ${OPEN_OPENSSL_DIR}/.openssl/lib
OPEN_OPENSSLV1_LIB_DIR = ${OPEN_OPENSSLV1_DIR}/.openssl/lib
OPEN_OPENSSL_SHARED_LIB_DIR = ${OPEN_OPENSSL_DIR}/.openssl_shared/lib
OPEN_SNMP_LIB_DIR = ${OPEN_SNMP_DIR}/src/.libs
OPEN_FCGI_LIB_DIR = ${OPEN_FCGI_DIR}/libfcgi/.libs
KMC_LIB_DIR = ${PLATORM_SRC_DIR}/kmc/lib
KMCV1_LIB_DIR = ${PLATORM_SRC_DIR}/kmc/lib
TCMALLOC_LIB_DIR = ${OPEN_TCMALLOC_DIR}/lib
UUID = ${OPEN_UUID_DIR}/lib
OPEN_LIBEVENT_DIR = ${OPEN_SRC_DIR}/libevent/.libs/lib
OPEN_ZLIB_DIR = ${OPEN_SRC_DIR}/zlib/.libs/include/

OBJ_DIR = ${TOP_DIR}/obj
OBJ_AGENT_DIR = ${OBJ_DIR}/agent
OBJ_ROOT_EXEC_DIR = ${OBJ_DIR}/rootexec
OBJ_MONITOR_DIR = ${OBJ_DIR}/monitor
OBJ_CRYPTO_DIR = ${OBJ_DIR}/crypto
OBJ_SCRIPTSIGN_DIR = ${OBJ_DIR}/scriptsign
OBJ_DATAMIGRATION_DIR = ${OBJ_DIR}/datamigration
OBJ_XMLCFG_DIR = ${OBJ_DIR}/xmlcfg
OBJ_AGENTCLI_DIR = ${OBJ_DIR}/agentcli
OBJ_GETINPUT_DIR = ${OBJ_DIR}/getinput
OBJ_APPS_DIR = ${OBJ_DIR}/apps
OBJ_APPS_ORACLE_DIR = ${OBJ_DIR}/apps/oracle
OBJ_APPS_APP_DIR = ${OBJ_DIR}/apps/app
OBJ_APPS_ORACLENATIVE_DIR = ${OBJ_DIR}/apps/oraclenative
OBJ_APPS_VMWARENATIVE_DIR = ${OBJ_DIR}/apps/vmwarenative
OBJ_ARRAY_DIR = ${OBJ_DIR}/array
OBJ_COMMON_DIR = ${OBJ_DIR}/common
OBJ_SECURE_COM_DIR = ${OBJ_DIR}/securecom
OBJ_DEVICE_DIR = ${OBJ_DIR}/device
OBJ_HOST_DIR = ${OBJ_DIR}/host
OBJ_PLUGINFX_DIR = ${OBJ_DIR}/pluginfx
OBJ_PLUGINS_DIR = ${OBJ_DIR}/plugins
OBJ_PLUGINS_HOST_DIR = ${OBJ_DIR}/plugins/host
OBJ_PLUGINS_ORACLE_DIR = ${OBJ_DIR}/plugins/oracle
OBJ_PLUGINS_APP_DIR = ${OBJ_DIR}/plugins/app
OBJ_PLUGINS_DPPSERVER_DIR = ${OBJ_DIR}/plugins/dppserver
OBJ_PLUGINS_ORACLENATIVE_DIR = ${OBJ_DIR}/plugins/oraclenative
OBJ_PLUGINS_VMWARENATIVE_DIR = ${OBJ_DIR}/plugins/vmwarenative
OBJ_PLUGINS_APPPROTECT_FRAME_DIR = ${OBJ_DIR}/plugins/appprotect
OBJ_MESSAGE_DIR = ${OBJ_DIR}/message
OBJ_CURLCLIENT_DIR = ${OBJ_DIR}/curlclient
OBJ_ALARM_DIR = ${OBJ_DIR}/alarm
OBJ_TASKMANAGER_DIR = ${OBJ_DIR}/taskmanager
OBJ_SQLITE_DIR = ${OBJ_DIR}/sqlite
OBJ_JSON_DIR = ${OBJ_DIR}/json
OBJ_TINYXML_DIR = ${OBJ_DIR}/tinyxml
OBJ_SECUREC_DIR = ${OBJ_DIR}/securec
OBJ_APPPROTECT_DIR = ${OBJ_DIR}/apps/appprotect
OBJ_APPPROTECT_PLUGIN_DIR = ${OBJ_DIR}/apps/appprotect/plugininterface
OBJ_AFS_DIR = ${OBJ_DIR}/afs

AGENT_SRCS = $(wildcard ${SRC_AGENT_DIR}/*.cpp)
AGENT_OBJS = $(patsubst ${SRC_AGENT_DIR}/%.cpp, ${OBJ_AGENT_DIR}/%.o, $(AGENT_SRCS))
ROOT_EXEC_SRCS = $(wildcard ${SRC_ROOT_EXEC_DIR}/*.cpp)
ROOT_EXEC_OBJS = $(patsubst ${SRC_ROOT_EXEC_DIR}/%.cpp, ${OBJ_ROOT_EXEC_DIR}/%.o, $(ROOT_EXEC_SRCS))
CRYPTO_SRCS = $(wildcard ${SRC_CRYPTO_DIR}/*.cpp)
CRYPTO_OBJS = $(patsubst ${SRC_CRYPTO_DIR}/%.cpp, ${OBJ_CRYPTO_DIR}/%.o, $(CRYPTO_SRCS))
SCRIPTSIGN_SRCS = $(wildcard ${SRC_SCRIPTSIGN_DIR}/*.cpp)
SCRIPTSIGN_OBJS = $(patsubst ${SRC_SCRIPTSIGN_DIR}/%.cpp, ${OBJ_SCRIPTSIGN_DIR}/%.o, $(SCRIPTSIGN_SRCS))
DATAMIGRATION_SRCS = $(wildcard ${SRC_DATAMIGRATION_DIR}/*.cpp)
DATAMIGRATION_OBJS = $(patsubst ${SRC_DATAMIGRATION_DIR}/%.cpp, ${OBJ_DATAMIGRATION_DIR}/%.o, $(DATAMIGRATION_SRCS))
MONITOR_SRCS = $(wildcard ${SRC_MONITOR_DIR}/*.cpp)
MONITOR_OBJS = $(patsubst ${SRC_MONITOR_DIR}/%.cpp, ${OBJ_MONITOR_DIR}/%.o, $(MONITOR_SRCS))
XMLCFG_SRCS = $(wildcard ${SRC_XMLCFG_DIR}/*.cpp)
XMLCFG_OBJS = $(patsubst ${SRC_XMLCFG_DIR}/%.cpp, ${OBJ_XMLCFG_DIR}/%.o, $(XMLCFG_SRCS))
AGENTCLI_SRCS = $(wildcard ${SRC_AGENTCLI_DIR}/*.cpp)
AGENTCLI_OBJS = $(patsubst ${SRC_AGENTCLI_DIR}/%.cpp, ${OBJ_AGENTCLI_DIR}/%.o, $(AGENTCLI_SRCS))
GETINPUT_SRCS = $(wildcard ${SRC_GETINPUT_DIR}/*.cpp)
GETINPUT_OBJS = $(patsubst ${SRC_GETINPUT_DIR}/%.cpp, ${OBJ_GETINPUT_DIR}/%.o, $(GETINPUT_SRCS))
APPS_ORACLE_SRCS = $(wildcard ${SRC_APPS_ORACLE_DIR}/*.cpp)
APPS_ORACLE_OBJS = $(patsubst ${SRC_APPS_ORACLE_DIR}/%.cpp, ${OBJ_APPS_ORACLE_DIR}/%.o, $(APPS_ORACLE_SRCS))
APPS_APP_SRCS = $(wildcard ${SRC_APPS_APP_DIR}/*.cpp)
APPS_APP_OBJS = $(patsubst ${SRC_APPS_APP_DIR}/%.cpp, ${OBJ_APPS_APP_DIR}/%.o, $(APPS_APP_SRCS))
APPS_ORACLENATIVE_SRCS = $(wildcard ${SRC_APPS_ORACLENATIVE_DIR}/*.cpp)
APPS_ORACLENATIVE_OBJS = $(patsubst ${SRC_APPS_ORACLENATIVE_DIR}/%.cpp, ${OBJ_APPS_ORACLENATIVE_DIR}/%.o, $(APPS_ORACLENATIVE_SRCS))
APPS_VMWARENATIVE_SRCS = $(wildcard ${SRC_APPS_VMWARENATIVE_DIR}/*.cpp)
APPS_VMWARENATIVE_OBJS = $(patsubst ${SRC_APPS_VMWARENATIVE_DIR}/%.cpp, ${OBJ_APPS_VMWARENATIVE_DIR}/%.o, $(APPS_VMWARENATIVE_SRCS))
ARRAY_RCS = $(wildcard ${SRC_ARRAY_DIR}/*.cpp)
ARRAY_OBJS = $(patsubst ${SRC_ARRAY_DIR}/%.cpp, ${OBJ_ARRAY_DIR}/%.o, $(ARRAY_RCS))
COMMON_RCS = $(wildcard ${SRC_COMMON_DIR}/*.cpp)
COMMON_OBJS = $(patsubst ${SRC_COMMON_DIR}/%.cpp, ${OBJ_COMMON_DIR}/%.o, $(COMMON_RCS))
SECURE_COM_RCS = $(wildcard ${SRC_SECURE_COM_DIR}/*.cpp)
SECURE_COM_OBJS = $(patsubst ${SRC_SECURE_COM_DIR}/%.cpp, ${OBJ_SECURE_COM_DIR}/%.o, $(SECURE_COM_RCS))
DEVICE_RCS = $(wildcard ${SRC_DEVICE_DIR}/*.cpp)
DEVICE_OBJS = $(patsubst ${SRC_DEVICE_DIR}/%.cpp, ${OBJ_DEVICE_DIR}/%.o, $(DEVICE_RCS))
HOST_RCS = $(wildcard ${SRC_HOST_DIR}/*.cpp)
HOST_OBJS = $(patsubst ${SRC_HOST_DIR}/%.cpp, ${OBJ_HOST_DIR}/%.o, $(HOST_RCS))
PLUGINFX_SRCS_ALL = $(wildcard ${SRC_PLUGINFX_DIR}/*.cpp)
PLUGINFX_SRCS = $(filter-out ${SRC_PLUGINFX_DIR}/ExternalPluginSDK.cpp, ${PLUGINFX_SRCS_ALL})
PLUGINFX_SECUR_JNI = $(filter-out ${SRC_PLUGINFX_DIR}/com_huawei_oceanprotect_sdk_agent_plugin_lib_security_ability_definition_SecurityUtil.cpp, ${PLUGINFX_SRCS})
PLUGINFX_ARCHIVE_JNI = $(filter-out ${SRC_PLUGINFX_DIR}/com_huawei_oceanprotect_sdk_agent_plugin_lib_archive_ability_definition_ArchiveStreamAbility.cpp, ${PLUGINFX_SECUR_JNI})
PLUGINFX_OBJS = $(patsubst ${SRC_PLUGINFX_DIR}/%.cpp, ${OBJ_PLUGINFX_DIR}/%.o, $(PLUGINFX_ARCHIVE_JNI))
PLUGINS_SRCS = $(wildcard ${SRC_PLUGINS_DIR}/*.cpp)
PLUGINS_OBJS = $(patsubst ${SRC_PLUGINS_DIR}/%.cpp, ${OBJ_PLUGINS_DIR}/%.o, $(PLUGINS_SRCS))
PLUGINS_HOST_SRCS = $(wildcard ${SRC_PLUGINS_HOST_DIR}/*.cpp)
PLUGINS_HOST_OBJS = $(patsubst ${SRC_PLUGINS_HOST_DIR}/%.cpp, ${OBJ_PLUGINS_HOST_DIR}/%.o, $(PLUGINS_HOST_SRCS))
PLUGINS_ORACLE_SRCS = $(wildcard ${SRC_PLUGINS_ORACLE_DIR}/*.cpp)
PLUGINS_ORACLE_OBJS = $(patsubst ${SRC_PLUGINS_ORACLE_DIR}/%.cpp, ${OBJ_PLUGINS_ORACLE_DIR}/%.o, $(PLUGINS_ORACLE_SRCS))
PLUGINS_APP_SRCS = $(wildcard ${SRC_PLUGINS_APP_DIR}/*.cpp)
PLUGINS_APP_OBJS = $(patsubst ${SRC_PLUGINS_APP_DIR}/%.cpp, ${OBJ_PLUGINS_APP_DIR}/%.o, $(PLUGINS_APP_SRCS))
PLUGINS_DPPSERVER_OBJS = $(patsubst ${SRC_PLUGINS_DPPSERVER_DIR}/%.cpp, ${OBJ_PLUGINS_DPPSERVER_DIR}/%.o, $(PLUGINS_DPPSERVER_SRCS))
PLUGINS_ORACLENATIVE_SRCS = $(wildcard ${SRC_PLUGINS_ORACLENATIVE_DIR}/*.cpp)
PLUGINS_ORACLENATIVE_OBJS = $(patsubst ${SRC_PLUGINS_ORACLENATIVE_DIR}/%.cpp, ${OBJ_PLUGINS_ORACLENATIVE_DIR}/%.o, $(PLUGINS_ORACLENATIVE_SRCS))
PLUGINS_VMWARENATIVE_SRCS = $(wildcard ${SRC_PLUGINS_VMWARENATIVE_DIR}/*.cpp)
PLUGINS_VMWARENATIVE_OBJS = $(patsubst ${SRC_PLUGINS_VMWARENATIVE_DIR}/%.cpp, ${OBJ_PLUGINS_VMWARENATIVE_DIR}/%.o, $(PLUGINS_VMWARENATIVE_SRCS))
PLUGINS_APPPROTECT_FRAME_SRCS = $(wildcard ${SRC_PLUGINS_APPPROTECT_FRAME_DIR}/*.cpp)
PLUGINS_APPPROTECT_FRAME_OBJS = $(patsubst ${SRC_PLUGINS_APPPROTECT_FRAME_DIR}/%.cpp, ${OBJ_PLUGINS_APPPROTECT_FRAME_DIR}/%.o, $(PLUGINS_APPPROTECT_FRAME_SRCS))
AFS_RCS = $(wildcard ${SRC_AFS_DIR}/*.cpp)
AFS_OBJS = $(patsubst ${SRC_AFS_DIR}/%.cpp, ${OBJ_AFS_DIR}/%.o, $(AFS_RCS))

REST_SRCS = $(wildcard ${SRC_MESSAGE_DIR}/rest/*.cpp)
REST_OBJS = $(patsubst ${SRC_MESSAGE_DIR}/rest/%.cpp, ${OBJ_MESSAGE_DIR}/rest/%.o, $(REST_SRCS))
TCP_SRCS = $(wildcard ${SRC_MESSAGE_DIR}/tcp/*.cpp)
TCP_OBJS = $(patsubst ${SRC_MESSAGE_DIR}/tcp/%.cpp, ${OBJ_MESSAGE_DIR}/tcp/%.o, $(TCP_SRCS))
TCP_OBJS_SSL = $(patsubst ${SRC_MESSAGE_DIR}/tcp/%.cpp, ${OBJ_MESSAGE_DIR}/tcpssl/%.o, $(TCP_SRCS))
CURLCLIENT_SRCS = $(wildcard ${SRC_CURLCLIENT_DIR}/*.cpp)
CURLCLIENT_OBJS = $(patsubst ${SRC_CURLCLIENT_DIR}/%.cpp, ${OBJ_CURLCLIENT_DIR}/%.o, $(CURLCLIENT_SRCS))
ALARM_SRCS = $(wildcard ${SRC_ALARM_DIR}/*.cpp)
ALARM_OBJS = $(patsubst ${SRC_ALARM_DIR}/%.cpp, ${OBJ_ALARM_DIR}/%.o, $(ALARM_SRCS))
TASKMANAGER_SRCS = $(wildcard ${SRC_TASKMANAGE_DIR}/*.cpp ${SRC_TASKMANAGE_DIR}/externaljob/*.cpp ${SRC_TASKMANAGE_DIR}/filter/*.cpp)
TASKMANAGER_OBJS = $(patsubst ${SRC_TASKMANAGE_DIR}/%.cpp, ${OBJ_TASKMANAGER_DIR}/%.o, $(TASKMANAGER_SRCS))
SECUREC_SRCS = $(wildcard ${SRC_SECUREC_DIR}/*.c)
SECUREC_OBJS = $(patsubst ${SRC_SECUREC_DIR}/%.c, ${OBJ_SECUREC_DIR}/%.o, $(SECUREC_SRCS))
JSON_SRCS = $(wildcard ${SRC_JSON_DIR}/*.cpp)
JSON_OBJS = $(patsubst ${SRC_JSON_DIR}/%.cpp, ${OBJ_JSON_DIR}/%.o, $(JSON_SRCS))
SQLITE_OBJS = ${OBJ_SQLITE_DIR}/sqlite3.o
TINYXML_SRCS = $(wildcard ${SRC_TINYXML_DIR}/tiny*.cpp)
TINYXML_OBJS = $(patsubst ${SRC_TINYXML_DIR}/%.cpp, ${OBJ_TINYXML_DIR}/%.o, $(TINYXML_SRCS))
APPPROTECT_SRCS = $(wildcard ${SRC_APPPROTECT_DIR}/*.cpp)
APPPROTECT_OBJS = $(patsubst ${SRC_APPPROTECT_DIR}/%.cpp, ${OBJ_APPPROTECT_DIR}/%.o, $(APPPROTECT_SRCS))
APPPROTECT_PLUGIN_SRCS = $(wildcard ${SRC_APPPROTECT_PLUGIN_DIR}/*.cpp)
APPPROTECT_PLUGIN_OBJS = $(patsubst ${SRC_APPPROTECT_PLUGIN_DIR}/%.cpp, ${OBJ_APPPROTECT_PLUGIN_DIR}/%.o, $(APPPROTECT_PLUGIN_SRCS))


#####dataprocess#####
SRC_DATACONFIG_DIR = ${TOP_DIR}/src/src/dataprocess/dataconfig
SRC_DATAMSG_DIR = ${TOP_DIR}/src/src/dataprocess/datamessage
SRC_DATAPATH_DIR = ${TOP_DIR}/src/src/dataprocess/datapath
SRC_DATARW_DIR = ${TOP_DIR}/src/src/dataprocess/datareadwrite
SRC_DATAVMWARE_DIR = ${TOP_DIR}/src/src/dataprocess/vmwarenative
SRC_DP_QOS_DIR = ${TOP_DIR}/src/src/dataprocess/jobqosmanager
SRC_DP_SCH_DIR = ${TOP_DIR}/src/src/dataprocess/ioscheduler
SRC_DP_VMFS_DIR = ${TOP_DIR}/src/src/dataprocess/ioscheduler/libvmfs
SRC_DP_VMFS6_DIR = ${TOP_DIR}/src/src/dataprocess/ioscheduler/libvmfs6

OBJ_DATAMSG_DIR = ${OBJ_DIR}/dataprocess/datamessage
OBJ_DATARW_DIR = ${OBJ_DIR}/dataprocess/datareadwrite
OBJ_DATAPATH_DIR = ${OBJ_DIR}/dataprocess/datapath
OBJ_DATACONFIG_DIR = ${OBJ_DIR}/dataprocess/dataconfig
OBJ_DATAVMWARE_DIR = ${OBJ_DIR}/dataprocess/vmwarenative
OBJ_DP_QOS_DIR = ${OBJ_DIR}/dataprocess/jobqosmanager
OBJ_DP_SCH_DIR = ${OBJ_DIR}/dataprocess/ioscheduler
OBJ_DP_VMFS_DIR = ${OBJ_DIR}/dataprocess/ioscheduler/libvmfs
OBJ_DP_VMFS6_DIR = ${OBJ_DIR}/dataprocess/ioscheduler/libvmfs6

DATACONFIG_SRCS = $(wildcard ${SRC_DATACONFIG_DIR}/*.cpp)
DATACONFIG_OBJS = $(patsubst ${SRC_DATACONFIG_DIR}/%.cpp, ${OBJ_DATACONFIG_DIR}/%.o, $(DATACONFIG_SRCS))
DATAMSG_SRCS = $(wildcard ${SRC_DATAMSG_DIR}/*.cpp)
DATAMSG_OBJS = $(patsubst ${SRC_DATAMSG_DIR}/%.cpp, ${OBJ_DATAMSG_DIR}/%.o, $(DATAMSG_SRCS))
DATAPATH_SRCS = $(wildcard ${SRC_DATAPATH_DIR}/*.cpp)
DATAPATH_OBJS = $(patsubst ${SRC_DATAPATH_DIR}/%.cpp, ${OBJ_DATAPATH_DIR}/%.o, $(DATAPATH_SRCS))
DATARW_SRCS = $(wildcard ${SRC_DATARW_DIR}/*.cpp)
DATARW_OBJS = $(patsubst ${SRC_DATARW_DIR}/%.cpp, ${OBJ_DATARW_DIR}/%.o, $(DATARW_SRCS))
DATAVMWARE_SRCS = $(wildcard ${SRC_DATAVMWARE_DIR}/*.cpp)
DATAVMWARE_OBJS = $(patsubst ${SRC_DATAVMWARE_DIR}/%.cpp, ${OBJ_DATAVMWARE_DIR}/%.o, $(DATAVMWARE_SRCS))
DP_QOS_SRCS = $(wildcard ${SRC_DP_QOS_DIR}/*.cpp)
DP_QOS_OBJS = $(patsubst ${SRC_DP_QOS_DIR}/%.cpp, ${OBJ_DP_QOS_DIR}/%.o, $(DP_QOS_SRCS))
DP_SCH_SRCS = $(wildcard ${SRC_DP_SCH_DIR}/*.cpp)
DP_SCH_OBJS = $(patsubst ${SRC_DP_SCH_DIR}/%.cpp, ${OBJ_DP_SCH_DIR}/%.o, $(DP_SCH_SRCS))
DP_VMFS_SRCS = $(wildcard ${SRC_DP_VMFS_DIR}/*.cpp)
DP_VMFS_OBJS = $(patsubst ${SRC_DP_VMFS_DIR}/%.cpp, ${OBJ_DP_VMFS_DIR}/%.o, $(DP_VMFS_SRCS))
DP_VMFS6_SRCS = $(wildcard ${SRC_DP_VMFS6_DIR}/*.cpp)
DP_VMFS6_OBJS = $(patsubst ${SRC_DP_VMFS6_DIR}/%.cpp, ${OBJ_DP_VMFS6_DIR}/%.o, $(DP_VMFS6_SRCS))

#####dataprocess#####

RD_CFLAGS = -DWITH_OPENSSL

AGENT = ${BIN_DIR}/rdagent
ROOTEXEC = ${BIN_DIR}/rootexec
CRYPTO = ${BIN_DIR}/crypto
SCRIPTSIGN = ${BIN_DIR}/scriptsign
DATAMIGRATION = ${BIN_DIR}/datamigration
MONITOR = ${BIN_DIR}/monitor
XMLCFG = ${BIN_DIR}/xmlcfg
AGENTCLI = ${BIN_DIR}/agentcli
GETINPUT = ${BIN_DIR}/getinput
SANCLIENT = ${BIN_DIR}/sanclient
LIB_COMMON = ${BIN_DIR}/libcommon.so
LIB_SECURE_COM = ${BIN_DIR}/libsecurecom.so
LIB_SECURE_COMV1 = ${BIN_DIR}/libsecurecomv1.so
LIB_SECURE_COM_FOR_GAUSS = ${BIN_DIR}/libsecurecomforgauss.so
LIB_HOST = ${PLUGINS_DIR}/libhost-${AGENT_BUILD_NUM}.so
LIB_DEVICE = ${PLUGINS_DIR}/libdevice-${AGENT_BUILD_NUM}.so
LIB_ORACLE = ${PLUGINS_DIR}/liboracle-${AGENT_BUILD_NUM}.so
LIB_APP = ${PLUGINS_DIR}/libapp-${AGENT_BUILD_NUM}.so
LIB_ORACLENATIVE = ${PLUGINS_DIR}/liboraclenative-${AGENT_BUILD_NUM}.so
LIB_VMWARENATIVE = ${PLUGINS_DIR}/libvmwarenative-${AGENT_BUILD_NUM}.so
LIB_DPPSERVER = ${PLUGINS_DIR}/libdppserver-${AGENT_BUILD_NUM}.so
LIB_APPPROTECT = ${PLUGINS_DIR}/libappprotect-${AGENT_BUILD_NUM}.so

LIB_APPORACLE_NATIVE = ${BIN_DIR}/liboraclenative.a
LIB_APPVMWARE_NATIVE = ${BIN_DIR}/libvmwarenative.a
LIB_APPPROTECT_NATIVE = ${BIN_DIR}/libappprotect.a
LIB_APPORACLE = ${BIN_DIR}/liboracle.a
LIB_TASKMANAGER = ${BIN_DIR}/libtaskmanager.a
LIB_APPDEVICE = ${BIN_DIR}/libdevice.a
LIB_APPHOST = ${BIN_DIR}/libhost.a
LIB_STDC++ = ${BIN_DIR}/libstdc++.a

LIB_AFS = ${BIN_DIR}/libafs.so

########xbsa#########
INC_ARCHIVE_STREAM_DIR = ${TOP_DIR}/src/inc/message/archivestream
SRC_ARCHIVE_STREAM_DIR = ${TOP_DIR}/src/src/message/archivestream
OBJ_ARCHIVE_STREAM_DIR = ${OBJ_DIR}/message/archivestream
LIB_ARCHIVE_STREAM_SRCS = $(wildcard ${SRC_ARCHIVE_STREAM_DIR}/*.cpp )
LIB_ARCHIVE_STREAM_OBJS = $(patsubst ${SRC_ARCHIVE_STREAM_DIR}/%.cpp, ${OBJ_ARCHIVE_STREAM_DIR}/%.o, $(LIB_ARCHIVE_STREAM_SRCS))

########xbsa#########
INC_XBSA_CLIENT_DIR = ${TOP_DIR}/src/inc/apps/dws/XBSAClient
SRC_XBSA_CLIENT_DIR = ${TOP_DIR}/src/src/apps/dws/XBSAClient
SRC_HCSXBSA_CLIENT_DIR = ${TOP_DIR}/src/src/apps/hcs/XBSAClient
SRC_TPOPSXBSA_CLIENT_DIR = ${TOP_DIR}/src/src/apps/tpops/XBSAClient
SRC_IIFXBSA_CLIENT_DIR = ${TOP_DIR}/src/src/apps/informix/XBSAClient
OBJ_XBSA_CLIENT_DIR = ${OBJ_DIR}/XBSAClient
OBJ_HCS_XBSA_CLIENT_DIR = ${OBJ_DIR}/HCSXBSAClient
OBJ_TPOPS_XBSA_CLIENT_DIR = ${OBJ_DIR}/TPOPSXBSAClient
OBJ_IIF_XBSA_CLIENT_DIR = ${OBJ_DIR}/IIFXBSAClient
LIB_XBSA_SRCS = $(wildcard ${SRC_XBSA_CLIENT_DIR}/*.cpp )
LIB_HCSXBSA_SRCS = $(wildcard ${SRC_HCSXBSA_CLIENT_DIR}/*.cpp )
LIB_TPOPSXBSA_SRCS = $(wildcard ${SRC_TPOPSXBSA_CLIENT_DIR}/*.cpp )
LIB_IIFXBSA_SRCS = $(wildcard ${SRC_IIFXBSA_CLIENT_DIR}/*.cpp)
LIB_XBSA_OBJS = $(patsubst ${SRC_XBSA_CLIENT_DIR}/%.cpp, ${OBJ_XBSA_CLIENT_DIR}/%.o, $(LIB_XBSA_SRCS))
LIB_HCSXBSA_OBJS = $(patsubst ${SRC_HCSXBSA_CLIENT_DIR}/%.cpp, ${OBJ_HCS_XBSA_CLIENT_DIR}/%.o, $(LIB_HCSXBSA_SRCS))
LIB_TPOPSXBSA_OBJS = $(patsubst ${SRC_TPOPSXBSA_CLIENT_DIR}/%.cpp, ${OBJ_TPOPS_XBSA_CLIENT_DIR}/%.o, $(LIB_TPOPSXBSA_SRCS))
LIB_IIFXBSA_OBJS = $(patsubst ${SRC_IIFXBSA_CLIENT_DIR}/%.cpp, ${OBJ_IIF_XBSA_CLIENT_DIR}/%.o, $(LIB_IIFXBSA_SRCS))

########xbsaclientcom#########
INC_XBSACOMM_CLIENT_DIR = ${TOP_DIR}/src/inc/xbsaclientcomm
SRC_XBSACOMM_CLIENT_DIR = ${TOP_DIR}/src/src/apps/xbsaclientcomm
OBJ_XBSACOMM_CLIENT_DIR = ${OBJ_DIR}/XBSACOMM
LIB_XBSACOMM_SRCS = $(wildcard ${SRC_XBSACOMM_CLIENT_DIR}/*.cpp)
LIB_XBSACOMM_OBJS = $(patsubst ${SRC_XBSACOMM_CLIENT_DIR}/%.cpp, ${OBJ_XBSACOMM_CLIENT_DIR}/%.o, $(LIB_XBSACOMM_SRCS))

########xbsacom#########
INC_XBSA_COM_DIR = ${TOP_DIR}/src/inc/apps/dws/XBSACom
SRC_XBSA_COM_DIR = ${TOP_DIR}/src/src/apps/dws/XBSACom
OBJ_XBSA_COM_DIR = ${OBJ_DIR}/XBSACom
LIB_XBSA_COM_SRCS = $(wildcard ${SRC_XBSA_COM_DIR}/*.cpp )
LIB_XBSA_COM_OBJS = $(patsubst ${SRC_XBSA_COM_DIR}/%.cpp, ${OBJ_XBSA_COM_DIR}/%.o, $(LIB_XBSA_COM_SRCS))

# srouce files directory
SRC_DWS_SERVER_DIR = ${TOP_DIR}/src/src/apps/dws/XBSAServer
SRC_DWS_PLUGIN_DIR = ${TOP_DIR}/src/src/plugins/dws
# header files directory
INC_DWS_PLUGIN_DIR = ${TOP_DIR}/src/inc/plugins/dws
INC_DWS_SERVER_DIR = ${TOP_DIR}/src/inc/apps/dws/XBSAServer
# objects store path
OBJ_DWS_SERVER_DIR = ${OBJ_DIR}/apps/dws/XBSAServer/
OBJ_DWS_PLUGIN_DIR = ${OBJ_DIR}/plugins/dws
# compile ojects
LIB_DWS_SERVER_SRCS = $(wildcard ${SRC_DWS_SERVER_DIR}/*.cpp)
LIB_DWS_PLUGIN_SRCS = $(wildcard ${SRC_DWS_PLUGIN_DIR}/*.cpp)
LIB_DWS_SERVER_OBJS = $(patsubst ${SRC_DWS_SERVER_DIR}/%.cpp, ${OBJ_DWS_SERVER_DIR}/%.o, $(LIB_DWS_SERVER_SRCS))
LIB_DWS_PLUGIN_OBJS = $(patsubst ${SRC_DWS_PLUGIN_DIR}/%.cpp, ${OBJ_DWS_PLUGIN_DIR}/%.o, $(LIB_DWS_PLUGIN_SRCS))

# targets
LIB_XBSA = ${PLUGINS_DIR}/libxbsa64.so
LIB_XBSA_FOR_HCS = ${PLUGINS_DIR}/libxbsa64forhcs.so
LIB_XBSA_FOR_TPOPS = ${PLUGINS_DIR}/libxbsa64fortpops.so
LIB_IIFXBSA = ${PLUGINS_DIR}/libxbsa64iif.so
LIB_DWS = ${PLUGINS_DIR}/libdws-${AGENT_BUILD_NUM}.so
LIB_XBSA_SERVER = ${BIN_DIR}/libxbsaserver.a
########xbsa#########

########servicefactory####
INC_SERVICE_CENTER_DIR = ${TOP_DIR}/src/inc/servicecenter
SRC_SERVICE_FACTORY_DIR = ${TOP_DIR}/src/src/servicecenter/servicefactory
OBJ_SERVICE_FACTORY_DIR = ${OBJ_DIR}/servicecenter/servicefactory
INC_THRIFT_SERVICE_DIR = ${TOP_DIR}/src/inc/servicecenter/thriftservice/include
SERVICE_FACTORY_SRCS = $(wildcard ${SRC_SERVICE_FACTORY_DIR}/*.cpp )
SERVICE_FACTORY_OBJS = $(patsubst ${SRC_SERVICE_FACTORY_DIR}/%.cpp, ${OBJ_SERVICE_FACTORY_DIR}/%.o, $(SERVICE_FACTORY_SRCS))

SRC_THRIFT_SERVICE_DIR = ${TOP_DIR}/src/src/servicecenter/thriftservice
OBJ_THRIFT_SERVICE_DIR = ${OBJ_DIR}/servicecenter/thriftservice
THRIFT_SERVICE_SRCS = $(wildcard ${SRC_THRIFT_SERVICE_DIR}/*.cpp )
THRIFT_SERVICE_OBJS = $(patsubst ${SRC_THRIFT_SERVICE_DIR}/%.cpp, ${OBJ_THRIFT_SERVICE_DIR}/%.o, $(THRIFT_SERVICE_SRCS))

SRC_CERTIFICATE_SERVICE_DIR = ${TOP_DIR}/src/src/servicecenter/certificateservice
OBJ_CERTIFICATE_SERVICE_DIR = ${OBJ_DIR}/servicecenter/certificateservice
CERTIFICATE_SERVICE_SRCS = $(wildcard ${SRC_CERTIFICATE_SERVICE_DIR}/*.cpp )
CERTIFICATE_SERVICE_OBJS = $(patsubst ${SRC_CERTIFICATE_SERVICE_DIR}/%.cpp, ${OBJ_CERTIFICATE_SERVICE_DIR}/%.o, $(CERTIFICATE_SERVICE_SRCS))

SRC_MESSAGE_SERVICE_DIR = ${TOP_DIR}/src/src/servicecenter/messageservice
OBJ_MESSAGE_SERVICE_DIR = ${OBJ_DIR}/servicecenter/messageservice
MESSAGE_SERVICE_SRCS = $(wildcard ${SRC_MESSAGE_SERVICE_DIR}/*.cpp )
MESSAGE_SERVICE_OBJS = $(patsubst ${SRC_MESSAGE_SERVICE_DIR}/%.cpp, ${OBJ_MESSAGE_SERVICE_DIR}/%.o, $(MESSAGE_SERVICE_SRCS))


SRC_SERVICES_DEVICE_DIR = ${TOP_DIR}/src/src/servicecenter/services/device
OBJ_SERVICES_DEVICE_DIR = ${OBJ_DIR}/servicecenter/services/device
INC_SERVICES_DEVICE_DIR = ${TOP_DIR}/src/inc/servicecenter/services/device
SERVICES_DEVICE_SRCS = $(wildcard ${SRC_SERVICES_DEVICE_DIR}/*.cpp )
SERVICES_DEVICE_OBJS = $(patsubst ${SRC_SERVICES_DEVICE_DIR}/%.cpp, ${OBJ_SERVICES_DEVICE_DIR}/%.o, $(SERVICES_DEVICE_SRCS))
SRC_JOB_SERVICE_DIR = ${TOP_DIR}/src/src/servicecenter/services/jobservice
OBJ_JOB_SERVICE_DIR = ${OBJ_DIR}/servicecenter/services/jobservice
JOB_SERVICE_SRCS = $(wildcard ${SRC_JOB_SERVICE_DIR}/*.cpp )
JOB_SERVICE_OBJS = $(patsubst ${SRC_JOB_SERVICE_DIR}/%.cpp, ${OBJ_JOB_SERVICE_DIR}/%.o, $(JOB_SERVICE_SRCS))

SRC_TIMER_SERVICE_DIR = ${TOP_DIR}/src/src/servicecenter/timerservice
OBJ_TIMER_SERVICE_DIR = ${OBJ_DIR}/servicecenter/timerservice
TIMER_SERVICE_SRCS = $(wildcard ${SRC_TIMER_SERVICE_DIR}/*.cpp )
TIMER_SERVICE_OBJS = $(patsubst ${SRC_TIMER_SERVICE_DIR}/%.cpp, ${OBJ_TIMER_SERVICE_DIR}/%.o, $(TIMER_SERVICE_SRCS))

########servicefactory####

ifeq (${SYSTEM},Linux)
LIB_STD = -static-libstdc++
LIB_TCMALLOC = -ltcmalloc
else
LIB_STD=
LIB_TCMALLOC=
endif

TARGET = ${AGENT} ${MONITOR} ${ROOTEXEC} ${CRYPTO} ${SCRIPTSIGN} ${DATAMIGRATION} ${XMLCFG} ${AGENTCLI} ${GETINPUT} ${LIB_COMMON} ${LIB_SECURE_COM} ${LIB_SECURE_COM_FOR_GAUSS} ${LIB_SECURE_COMV1} ${LIB_HOST} ${LIB_DEVICE} ${LIB_ORACLE} ${LIB_APP} ${LIB_ORACLENATIVE} ${LIB_VMWARENATIVE} ${LIB_APPPROTECT} ${SANCLIENT}

all:${TARGET}

AGENT_TARGET = ${AGENT} ${MONITOR} ${ROOTEXEC} ${CRYPTO} ${SCRIPTSIGN} ${DATAMIGRATION} ${XMLCFG} ${AGENTCLI} ${GETINPUT} ${LIB_COMMON} ${LIB_SECURE_COM} ${LIB_SECURE_COM_FOR_GAUSS} ${LIB_SECURE_COMV1} ${LIB_HOST} ${LIB_DEVICE} ${LIB_ORACLE} ${LIB_APP} ${LIB_ORACLENATIVE} ${LIB_VMWARENATIVE} ${LIB_APPPROTECT} ${LIB_ARCHIVE} ${LIB_AFS}
agent:${AGENT_TARGET}

XBSA_TARGET = ${LIB_XBSA} ${LIB_XBSA_FOR_HCS} ${LIB_XBSA_FOR_TPOPS} ${LIB_DWS} ${LIB_IIFXBSA}
xbsa:${XBSA_TARGET}

${AGENT}:${LIB_COMMON} ${LIB_SECURE_COM} ${THRIFT_SERVICE_OBJS} ${SERVICE_FACTORY_OBJS} ${AGENT_OBJS} ${APPPROTECT_PLUGIN_OBJS} ${APPPROTECT_OBJS} ${PLUGINFX_OBJS} ${PLUGINS_OBJS} ${CURLCLIENT_OBJS} ${LIB_APPHOST} ${DATAMSG_OBJS} ${ALARM_OBJS} ${CERTIFICATE_SERVICE_OBJS} ${MESSAGE_SERVICE_OBJS} ${JOB_SERVICE_OBJS} ${TASKMANAGER_OBJS} ${SERVICES_DEVICE_OBJS} ${TIMER_SERVICE_OBJS}
	${CPPC} ${oFLAGS} -o ${AGENT} ${THRIFT_SERVICE_OBJS} ${SERVICE_FACTORY_OBJS} ${AGENT_OBJS} ${DATAMSG_OBJS} ${APPPROTECT_PLUGIN_OBJS} ${APPPROTECT_OBJS} ${PLUGINFX_OBJS} ${PLUGINS_OBJS} ${CURLCLIENT_OBJS} ${ALARM_OBJS} ${CERTIFICATE_SERVICE_OBJS} ${MESSAGE_SERVICE_OBJS} ${JOB_SERVICE_OBJS} ${TASKMANAGER_OBJS} ${SERVICES_DEVICE_OBJS} ${TIMER_SERVICE_OBJS} \
	-L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -L${UUID} -L${OPEN_CURL_LIB_DIR} -L${TCMALLOC_LIB_DIR} -L${OPEN_THRIFT_DIR} -L${OPEN_LIBEVENT_DIR} \
	-L${INC_SERVICE_CENTER_DIR} \
	-lsecurecom -lcommon ${STFLAGS} -lhost ${LIB_TCMALLOC} ${STLIBS} -lcurl -lsnmp++ -lfcgi -lssl -lcrypto -lthriftz -lthriftnb -lthrift -levent ${DYFLAGS} -lKMC -lSDP -lpthread -lrt -ldl ${COV_OFLAGS}

${SANCLIENT}:${LIB_COMMON} ${LIB_SECURE_COM} ${THRIFT_SERVICE_OBJS} ${SERVICE_FACTORY_OBJS} ${AGENT_OBJS} ${APPPROTECT_PLUGIN_OBJS} ${APPPROTECT_OBJS} ${PLUGINFX_OBJS} ${PLUGINS_OBJS} ${CURLCLIENT_OBJS} ${LIB_APPHOST} ${DATAMSG_OBJS} ${ALARM_OBJS} ${CERTIFICATE_SERVICE_OBJS} ${MESSAGE_SERVICE_OBJS} ${JOB_SERVICE_OBJS} ${TASKMANAGER_OBJS} ${SERVICES_DEVICE_OBJS} ${TIMER_SERVICE_OBJS}
	${CPPC} ${oFLAGS} -o ${SANCLIENT} ${THRIFT_SERVICE_OBJS} ${SERVICE_FACTORY_OBJS} ${AGENT_OBJS} ${DATAMSG_OBJS} ${APPPROTECT_PLUGIN_OBJS} ${APPPROTECT_OBJS} ${PLUGINFX_OBJS} ${PLUGINS_OBJS} ${CURLCLIENT_OBJS} ${ALARM_OBJS} ${CERTIFICATE_SERVICE_OBJS} ${MESSAGE_SERVICE_OBJS} ${JOB_SERVICE_OBJS} ${TASKMANAGER_OBJS} ${SERVICES_DEVICE_OBJS} ${TIMER_SERVICE_OBJS} \
	-L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -L${UUID} -L${OPEN_CURL_LIB_DIR} -L${TCMALLOC_LIB_DIR} -L${OPEN_THRIFT_DIR} -L${OPEN_LIBEVENT_DIR} \
	-L${INC_SERVICE_CENTER_DIR} \
	-lsecurecom -lcommon ${STFLAGS} -lhost ${LIB_TCMALLOC} ${STLIBS} -lcurl -lsnmp++ -lfcgi -lssl -lcrypto -lthriftz -lthriftnb -lthrift -levent ${DYFLAGS} -lKMC -lSDP -lpthread -lrt -ldl ${COV_OFLAGS}

${LIB_COMMON}:${COMMON_OBJS} ${TINYXML_OBJS} ${JSON_OBJS} ${SQLITE_OBJS} ${SECUREC_OBJS}
	${CPPC} ${DFLAGS} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${BIN_DIR} -L${UUID} -o ${LIB_COMMON} ${COMMON_OBJS} ${TINYXML_OBJS} ${JSON_OBJS} ${SQLITE_OBJS} ${SECUREC_OBJS} ${STFLAGS} ${STLIBS} -lsnmp++ -lfcgi ${DYFLAGS} -ldl -lpthread -lrt ${COV_OFLAGS}

${LIB_SECURE_COM}:${SECURE_COM_OBJS} ${SECUREC_OBJS} ${REST_OBJS} ${TCP_OBJS_SSL} ${ARRAY_OBJS} ${LIB_COMMON}
	${CPPC} ${DFLAGS} -o ${LIB_SECURE_COM} -L${OPEN_OPENSSL_LIB_DIR} -L${BIN_DIR} -L${KMC_LIB_DIR} -L${OPEN_CURL_LIB_DIR} \
	-lcommon -lKMC -lSDP -lcurl -lpthread -lrt -lssl -lcrypto -ldl \
	${SECURE_COM_OBJS} ${SECUREC_OBJS} ${REST_OBJS} ${TCP_OBJS_SSL} ${ARRAY_OBJS} ${COV_OFLAGS}

${LIB_SECURE_COMV1}:${SECURE_COM_OBJS} ${SECUREC_OBJS} ${REST_OBJS} ${TCP_OBJS_SSL} ${ARRAY_OBJS} ${LIB_COMMON}
	${CPPC} ${DFLAGS} -o ${LIB_SECURE_COMV1} -L${OPEN_OPENSSLV1_LIB_DIR} -L${BIN_DIR} -L${KMCV1_LIB_DIR} -L${OPEN_CURL_LIB_DIR} \
	-lcommon -lKMC -lSDP -lcurl -lpthread -lrt -lssl -lcrypto -ldl \
	${SECURE_COM_OBJS} ${SECUREC_OBJS} ${REST_OBJS} ${TCP_OBJS_SSL} ${ARRAY_OBJS} ${COV_OFLAGS}

${LIB_SECURE_COM_FOR_GAUSS}:${SECURE_COM_OBJS} ${SECUREC_OBJS} ${REST_OBJS} ${TCP_OBJS_SSL} ${ARRAY_OBJS} ${LIB_COMMON}
	${CPPC} ${DFLAGS} -o ${LIB_SECURE_COM_FOR_GAUSS} -L${OPEN_OPENSSL_LIB_DIR} -L${BIN_DIR} -L${KMC_LIB_DIR} -L${OPEN_CURL_LIB_DIR} \
	-lcommon -lKMC -lSDP -lcurl -lpthread -lrt -lssl -lcrypto -ldl \
	${SECURE_COM_OBJS} ${SECUREC_OBJS} ${REST_OBJS} ${TCP_OBJS_SSL} ${ARRAY_OBJS} ${COV_OFLAGS}

# static link common and other objs, don't use common dynamic library
${ROOTEXEC}:${ROOT_EXEC_OBJS} ${CURLCLIENT_OBJS} ${COMMON_OBJS} ${SECURE_COM_OBJS} ${TCP_OBJS_SSL} ${ARRAY_OBJS} ${ALARM_OBJS} ${TINYXML_OBJS} ${JSON_OBJS} ${SQLITE_OBJS} ${SECUREC_OBJS}
	${CPPC} ${OFLAGS} -o ${ROOTEXEC} ${CURLCLIENT_OBJS} ${ROOT_EXEC_OBJS} ${COMMON_OBJS} ${SECURE_COM_OBJS} ${TCP_OBJS_SSL} ${ARRAY_OBJS} ${ALARM_OBJS} ${TINYXML_OBJS} ${JSON_OBJS} ${SQLITE_OBJS} ${SECUREC_OBJS} \
	-L${OPEN_CURL_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${BIN_DIR} -L${KMC_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${UUID} ${LIB_STD} \
	${STFLAGS} ${STLIBS} -lcurl -lsecurec -lsnmp++ -lfcgi ${DYFLAGS} -lKMC -lSDP -lssl -lcrypto -ldl -lrt -lpthread ${COV_OFLAGS}

${CRYPTO}:${LIB_COMMON} ${LIB_SECURE_COM} ${CRYPTO_OBJS}
	${CPPC} ${OFLAGS} -o ${CRYPTO} ${CRYPTO_OBJS} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -L${UUID} -lsecurecom -lcommon ${STFLAGS} ${STLIBS} -lsnmp++ -lfcgi ${DYFLAGS} -lKMC -lSDP -lssl -lcrypto -lpthread -ldl -lrt ${COV_OFLAGS}

${SCRIPTSIGN}:${LIB_COMMON} ${LIB_SECURE_COM} ${SCRIPTSIGN_OBJS}
	${CPPC} ${OFLAGS} -o ${SCRIPTSIGN} ${SCRIPTSIGN_OBJS} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -L${UUID} -lsecurecom -lcommon ${STFLAGS} ${STLIBS} -lsnmp++ -lfcgi ${DYFLAGS} -lKMC -lSDP -lssl -lcrypto -lpthread -ldl -lrt ${COV_OFLAGS}

${DATAMIGRATION}:${LIB_COMMON} ${LIB_SECURE_COM} ${DATAMIGRATION_OBJS}
	${CPPC} ${OFLAGS} -o ${DATAMIGRATION} ${DATAMIGRATION_OBJS} -L${BIN_DIR} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -L${UUID} -lsecurecom -lcommon ${STFLAGS} ${STLIBS} -lsnmp++ -lfcgi ${DYFLAGS} -lKMC -lSDP -lssl -lcrypto -lpthread -ldl -lrt ${COV_OFLAGS}

${MONITOR}:${LIB_COMMON} ${LIB_SECURE_COM} ${MONITOR_OBJS} ${CURLCLIENT_OBJS} ${ALARM_OBJS}
	${CPPC} ${OFLAGS} -o ${MONITOR} ${MONITOR_OBJS} ${CURLCLIENT_OBJS} ${ALARM_OBJS} \
	-L${OPEN_CURL_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -L${UUID} \
	-lsecurecom -lcommon ${STFLAGS} ${STLIBS} -lcurl -lfcgi -lsnmp++ ${DYFLAGS} -lKMC -lSDP -lssl -lcrypto -lpthread -ldl -lrt ${COV_OFLAGS}

${XMLCFG}:${LIB_COMMON} ${LIB_SECURE_COM} ${XMLCFG_OBJS}
	${CPPC} ${OFLAGS} -o ${XMLCFG} ${XMLCFG_OBJS} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${UUID} -L${KMC_LIB_DIR} -lsecurecom -lcommon ${STFLAGS} ${STLIBS} -lsnmp++ -lfcgi ${DYFLAGS} -lKMC -lSDP -lssl -lcrypto -lpthread -ldl -lrt ${COV_OFLAGS}

${AGENTCLI}:${LIB_COMMON} ${LIB_SECURE_COM} ${THRIFT_SERVICE_OBJS} ${SERVICE_FACTORY_OBJS} ${APPPROTECT_PLUGIN_OBJS} ${LIB_ARCHIVE_STREAM_OBJS} \
	${PLUGINFX_OBJS} ${AGENTCLI_OBJS} ${LIB_APPHOST} ${CURLCLIENT_OBJS} ${ALARM_OBJS} ${MESSAGE_SERVICE_OBJS} ${CERTIFICATE_SERVICE_OBJS} \
	${TASKMANAGER_OBJS} ${SERVICES_DEVICE_OBJS} ${JOB_SERVICE_OBJS} ${TIMER_SERVICE_OBJS} 
	${CPPC} ${OFLAGS} -o ${AGENTCLI} ${AGENTCLI_OBJS} ${THRIFT_SERVICE_OBJS} ${SERVICE_FACTORY_OBJS} ${APPPROTECT_PLUGIN_OBJS} ${LIB_ARCHIVE_STREAM_OBJS} ${PLUGINFX_OBJS} \
	${CURLCLIENT_OBJS} ${ALARM_OBJS} ${MESSAGE_SERVICE_OBJS} ${CERTIFICATE_SERVICE_OBJS} ${TASKMANAGER_OBJS} ${SERVICES_DEVICE_OBJS} \
	${JOB_SERVICE_OBJS} ${TIMER_SERVICE_OBJS} \
	-L${OPEN_CURL_LIB_DIR} -L${OPEN_FCGI_LIB_DIR} -L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -L${UUID} -L${OPEN_THRIFT_DIR} -L${OPEN_LIBEVENT_DIR} \
	-lsecurecom -lcommon ${STFLAGS} ${STLIBS} ${LIB_TCMALLOC} -lfcgi -lsnmp++ -lcurl -lhost -lthriftz -lthriftnb -lthrift -levent ${DYFLAGS} -L${TCMALLOC_LIB_DIR} -lKMC -lSDP -lssl -lcrypto -lpthread -ldl -lrt ${COV_OFLAGS}

${GETINPUT}:${LIB_COMMON} ${LIB_SECURE_COM} ${GETINPUT_OBJS}
	${CPPC} ${OFLAGS} -o ${GETINPUT} ${GETINPUT_OBJS} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${UUID} -L${KMC_LIB_DIR} -lsecurecom -lcommon ${STFLAGS} ${STLIBS} -lsnmp++ -lfcgi ${DYFLAGS} -lKMC -lSDP -lssl -lcrypto -lpthread -ldl -lrt ${COV_OFLAGS}

${LIB_HOST}:${LIB_COMMON} ${LIB_SECURE_COM} ${LIB_APPHOST} ${PLUGINS_OBJS} ${PLUGINS_HOST_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_HOST} ${PLUGINS_OBJS} ${PLUGINS_HOST_OBJS} ${DATAMSG_OBJS} \
	-L${OPEN_FCGI_LIB_DIR} -L${BIN_DIR} -L${OPEN_CURL_LIB_DIR} -lsecurecom -lcommon ${STFLAGS} \
	-lhost -lcurl ${DYFLAGS} -lrt ${COV_OFLAGS}

${LIB_DEVICE}:${LIB_COMMON} ${LIB_SECURE_COM} ${LIB_APPDEVICE} ${PLUGINS_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_DEVICE} ${PLUGINS_OBJS} -L${BIN_DIR} -lsecurecom -lcommon ${STFLAGS} -ldevice ${DYFLAGS} -lrt ${COV_OFLAGS}

${LIB_ORACLE}:${LIB_COMMON} ${LIB_SECURE_COM} ${LIB_APPORACLE} ${PLUGINS_OBJS} ${PLUGINS_ORACLE_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_ORACLE} ${PLUGINS_OBJS} ${PLUGINS_ORACLE_OBJS} ${DATAMSG_OBJS} ${ALARM_OBJS} \
	-L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -lsnmp++ -lsecurecom -lcommon -loracle ${COV_OFLAGS}
    
${LIB_APP}:${LIB_COMMON} ${LIB_SECURE_COM} ${APPS_APP_OBJS} ${PLUGINS_OBJS} ${PLUGINS_APP_OBJS} ${LIB_APPORACLE}
	${CPPC} ${dFLAGS} -o ${LIB_APP} ${APPS_APP_OBJS} ${PLUGINS_OBJS} ${PLUGINS_APP_OBJS} ${DATAMSG_OBJS} ${HOST_OBJS} ${ALARM_OBJS} \
	-L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -L${OPEN_CURL_LIB_DIR} -lsnmp++ -lsecurecom -lcommon -lcurl -loracle ${COV_OFLAGS}

${LIB_ORACLENATIVE}:${LIB_COMMON} ${LIB_SECURE_COM} ${PLUGINS_OBJS} ${PLUGINS_ORACLENATIVE_OBJS} ${LIB_APPORACLE_NATIVE} ${LIB_APPORACLE} ${LIB_APPHOST} ${LIB_TASKMANAGER} ${LIB_APPDEVICE}
	${CPPC} ${dFLAGS} -o ${LIB_ORACLENATIVE} ${PLUGINS_OBJS} ${PLUGINS_ORACLENATIVE_OBJS} ${DATAMSG_OBJS} ${ALARM_OBJS} \
	-L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -lsecurecom -lcommon -loraclenative -loracle -ltaskmanager -ldevice -lhost -lsnmp++ ${COV_OFLAGS}

${LIB_VMWARENATIVE}:${LIB_COMMON} ${LIB_SECURE_COM} ${PLUGINS_OBJS} ${PLUGINS_VMWARENATIVE_OBJS} ${LIB_APPVMWARE_NATIVE} ${LIB_APPHOST} ${LIB_TASKMANAGER}
	${CPPC} ${dFLAGS} -o ${LIB_VMWARENATIVE} ${PLUGINS_OBJS} ${CURLCLIENT_OBJS} ${PLUGINS_VMWARENATIVE_OBJS} ${DATAMSG_OBJS} ${ALARM_OBJS} ${MESSAGE_SERVICE_OBJS} -L${OPEN_CURL_LIB_DIR} \
	-L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -lsnmp++ -lcurl -lsecurecom -lcommon -lvmwarenative -ltaskmanager -lhost ${COV_OFLAGS}

${LIB_APPPROTECT}:${LIB_COMMON} ${LIB_SECURE_COM} ${PLUGINS_OBJS} ${PLUGINS_APPPROTECT_FRAME_OBJS} ${LIB_APPPROTECT_NATIVE}
	${CPPC} ${dFLAGS} -o ${LIB_APPPROTECT} ${PLUGINS_OBJS} ${PLUGINS_APPPROTECT_FRAME_OBJS} \
	-L${BIN_DIR} -L${OPEN_SNMP_LIB_DIR} -lsecurecom -lcommon ${COV_OFLAGS}

${LIB_AFS}:${LIB_COMMON} ${AFS_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_AFS} ${AFS_OBJS} -L${BIN_DIR} -lcommon ${COV_OFLAGS}

############dataprocess################################
${DATAMSG_OBJS}:${OBJ_DATAMSG_DIR}/%.o:${SRC_DATAMSG_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${OPEN_SRC_DIR} -I${INC_OPEN_CURL_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}

DATAPROCESS = ${BIN_DIR}/dataprocess
dp:${DATAPROCESS}

${DATAPROCESS}:${LIB_COMMON} ${DATACONFIG_OBJS} ${DATAPATH_OBJS} ${DATARW_OBJS} ${DATAVMWARE_OBJS} ${DP_QOS_OBJS} ${DP_SCH_OBJS} ${DP_VMFS_OBJS} ${DP_VMFS6_OBJS} ${TCP_OBJS} ${DATAMSG_OBJS}
	${CPPC} ${oFLAGS} -o ${DATAPROCESS} ${COMMON_OBJS} ${DATACONFIG_OBJS} ${DATAPATH_OBJS} ${DATARW_OBJS} ${DATAVMWARE_OBJS} ${DP_QOS_OBJS} ${DP_SCH_OBJS} ${DP_VMFS_OBJS} ${DP_VMFS6_OBJS} ${TCP_OBJS} ${DATAMSG_OBJS} -L${BIN_DIR} -L${UUID} -L${TCMALLOC_LIB_DIR} -L${OPEN_SRC_DIR}/libaio/lib -laio -ldl -lpthread -lrt -static-libstdc++ -lcommon -lafs ${STFLAGS} -ltcmalloc ${STLIBS} ${DYFLAGS} ${COV_OFLAGS}

${DATAPATH_OBJS}:${OBJ_DATAPATH_DIR}/%.o:${SRC_DATAPATH_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_TCMALLOC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATACONFIG_OBJS}:${OBJ_DATACONFIG_DIR}/%.o:${SRC_DATACONFIG_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATARW_OBJS}:${OBJ_DATARW_DIR}/%.o:${SRC_DATARW_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATAVMWARE_OBJS}:${OBJ_DATAVMWARE_DIR}/%.o:${SRC_DATAVMWARE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DP_QOS_OBJS}:${OBJ_DP_QOS_DIR}/%.o:${SRC_DP_QOS_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} \
	-o $@ -c $< ${COV_CFLAGS}	
	
${DP_SCH_OBJS}:${OBJ_DP_SCH_DIR}/%.o:${SRC_DP_SCH_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DP_VMFS_OBJS}:${OBJ_DP_VMFS_DIR}/%.o:${SRC_DP_VMFS_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DP_VMFS6_OBJS}:${OBJ_DP_VMFS6_DIR}/%.o:${SRC_DP_VMFS6_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SRC_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
############dataprocess################################

#############
${TCP_OBJS}:${OBJ_MESSAGE_DIR}/tcp/%.o:${SRC_MESSAGE_DIR}/tcp/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}

${TCP_OBJS_SSL}:${OBJ_MESSAGE_DIR}/tcpssl/%.o:${SRC_MESSAGE_DIR}/tcp/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}

${REST_OBJS}:${OBJ_MESSAGE_DIR}/rest/%.o:${SRC_MESSAGE_DIR}/rest/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}
#############

${COMMON_OBJS}:${OBJ_COMMON_DIR}/%.o:${SRC_COMMON_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${BASE_OPEN_INC} \
	-I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_UUID_DIR} -o $@ -c $< ${COV_CFLAGS}

${SECURE_COM_OBJS}:${OBJ_SECURE_COM_DIR}/%.o:${SRC_SECURE_COM_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_KMC_MAIN_DIR} -I${INC_KMC_INC_DIR} -I${INC_KMC_INC_SDP_DIR} -I${BASE_OPEN_INC} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${ARRAY_OBJS}:${OBJ_ARRAY_DIR}/%.o:${SRC_ARRAY_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${BASE_OPEN_INC} -o $@ -c $< ${COV_CFLAGS}
	
${LIB_APPDEVICE}:${DEVICE_OBJS}
	${ARNew} ${LIB_APPDEVICE} ${DEVICE_OBJS}

${DEVICE_OBJS}:${OBJ_DEVICE_DIR}/%.o:${SRC_DEVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${OPEN_SRC_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_APPHOST}:${HOST_OBJS}
	${ARNew} ${LIB_APPHOST} ${HOST_OBJS}

${HOST_OBJS}:${OBJ_HOST_DIR}/%.o:${SRC_HOST_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} \
	-I${INC_OPEN_TINYXML_DIR} -I${INC_SECUREC_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_CURL_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${LIB_APPORACLE}:${APPS_ORACLE_OBJS}
	${ARNew} ${LIB_APPORACLE} ${APPS_ORACLE_OBJS}

${APPS_ORACLE_OBJS}:${OBJ_APPS_ORACLE_DIR}/%.o:${SRC_APPS_ORACLE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_OPEN_SNMP_DIR} -I${INC_OPEN_SNMP_MAIN_DIR} \
	-I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}
    
${APPS_APP_OBJS}:${OBJ_APPS_APP_DIR}/%.o:${SRC_APPS_APP_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_APPORACLE_NATIVE}:${APPS_ORACLENATIVE_OBJS}
	${ARNew} ${LIB_APPORACLE_NATIVE} ${APPS_ORACLENATIVE_OBJS}

${LIB_APPVMWARE_NATIVE}:${APPS_VMWARENATIVE_OBJS}
	${ARNew} ${LIB_APPVMWARE_NATIVE} ${APPS_VMWARENATIVE_OBJS}

${LIB_APPPROTECT_NATIVE}:${APPPROTECT_OBJS}
	${ARNew} ${LIB_APPORACLE_NATIVE} ${APPPROTECT_OBJS}

${APPS_ORACLENATIVE_OBJS}:${OBJ_APPS_ORACLENATIVE_DIR}/%.o:${SRC_APPS_ORACLENATIVE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -o $@ -c $< ${COV_CFLAGS}

${APPS_VMWARENATIVE_OBJS}:${OBJ_APPS_VMWARENATIVE_DIR}/%.o:${SRC_APPS_VMWARENATIVE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${AGENT_OBJS}:${OBJ_AGENT_DIR}/%.o:${SRC_AGENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_SERVICE_CENTER_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} \
	-I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_SNMP_DIR} -I${INC_OPEN_SNMP_MAIN_DIR} -I${INC_OPEN_CURL_DIR} -I${INC_TCMALLOC_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${ROOT_EXEC_OBJS}:${OBJ_ROOT_EXEC_DIR}/%.o:${SRC_ROOT_EXEC_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${BASE_OPEN_INC} -I${INC_OPEN_CURL_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${CRYPTO_OBJS}:${OBJ_CRYPTO_DIR}/%.o:${SRC_CRYPTO_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
	
${SCRIPTSIGN_OBJS}:${OBJ_SCRIPTSIGN_DIR}/%.o:${SRC_SCRIPTSIGN_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${DATAMIGRATION_OBJS}:${OBJ_DATAMIGRATION_DIR}/%.o:${SRC_DATAMIGRATION_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
	
${MONITOR_OBJS}:${OBJ_MONITOR_DIR}/%.o:${SRC_MONITOR_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-I${INC_OPEN_SNMP_DIR} -I${INC_OPEN_SNMP_MAIN_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${XMLCFG_OBJS}:${OBJ_XMLCFG_DIR}/%.o:${SRC_XMLCFG_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
	
${AGENTCLI_OBJS}:${OBJ_AGENTCLI_DIR}/%.o:${SRC_AGENTCLI_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} \
	-I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_JSON_DIR} \
	-o $@ -c $< ${COV_CFLAGS}
	
${GETINPUT_OBJS}:${OBJ_GETINPUT_DIR}/%.o:${SRC_GETINPUT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-o $@ -c $< ${COV_CFLAGS}

${CURLCLIENT_OBJS}:${OBJ_CURLCLIENT_DIR}/%.o:${SRC_CURLCLIENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_OPEN_CURL_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} \
	-I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${ALARM_OBJS}:${OBJ_ALARM_DIR}/%.o:${SRC_ALARM_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_SNMP_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-I${INC_OPEN_SNMP_MAIN_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_TASKMANAGER}:${TASKMANAGER_OBJS}
	${ARNew} ${LIB_TASKMANAGER} ${TASKMANAGER_OBJS}

${TASKMANAGER_OBJS}:${OBJ_TASKMANAGER_DIR}/%.o:${SRC_TASKMANAGE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-I${INC_OPEN_UUID_DIR} -I${INC_TCMALLOC_DIR} -I${INC_OPEN_JSON_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_SERVICE_CENTER_DIR} \
	-I${INC_BOOST_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINFX_OBJS}:${OBJ_PLUGINFX_DIR}/%.o:${SRC_PLUGINFX_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_INC}/pluginfx -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_SERVICE_CENTER_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} \
	-I${SRC_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${OPEN_SNMP_DIR} -I${INC_OPEN_SNMP_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_OBJS}:${OBJ_PLUGINS_DIR}/%.o:${SRC_PLUGINS_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_HOST_OBJS}:${OBJ_PLUGINS_HOST_DIR}/%.o:${SRC_PLUGINS_HOST_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_OPEN_SNMP_DIR} -I${INC_OPEN_SNMP_MAIN_DIR} -I${INC_SECUREC_DIR} \
	-I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_CURL_DIR} -I${INC_SERVICE_CENTER_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${PLUGINS_ORACLE_OBJS}:${OBJ_PLUGINS_ORACLE_DIR}/%.o:${SRC_PLUGINS_ORACLE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_APP_OBJS}:${OBJ_PLUGINS_APP_DIR}/%.o:${SRC_PLUGINS_APP_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_DPPSERVER_OBJS}:${OBJ_PLUGINS_DPPSERVER_DIR}/%.o:${SRC_PLUGINS_DPPSERVER_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_ORACLENATIVE_OBJS}:${OBJ_PLUGINS_ORACLENATIVE_DIR}/%.o:${SRC_PLUGINS_ORACLENATIVE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_VMWARENATIVE_OBJS}:${OBJ_PLUGINS_VMWARENATIVE_DIR}/%.o:${SRC_PLUGINS_VMWARENATIVE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${BASE_OPEN_INC}/tinyxml -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-I${INC_OPEN_SNMP_DIR} -I${INC_OPEN_SNMP_MAIN_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${PLUGINS_APPPROTECT_FRAME_OBJS}:${OBJ_PLUGINS_APPPROTECT_FRAME_DIR}/%.o:${SRC_PLUGINS_APPPROTECT_FRAME_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_THRIFT_DIR} \
	-I${INC_BOOST_DIR} -I${INC_OPEN_CURL_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${SQLITE_OBJS}:${SRC_OPEN_SQLITE_DIR}/sqlite3.c
	${cc} ${cFLAGS} ${RD_CFLAGS} -I${INC_OPEN_SQLITE_DIR} -o $@ -c ${SRC_OPEN_SQLITE_DIR}/sqlite3.c

${JSON_OBJS}:${OBJ_JSON_DIR}/%.o:${SRC_JSON_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${INC_OPEN_JSON_DIR} -o $@ -c $<

${TINYXML_OBJS}:${OBJ_TINYXML_DIR}/%.o:${SRC_TINYXML_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $<

${SECUREC_OBJS}:${OBJ_SECUREC_DIR}/%.o:${SRC_SECUREC_DIR}/%.c
	${CC} ${cFLAGS} -I${INC_SECUREC_DIR} -o $@ -c $<

${APPPROTECT_OBJS}:${OBJ_APPPROTECT_DIR}/%.o:${SRC_APPPROTECT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_APPPROTECT_DIR} -I${INC_SECUREC_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} \
	-I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${APPPROTECT_PLUGIN_OBJS}:${OBJ_APPPROTECT_PLUGIN_DIR}/%.o:${SRC_APPPROTECT_PLUGIN_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_THRIFT_SERVICE_DIR} -I${INC_OPEN_CURL_DIR} \
	-I${INC_APPPROTECT_PLUGIN_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_SERVICE_CENTER_DIR} -I${INC_BOOST_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${AFS_OBJS}:${OBJ_AFS_DIR}/%.o:${SRC_AFS_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -o $@ -c $< ${COV_CFLAGS}

#############xbsa###################################
${LIB_XBSA_COM_OBJS}:${OBJ_XBSA_COM_DIR}/%.o:${SRC_XBSA_COM_DIR}/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${BASE_INC} -I${BASE_INC}/apps/dws -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_ARCHIVE_STREAM_OBJS}:${OBJ_ARCHIVE_STREAM_DIR}/%.o:${SRC_ARCHIVE_STREAM_DIR}/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${INC_ARCHIVE_STREAM_DIR} -I${BASE_INC} -I${BASE_INC}/message/archivestream -I${BASE_INC}/message/tcp -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_JSON_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -I${OPEN_ZLIB_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_XBSACOMM_OBJS}:${OBJ_XBSACOMM_CLIENT_DIR}/%.o:${SRC_XBSACOMM_CLIENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${BASE_INC} -I${INC_XBSACOMM_CLIENT_DIR} -I${BASE_INC}/xbsaclientcomm -I${BASE_INC}/apps/dws/XBSACom -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_JSON_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -I${OPEN_ZLIB_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_XBSA_OBJS}:${OBJ_XBSA_CLIENT_DIR}/%.o:${SRC_XBSA_CLIENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${INC_XBSA_CLIENT_DIR} -I${BASE_INC} -I${BASE_INC}/apps/dws -I${BASE_INC}/apps/dws/XBSACom -I${BASE_INC}/xbsa -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_JSON_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -I${OPEN_ZLIB_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_XBSA}:${LIB_COMMON} ${LIB_SECURE_COM} ${LIB_XBSACOMM_OBJS} ${LIB_XBSA_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_ARCHIVE_STREAM_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_XBSA} ${LIB_XBSACOMM_OBJS} ${LIB_XBSA_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_ARCHIVE_STREAM_OBJS} -L${OPEN_THRIFTV1_DIR} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSLV1_LIB_DIR} -I${INC_OPEN_JSON_DIR} -L${KMCV1_LIB_DIR} -L${OPEN_LIBEVENT_DIR} -lsecurecomv1 -lcommon ${STFLAGS} -lfcgi -lKMC -lSDP -lthriftz -lthriftnb -lthrift -levent -lssl -lcrypto ${DYFLAGS} ${COV_OFLAGS}

${LIB_HCSXBSA_OBJS}:${OBJ_HCS_XBSA_CLIENT_DIR}/%.o:${SRC_HCSXBSA_CLIENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${INC_XBSA_CLIENT_DIR} -I${BASE_INC} -I${BASE_INC}/apps/dws -I${BASE_INC}/apps/dws/XBSACom -I${BASE_INC}/xbsa -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_JSON_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -I${OPEN_ZLIB_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_XBSA_FOR_HCS}:${LIB_COMMON} ${LIB_SECURE_COM_FOR_GAUSS} ${LIB_HCSXBSA_OBJS} ${LIB_XBSACOMM_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_ARCHIVE_STREAM_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_XBSA_FOR_HCS} ${LIB_HCSXBSA_OBJS} ${LIB_XBSACOMM_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_ARCHIVE_STREAM_OBJS} -L${OPEN_THRIFT_DIR} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -I${INC_OPEN_JSON_DIR} -L${KMC_LIB_DIR} -L${OPEN_LIBEVENT_DIR} -lsecurecomforgauss -lcommon ${STFLAGS} -lfcgi -lKMC -lSDP -lthriftz -lthriftnb -lthrift -levent -lssl -lcrypto ${DYFLAGS} ${COV_OFLAGS}

${LIB_TPOPSXBSA_OBJS}:${OBJ_TPOPS_XBSA_CLIENT_DIR}/%.o:${SRC_TPOPSXBSA_CLIENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${INC_XBSA_CLIENT_DIR} -I${BASE_INC} -I${BASE_INC}/apps/dws -I${BASE_INC}/apps/dws/XBSACom -I${BASE_INC}/xbsa -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_JSON_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -I${OPEN_ZLIB_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_XBSA_FOR_TPOPS}:${LIB_COMMON} ${LIB_SECURE_COM_FOR_GAUSS} ${LIB_TPOPSXBSA_OBJS} ${LIB_XBSACOMM_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_ARCHIVE_STREAM_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_XBSA_FOR_TPOPS} ${LIB_TPOPSXBSA_OBJS} ${LIB_XBSACOMM_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_ARCHIVE_STREAM_OBJS} -L${OPEN_THRIFT_DIR} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -I${INC_OPEN_JSON_DIR} -L${KMC_LIB_DIR} -L${OPEN_LIBEVENT_DIR} -lsecurecomforgauss -lcommon ${STFLAGS} -lfcgi -lKMC -lSDP -lthriftz -lthriftnb -lthrift -levent -lssl -lcrypto ${DYFLAGS} ${COV_OFLAGS}

${LIB_IIFXBSA_OBJS}:${OBJ_IIF_XBSA_CLIENT_DIR}/%.o:${SRC_IIFXBSA_CLIENT_DIR}/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${INC_XBSA_CLIENT_DIR} -I${BASE_INC} -I${BASE_INC}/xbsaclientcomm -I${BASE_INC}/apps/dws/XBSACom -I${BASE_INC}/xbsa -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} -I${INC_OPEN_JSON_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -I${OPEN_ZLIB_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_IIFXBSA}:${LIB_COMMON} ${LIB_SECURE_COM} ${LIB_XBSACOMM_OBJS} ${LIB_IIFXBSA_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_ARCHIVE_STREAM_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_IIFXBSA} ${LIB_XBSACOMM_OBJS} ${LIB_IIFXBSA_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_ARCHIVE_STREAM_OBJS} -L${OPEN_THRIFT_DIR} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -I${INC_OPEN_JSON_DIR} -L${KMC_LIB_DIR} -L${OPEN_LIBEVENT_DIR} -lsecurecom -lcommon ${STFLAGS} -lfcgi -lKMC -lSDP -lthriftz -lthriftnb -lthrift -levent -lssl -lcrypto ${DYFLAGS} ${COV_OFLAGS}

${LIB_ARCHIVE}:${LIB_COMMON} ${LIB_SECURE_COM} ${TCP_OBJS_SSL}
	${CPPC} ${dFLAGS} -o ${LIB_ARCHIVE} ${TCP_OBJS_SSL} -L${OPEN_THRIFT_DIR} -L${BIN_DIR} -L${OPEN_FCGI_LIB_DIR} -L${OPEN_OPENSSL_LIB_DIR} -L${KMC_LIB_DIR} -L${OPEN_LIBEVENT_DIR} -lsecurecom -lcommon ${STFLAGS} -lfcgi -lKMC -lSDP -lthriftz -lthriftnb -lthrift -levent -lssl -lcrypto ${DYFLAGS} ${COV_OFLAGS}

${LIB_DWS_SERVER_OBJS}:${OBJ_DWS_SERVER_DIR}/%.o:${SRC_DWS_SERVER_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_INC}/apps/dws -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_OPEN_UUID_DIR} \
	-I${INC_BOOST_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_DWS_SERVER_DIR} -I${INC_LIBEVENT_DIR} -o $@ -c $< ${COV_CFLAGS}

${LIB_DWS_PLUGIN_OBJS}:${OBJ_DWS_PLUGIN_DIR}/%.o:${SRC_DWS_PLUGIN_DIR}/%.cpp
	${CPPC} ${CFLAGS} -DSUPPORT_SSL -I${BASE_INC} -I${BASE_INC}/apps/dws -I${BASE_OPEN_INC} -I${INC_SECUREC_DIR} -I${INC_OPEN_TINYXML_DIR} -I${INC_OPEN_OPENSSL_DIR} \
	-I${INC_OPEN_UUID_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_BOOST_DIR} -I${INC_LIBEVENT_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${LIB_XBSA_SERVER}:${LIB_DWS_SERVER_OBJS}
	${ARNew} ${LIB_XBSA_SERVER} ${LIB_DWS_SERVER_OBJS}

${LIB_DWS}:${LIB_COMMON} ${LIB_SECURE_COM} ${PLUGINS_OBJS} ${LIB_DWS_PLUGIN_OBJS} ${LIB_XBSA_SERVER} ${LIB_XBSA_COM_OBJS}
	${CPPC} ${dFLAGS} -o ${LIB_DWS} ${PLUGINS_OBJS}  ${LIB_DWS_PLUGIN_OBJS} ${LIB_XBSA_COM_OBJS} ${LIB_XBSA_SERVER} -L${OPEN_OPENSSL_LIB_DIR} -L${OPEN_LIBEVENT_DIR} -L${OPEN_THRIFT_DIR} -L${BIN_DIR} -lsecurecom -lcommon ${STFLAGS} -lssl -lcrypto -lthriftz -lthriftnb -lthrift -levent -levent_pthreads -lxbsaserver ${DYFLAGS} ${COV_OFLAGS}

#########servciefactory#############
${SERVICE_FACTORY_OBJS}:${OBJ_SERVICE_FACTORY_DIR}/%.o:${SRC_SERVICE_FACTORY_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_BOOST_DIR} -I${INC_SECUREC_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_SERVICE_CENTER_DIR} -I${INC_LIBEVENT_DIR} -o $@ -c $< ${COV_CFLAGS}

${THRIFT_SERVICE_OBJS}:${OBJ_THRIFT_SERVICE_DIR}/%.o:${SRC_THRIFT_SERVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC}  -I${BASE_OPEN_INC} -I${INC_BOOST_DIR} -I${INC_THRIFT_SERVICE_DIR} -I${INC_SECUREC_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_SERVICE_CENTER_DIR} -I${INC_LIBEVENT_DIR} -I${INC_OPEN_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${CERTIFICATE_SERVICE_OBJS}:${OBJ_CERTIFICATE_SERVICE_DIR}/%.o:${SRC_CERTIFICATE_SERVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_BOOST_DIR} \
	-I${INC_OPEN_THRIFT_DIR} -I${INC_SERVICE_CENTER_DIR} -I${INC_LIBEVENT_DIR} -I${INC_SECUREC_DIR} -I${SRC_TINYXML_DIR} -o $@ -c $< ${COV_CFLAGS}

${MESSAGE_SERVICE_OBJS}:${OBJ_MESSAGE_SERVICE_DIR}/%.o:${SRC_MESSAGE_SERVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_OPEN_THRIFT_DIR} -I${INC_SECUREC_DIR} -I${INC_BOOST_DIR} \
	-I${INC_SERVICE_CENTER_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${JOB_SERVICE_OBJS}:${OBJ_JOB_SERVICE_DIR}/%.o:${SRC_JOB_SERVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_OPEN_THRIFT_DIR} -I${INC_SECUREC_DIR} -I${INC_BOOST_DIR} \
	-I${INC_SERVICE_CENTER_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}

${TIMER_SERVICE_OBJS}:${OBJ_TIMER_SERVICE_DIR}/%.o:${SRC_TIMER_SERVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_OPEN_THRIFT_DIR} -I${INC_SECUREC_DIR} -I${INC_BOOST_DIR} \
	-I${INC_SERVICE_CENTER_DIR} -I${INC_OPEN_CURL_DIR} -o $@ -c $< ${COV_CFLAGS}
	
${SERVICES_DEVICE_OBJS}:${OBJ_SERVICES_DEVICE_DIR}/%.o:${SRC_SERVICES_DEVICE_DIR}/%.cpp
	${CPPC} ${CFLAGS} -I${BASE_INC} -I${BASE_OPEN_INC} -I${INC_BOOST_DIR} -I${INC_SERVICES_DEVICE_DIR} \
	-I${SRC_TINYXML_DIR} -I${SRC_AGENTCLI_DIR} -I${INC_OPEN_THRIFT_DIR} -I${INC_OPEN_OPENSSL_DIR} -I${INC_SECUREC_DIR} \
	-I${INC_SERVICE_CENTER_DIR} -I${INC_LIBEVENT_DIR} -I${INC_OPEN_CURL_DIR} -I${INC_OPEN_UUID_DIR} -L${SRC_AGENTCLI_DIR} -o $@ -c $< ${COV_CFLAGS}

clean:
	find ${OBJ_DIR} -name "*.o" | xargs -L 1  rm -rf
	rm -rf ${TARGET} ${BIN_DIR}/*.a ${BIN_DIR}/*.so ${PLUGINS_DIR}/*.so ${PLUGINS_DIR}/*.a