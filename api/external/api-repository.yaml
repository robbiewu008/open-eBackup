swagger: '2.0'
info:
  version: v1
  title: 存储管理接口
  contact: {}
  license: {}
host: localhost
basePath: /
tags:
  - name: backup-vol-controller
    description: Backup Vol Controller
  - name: local-storage-api
    description: local-storage-api
  - name: product-storages-api
    description: product-storages-api
  - name: storages-alarm-Threshold-api
    description: storages-alarm-Threshold-api
  - name: storages-api
    description: storages-api
paths:
  /v1/backup-storage/nodes:
    get:
      tags:
        - backup-vol-controller
      summary: 查询节点信息
      operationId: getAllNodeInfoUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/AnyBackupNodeVO'
              originalRef: AnyBackupNodeVO
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
  /v1/backup-storage/nodes/relocation:
    post:
      tags:
        - backup-vol-controller
      summary: 回迁指定节点
      operationId: relocationNodeUsingPOST_1
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: nodeRelocation
          description: 回迁指定节点
          required: true
          schema:
            $ref: '#/definitions/AnyBackupNodeRelocation'
            originalRef: AnyBackupNodeRelocation
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
  /v1/backup-storage/nodes/relocation/info:
    get:
      tags:
        - backup-vol-controller
      summary: 查询需要回迁的节点信息
      operationId: nodeRelocationInfoUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/AnyBackupNodeRelocation'
              originalRef: AnyBackupNodeRelocation
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
  '/v1/backup-storage/nodes/{nodeId}/{type}':
    get:
      tags:
        - backup-vol-controller
      summary: 查询节点路径空闲容量
      operationId: getNodeFreeSizeUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: nodeId
          in: path
          description: 节点ID
          required: true
          type: string
          pattern: '^[a-zA-Z0-9]{1,1024}$'
        - name: type
          in: path
          description: 卷类型
          required: true
          type: integer
          format: int32
      responses:
        '200':
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/AnyBackupPathInfo'
              originalRef: AnyBackupPathInfo
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
  /v1/backup-storage/volumes:
    get:
      tags:
        - backup-vol-controller
      summary: 查询标准备份池卷
      operationId: getAllVolsUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: index
          in: query
          description: 页数
          required: false
          type: integer
          default: 1
          minimum: 0.0
          exclusiveMinimum: false
          format: int32
          allowEmptyValue: false
        - name: size
          in: query
          description: 每页数量
          required: false
          type: integer
          default: 5
          maximum: 200.0
          exclusiveMaximum: false
          minimum: 0.0
          exclusiveMinimum: false
          format: int32
          allowEmptyValue: false
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/BackupVolumePageData«StandardBackupVolVO»'
            originalRef: BackupVolumePageData«StandardBackupVolVO»
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
    post:
      tags:
        - backup-vol-controller
      summary: 创建标准备份池卷
      operationId: addVolUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: standardBackupVol
          description: 标准备份池卷
          required: true
          schema:
            $ref: '#/definitions/StandardBackupVol'
            originalRef: StandardBackupVol
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
  '/v1/backup-storage/volumes/index/{nodeId}':
    get:
      tags:
        - backup-vol-controller
      summary: 查询索引卷是否存在
      operationId: isIndexVolExistUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: nodeId
          in: path
          description: 节点ID
          required: true
          type: string
          pattern: '^[a-zA-Z0-9]{1,1024}$'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/AnyBackupVolExist'
            originalRef: AnyBackupVolExist
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
  '/v1/backup-storage/volumes/{name}':
    get:
      tags:
        - backup-vol-controller
      summary: 查询卷是否存在
      operationId: isVolExistUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: name
          in: path
          description: 卷名
          required: true
          type: string
          pattern: '^[a-zA-Z0-9]{3,30}$'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/AnyBackupVolExist'
            originalRef: AnyBackupVolExist
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
    delete:
      tags:
        - backup-vol-controller
      summary: 删除标准备份池卷
      operationId: delVolUsingDELETE
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: name
          in: path
          description: 标准备份池卷名
          required: true
          type: string
          pattern: '^[a-zA-Z0-9]{3,30}$'
      responses:
        '200':
          description: OK
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
      security:
        - Authorization:
            - global
      deprecated: false
  /v1/local-storage:
    get:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - local-storage-api
      summary: 获取本地存储信息
      operationId: getStorageInfoUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/LocalStorageInfoRes'
            originalRef: LocalStorageInfoRes
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/local-storage/access-point:
    get:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - local-storage-api
      summary: 获取令牌
      operationId: getStorageTokenUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/StorageAccessRes'
            originalRef: StorageAccessRes
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/local-storage/action/auth:
    put:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - local-storage-api
      summary: 修改本地存储认证信息
      operationId: updateLocalStorageAuthUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: request
          description: 修改存储认证信息请求参数
          required: false
          schema:
            $ref: '#/definitions/UpdateStorageRequest'
            originalRef: UpdateStorageRequest
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/local-storage/auth:
    get:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - local-storage-api
      summary: 获取本地存储认证信息
      operationId: getLocalStorageAuthUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/LocalStorageAuthRes'
            originalRef: LocalStorageAuthRes
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/product-storages:
    get:
      tags:
        - product-storages-api
      summary: 分页查询
      operationId: queryProductStoragesUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: conditions
          in: query
          description: 查询条件
          required: false
          type: string
          allowEmptyValue: false
        - name: orders
          in: query
          description: 排序方式
          required: false
          type: array
          items:
            type: string
          collectionFormat: multi
          allowEmptyValue: false
        - name: page
          in: query
          description: 分页起始页面
          required: false
          type: integer
          format: int32
          allowEmptyValue: false
        - name: size
          in: query
          description: 分页数量
          required: false
          type: integer
          format: int32
          allowEmptyValue: false
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/BasePage«ProductStorageRes»'
            originalRef: BasePage«ProductStorageRes»
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
    post:
      tags:
        - product-storages-api
      summary: 创建存储信息
      operationId: createStorageUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: storageDeviceInfo
          description: 外部存储信息
          required: false
          schema:
            $ref: '#/definitions/ProductStorageReq'
            originalRef: ProductStorageReq
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
  '/v1/product-storages/{storageId}':
    get:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - product-storages-api
      summary: 查询存储信息
      operationId: getProductStorageUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: storageId
          in: path
          description: 存储id
          required: false
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/ProductStorageRes'
            originalRef: ProductStorageRes
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
    put:
      tags:
        - product-storages-api
      summary: 更新存储信息
      operationId: updateProductStorageUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: storageDeviceInfo
          description: 外部存储信息
          required: false
          schema:
            $ref: '#/definitions/ProductStorageReq'
            originalRef: ProductStorageReq
        - name: storageId
          in: path
          description: 存储id
          required: false
          type: string
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
      deprecated: false
    delete:
      tags:
        - product-storages-api
      summary: 删除存储信息
      operationId: deleteStorageUsingDELETE
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: storageId
          in: path
          description: 存储id
          required: false
          type: string
      responses:
        '200':
          description: OK
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
      security:
        - Authorization:
            - global
      deprecated: false
  /v1/storages:
    get:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-api
      summary: 查询存储库信息
      operationId: storageUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: pageSize
          in: query
          description: 分页数量
          required: false
          type: integer
          maximum: 200.0
          minimum: 0.0
          format: int32
          x-example: 10
        - name: startPage
          in: query
          description: 分页起始页面
          required: false
          type: integer
          minimum: 0.0
          format: int32
          x-example: 0
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/PageListResponse«RepositoryBase»'
            originalRef: PageListResponse«RepositoryBase»
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
    post:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-api
      summary: 创建存储库
      operationId: createStorageUsingPOST_1
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: request
          description: 创建存储库请求参数
          required: false
          schema:
            $ref: '#/definitions/StorageRequest'
            originalRef: StorageRequest
      responses:
        '200':
          description: OK
          schema:
            type: integer
            format: int32
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  /v1/storages/local:
    get:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-api
      summary: 查询本地存储信息
      operationId: getLocalStorageUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/RepositoryBase'
            originalRef: RepositoryBase
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  '/v1/storages/{id}/alarm-threshold':
    get:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-alarm-Threshold-api
      summary: 查询存储库的容量告警阈值
      operationId: queryThresholdUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: id
          in: path
          description: 存储库ID
          required: true
          type: string
          maxLength: 255
          minLength: 1
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/RepositoryAlarmThresholdVo'
            originalRef: RepositoryAlarmThresholdVo
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
    put:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-alarm-Threshold-api
      summary: 更新存储库的容量告警阈值
      operationId: updateThresholdUsingPUT_1
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: id
          in: path
          description: 存储库ID
          required: true
          type: string
          maxLength: 255
          minLength: 1
        - in: body
          name: repositoryThresholdRequest
          description: 告警阈值请求参数
          required: false
          schema:
            $ref: '#/definitions/RepositoryThresholdRequest'
            originalRef: RepositoryThresholdRequest
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  '/v1/storages/{id}/alarm-threshold-local':
    put:
      x-impact-subsystem: 影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-alarm-Threshold-api
      summary: 更新存储库的容量告警阈值
      operationId: updateThresholdUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: id
          in: path
          description: 存储库ID
          required: true
          type: string
          maxLength: 255
          minLength: 1
        - name: limitValue
          in: query
          description: 告警阈值(百分比)
          required: false
          type: integer
          minimum: 1.0
          format: int64
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
  '/v1/storages/{storageId}':
    get:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'Y'
      x-dp-admin-role: 'Y'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-api
      summary: 查询存储库信息
      operationId: queryStorageByIdUsingGET
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: storageId
          in: path
          description: 存储id
          required: false
          type: string
          maxLength: 256
          minLength: 1
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/CompleteStorageInfoRes'
            originalRef: CompleteStorageInfoRes
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
    put:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-api
      summary: 更新存储库信息
      operationId: updateStorageUsingPUT
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - in: body
          name: request
          description: 更新存储库请求参数
          required: false
          schema:
            $ref: '#/definitions/UpdateArchiveStorage'
            originalRef: UpdateArchiveStorage
        - name: storageId
          in: path
          description: 存储id
          required: false
          type: string
          maxLength: 256
          minLength: 1
      responses:
        '200':
          description: OK
          schema:
            type: integer
            format: int32
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
    delete:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-api
      summary: 删除存储库
      operationId: deleteStorageUsingDELETE_1
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: storageId
          in: path
          description: 存储id
          required: false
          type: string
          maxLength: 256
          minLength: 1
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/DeleteStorageRes'
            originalRef: DeleteStorageRes
        '204':
          description: No Content
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
      security:
        - Authorization:
            - global
  '/v1/storages/{storageId}/action/import':
    post:
      x-impact-subsystem: 不影响
      x-access-port: 25081
      x-auth-required: 'Y'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'Y'
      x-sysadmin-role: 'Y'
      tags:
        - storages-api
      summary: 导入归档副本
      operationId: importArchiveCopiesByStorageIdUsingPOST
      consumes:
        - application/json
      produces:
        - '*/*'
      parameters:
        - name: X-Auth-Token
          in: header
          description: Access token
          required: true
          type: string
        - name: storageId
          in: path
          description: 存储id
          required: false
          type: string
          maxLength: 256
          minLength: 1
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
      security:
        - Authorization:
            - global
securityDefinitions:
  Authorization:
    type: apiKey
    name: TOKEN
    in: header
definitions:
  AnyBackupNodeRelocation:
    type: object
    required:
      - nodeId
      - realNodeName
    properties:
      nodeId:
        type: string
        description: 节点ID
        pattern: '^[a-zA-Z0-9]{1,1024}$'
      realNodeName:
        type: string
        description: 节点名称
        pattern: '^[a-zA-Z0-9]{1,1024}$'
    title: AnyBackupNodeRelocation
  AnyBackupNodeVO:
    type: object
    properties:
      description:
        type: string
        description: 描述
      hostName:
        type: string
        description: 主机名称
      id:
        type: string
        description: 节点ID
      nodeIp:
        type: string
        description: 节点IP
      nodeName:
        type: string
        description: POD名称
      realNodeName:
        type: string
        description: 节点名称
      status:
        type: integer
        format: int32
        description: 节点状态
    title: AnyBackupNodeVO
  AnyBackupPathInfo:
    type: object
    properties:
      freeSize:
        type: integer
        format: int64
        description: 空闲容量
      name:
        type: string
        description: 名称
      path:
        type: string
        description: 路径
    title: AnyBackupPathInfo
  AnyBackupVolExist:
    type: object
    properties:
      isExisted:
        type: boolean
        description: 是否存在
    title: AnyBackupVolExist
  BackupVolumePageData«StandardBackupVolVO»:
    type: object
    properties:
      data:
        type: array
        description: 卷列表
        items:
          $ref: '#/definitions/StandardBackupVolVO'
          originalRef: StandardBackupVolVO
      totalNum:
        type: integer
        format: int64
        description: 总数
    title: BackupVolumePageData«StandardBackupVolVO»
  BasePage«ProductStorageRes»:
    type: object
    properties:
      items:
        type: array
        description: 详情
        items:
          $ref: '#/definitions/ProductStorageRes'
          originalRef: ProductStorageRes
      page_no:
        type: integer
        format: int64
        description: 页码
      page_size:
        type: integer
        format: int64
        description: 每页总数
      pages:
        type: integer
        format: int64
        description: 总页数
      total:
        type: integer
        format: int64
        description: 总数
    title: BasePage«ProductStorageRes»
  CompleteStorageInfoRes:
    type: object
    properties:
      ak:
        type: string
        description: AK
      alarmEnable:
        type: boolean
        description: 是否开启告警
      alarmLimitValueUnit:
        type: string
        description: 告警阈值单位
      alarmThreshold:
        type: integer
        format: int64
        description: 告警阈值
      bucketName:
        type: string
        description: 数据桶名称
      cloudType:
        type: integer
        format: int32
        description: 云存储类型
      endpoint:
        type: string
        description: 终端节点
      freeSize:
        type: integer
        format: int64
        description: 剩余容量
      indexBucketName:
        type: string
        description: 索引桶名称
      proxyEnable:
        type: boolean
        description: 是否使用代理
      proxyHostName:
        type: string
        description: 代理主机名
      proxyUserName:
        type: string
        description: 代理用户名
      status:
        type: integer
        format: int32
        description: 存储库状态
      storageName:
        type: string
        description: 存储库名字
      totalSize:
        type: integer
        format: int64
        description: 总容量
      type:
        type: integer
        format: int32
        description: '存储库类型。   1:本地存储库  2:蓝光存储库  3:磁带存储库'
      useHttps:
        type: boolean
        description: 是否使用HTTPS
      usedSize:
        type: integer
        format: int64
        description: 已使用容量
    title: CompleteStorageInfoRes
  DeleteStorageRes:
    type: object
    properties:
      slaId:
        type: string
        description: 已绑定的SLA ID
      status:
        type: integer
        format: int32
        description: 删除结果
    title: DeleteStorageRes
  DoradoInternalAlarm:
    type: object
    properties:
      alarmId:
        type: string
      alarmLevel:
        type: integer
        format: int32
      alarmParam:
        type: array
        items:
          type: string
      alarmSequence:
        type: integer
        format: int64
      alarmTime:
        type: integer
        format: int64
      clearTime:
        type: integer
        format: int64
      entity:
        type: string
      moId:
        type: string
      moIp:
        type: string
      moName:
        type: string
      recoverTime:
        type: integer
        format: int64
      resourceId:
        type: string
      sourceId:
        type: string
      sourceType:
        type: string
      userId:
        type: string
    title: DoradoInternalAlarm
  FullStorageInfo:
    type: object
    properties:
      ak:
        type: string
        description: AK
      alarmEnable:
        type: boolean
        description: 是否开启告警
      alarmLimitValueUnit:
        type: string
        description: 告警阈值单位
      alarmThreshold:
        type: integer
        format: int64
        description: 告警阈值
      bucketName:
        type: string
        description: 数据桶名称
      cloudType:
        type: integer
        format: int32
        description: 云存储类型
      endpoint:
        type: string
        description: 终端节点
      freeSize:
        type: integer
        format: int64
        description: 剩余容量
      id:
        type: string
      indexBucketName:
        type: string
        description: 索引桶名称
      port:
        type: integer
        format: int32
      proxyEnable:
        type: boolean
        description: 是否使用代理
      proxyHostName:
        type: string
        description: 代理主机名
      proxyPort:
        type: string
      proxyUrl:
        type: string
      proxyUserName:
        type: string
        description: 代理用户名
      proxyUserPwd:
        type: string
      sk:
        type: string
      status:
        type: integer
        format: int32
        description: 存储库状态
      storageName:
        type: string
        description: 存储库名字
      totalSize:
        type: integer
        format: int64
        description: 总容量
      type:
        type: integer
        format: int32
        description: '存储库类型。   1:本地存储库  2:蓝光存储库  3:磁带存储库'
      useHttps:
        type: boolean
        description: 是否使用HTTPS
      usedSize:
        type: integer
        format: int64
        description: 已使用容量
    title: FullStorageInfo
  LocalStorageAuthRes:
    type: object
    properties:
      status:
        type: string
        description: 状态
        enum:
          - NORMAL
          - ABNORMAL
      userName:
        type: string
        description: 用户名
    title: LocalStorageAuthRes
  LocalStorageInfoRes:
    type: object
    properties:
      esn:
        type: string
        description: 序列号
      healthStatus:
        type: string
        description: 本地存储健康状态
      location:
        type: string
        description: 位置
      mode:
        type: string
        description: 型号
      patchVersion:
        type: string
        description: 补丁版本
      totalCapacity:
        type: string
        description: 容量
      type:
        type: string
        description: 设备类型
      vasaAltrnateName:
        type: string
        description: 名称
      version:
        type: string
        description: 版本
      wwn:
        type: string
        description: wwn
    title: LocalStorageInfoRes
  PageListResponse«RepositoryBase»:
    type: object
    properties:
      records:
        type: array
        description: 分页查询结果列表
        items:
          $ref: '#/definitions/RepositoryBase'
          originalRef: RepositoryBase
      totalCount:
        type: integer
        format: int32
        description: 总数
    title: PageListResponse«RepositoryBase»
  ProductStorageInfo:
    type: object
    properties:
      deviceId:
        type: string
        description: 设备id
      id:
        type: string
        description: 存储id
      ip:
        type: string
        description: 存储ip地址
      lunId:
        type: string
        description: lun id
      password:
        type: string
        description: 密码
      port:
        type: integer
        format: int32
        description: 端口号
      userName:
        type: string
        description: 用户名
    title: ProductStorageInfo
  ProductStorageInfoRes:
    type: object
    properties:
      storageInfo:
        $ref: '#/definitions/ProductStorageInfo'
        originalRef: ProductStorageInfo
      wwn:
        type: string
    title: ProductStorageInfoRes
  ProductStorageReq:
    type: object
    properties:
      ip:
        type: string
        description: 存储ip地址
      password:
        type: string
        description: 密码
      port:
        type: integer
        format: int32
        description: 端口号
      userName:
        type: string
        description: 用户名
    title: ProductStorageReq
  ProductStorageRes:
    type: object
    properties:
      createTime:
        type: string
        description: 添加时间
      deviceName:
        type: string
        description: 设备名
      esn:
        type: string
        description: 序列号
      id:
        type: string
        description: 存储id
      ip:
        type: string
        description: 存储ip地址
      port:
        type: integer
        format: int32
        description: 端口号
      status:
        type: string
        description: 设备状态
        enum:
          - NORMAL
          - ABNORMAL
      type:
        type: string
        description: 设备类型
      userName:
        type: string
        description: 用户名
      wwn:
        type: string
        description: wwn
    title: ProductStorageRes
  RepositoryAlarmThresholdVo:
    type: object
    properties:
      alarmLevel:
        type: integer
        format: int32
        example: 4
        description: '告警等级[取值范围] 3:重要 4:紧急'
      limitValue:
        type: integer
        format: int64
        example: 80
        description: '告警阈值，type为1时表示百分比[取值范围]（50-90）;type为2时表示绝对值[取值范围]（正整数）,单位为GB'
      limitValueUnit:
        type: string
        example: 1
        description: '告警阈值存储单位[取值范围] 1表示TB, 2表示GB，当告警类型是绝对值时进行填写'
      matchTime:
        type: integer
        format: int32
        example: 3
        description: 触发条件
      recoverValue:
        type: integer
        format: int64
        example: 50
        description: '清除告警阈值，type为1时表示百分比[取值范围]（小于告警阈值）;type为2时表示绝对值[取值范围]（小于告警阈值）,单位为GB'
      recoverValueUnit:
        type: string
        example: 1
        description: '清除告警阈值存储单位[取值范围] 1表示TB, 2表示GB，当告警类型是绝对值时进行填写'
      repositoryId:
        type: string
        example: 1
        description: 存储库ID
      type:
        type: integer
        format: int32
        example: 1
        description: '百分比或者绝对值[取值范围] 1:百分比 2:绝对值'
    title: RepositoryAlarmThresholdVo
  RepositoryBase:
    type: object
    properties:
      alarmThreashold:
        type: number
        format: float
        description: 存储告警阈值
      freeSize:
        type: integer
        format: int64
        description: 存储库剩余容量（单位：Byte）
      name:
        type: string
        description: 存储库名字
      repositoryId:
        type: string
        description: 存储库ID
      status:
        type: integer
        format: int32
        description: '存储库状态。 -1:离线  0:在线'
      totalSize:
        type: integer
        format: int64
        description: 存储库总容量（单位：Byte）
      type:
        type: integer
        format: int32
        description: '存储库类型。   1:本地存储库  2:蓝光存储库  3:磁带存储库'
      usedSize:
        type: integer
        format: int64
        description: 存储库已使用容量（单位：Byte）
      cloudType:
        type: integer
        format: int32
        description: 对象存储类型
    title: RepositoryBase
  RepositoryThresholdRequest:
    type: object
    required:
      - alarmLevel
      - limitValue
      - matchTime
      - recoverValue
      - type
    properties:
      alarmLevel:
        type: integer
        format: int32
        example: 4
        description: '告警等级[取值范围] 3:重要 4:紧急'
        minimum: 0.0
        maximum: 9.223372036854776e18
        exclusiveMinimum: false
        exclusiveMaximum: false
      limitValue:
        type: integer
        format: int64
        example: 80
        description: '告警阈值，type为1时表示百分比[取值范围]（50-90）;type为2时表示绝对值[取值范围]（正整数）,单位为GB'
        minimum: 1.0
        exclusiveMinimum: false
      limitValueUnit:
        type: string
        example: 1
        description: '告警阈值存储单位[取值范围] 1表示TB, 2表示GB，当告警类型是绝对值时进行填写'
      matchTime:
        type: integer
        format: int32
        example: 3
        description: 触发条件
        minimum: 1.0
        maximum: 10.0
        exclusiveMinimum: false
        exclusiveMaximum: false
      recoverValue:
        type: integer
        format: int64
        example: 50
        description: '清除告警阈值，type为1时表示百分比[取值范围]（小于告警阈值）;type为2时表示绝对值[取值范围]（小于告警阈值）,单位为GB'
        minimum: 1.0
        exclusiveMinimum: false
      recoverValueUnit:
        type: string
        example: 1
        description: '清除告警阈值存储单位[取值范围] 1表示TB, 2表示GB，当告警类型是绝对值时进行填写'
      type:
        type: integer
        format: int32
        example: 1
        description: '百分比或者绝对值[取值范围] 1:百分比 2:绝对值'
        minimum: 0.0
        maximum: 9.223372036854776e18
        exclusiveMinimum: false
        exclusiveMaximum: false
    title: RepositoryThresholdRequest
  StandardBackupVol:
    type: object
    required:
      - freeSize
      - nodeId
      - nodeIp
      - nodeName
      - pathFreeSize
      - pathName
      - totalSize
      - type
      - volName
    properties:
      freeSize:
        type: integer
        format: int64
        description: 空闲容量
      id:
        type: integer
        format: int64
        description: id
      nodeId:
        type: string
        description: 节点ID
        pattern: '^[a-zA-Z0-9]{1,1024}$'
      nodeIp:
        type: string
        description: 节点IP
      nodeName:
        type: string
        description: 节点名称
        pattern: '^[a-zA-Z0-9]{1,1024}$'
      pathFreeSize:
        type: integer
        format: int64
        description: 路径空闲容量
        minimum: 0.0
        exclusiveMinimum: false
      pathName:
        type: string
        description: 挂载路径
        pattern: '/dpa/dpa_fs_[0-9]_[0-9]{2}_[0-9a-zA-Z]{24}/?'
      status:
        type: integer
        format: int32
        description: 状态
      totalSize:
        type: integer
        format: int64
        description: 总容量
      type:
        type: integer
        format: int32
        description: 类型
      usedSize:
        type: integer
        format: int64
        description: 已使用容量
      volId:
        type: string
        description: 卷id
      volName:
        type: string
        description: 卷名
        pattern: '^[a-zA-Z0-9]{3,30}$'
    title: StandardBackupVol
  StandardBackupVolVO:
    type: object
    properties:
      freeSize:
        type: integer
        format: int64
        description: 空闲容量
      id:
        type: integer
        format: int64
        description: id
      nodeId:
        type: string
        description: 节点ID
      nodeIp:
        type: string
        description: 节点IP
      nodeName:
        type: string
        description: 节点名称
      pathFreeSize:
        type: integer
        format: int64
        description: 路径空闲容量
      pathName:
        type: string
        description: 挂载路径
      removable:
        type: boolean
        description: 是否可删除
      status:
        type: integer
        format: int32
        description: 状态
      totalSize:
        type: integer
        format: int64
        description: 总容量
      type:
        type: integer
        format: int32
        description: 类型
      usedSize:
        type: integer
        format: int64
        description: 已使用容量
      volId:
        type: string
        description: 卷id
      volName:
        type: string
        description: 卷名
    title: StandardBackupVolVO
  StorageAccessRes:
    type: object
    properties:
      ip:
        type: string
        description: 存储ip地址
      port:
        type: integer
        format: int32
        description: 端口号
      token:
        type: string
        description: 令牌
    title: StorageAccessRes
  StorageInfo:
    type: object
    properties:
      ip:
        type: string
      password:
        type: string
      port:
        type: integer
        format: int32
      storagePoolList:
        type: array
        items:
          $ref: '#/definitions/StoragePool'
          originalRef: StoragePool
      type:
        type: integer
        format: int32
      username:
        type: string
    title: StorageInfo
  StoragePool:
    type: object
    properties:
      HEALTHSTATUS:
        type: string
      ID:
        type: string
      NAME:
        type: string
      PARENTID:
        type: string
      PARENTNAME:
        type: string
      RUNNINGSTATUS:
        type: string
      USERCONSUMEDCAPACITY:
        type: integer
        format: int64
      USERCONSUMEDCAPACITYPERCENTAGE:
        type: string
      USERCONSUMEDCAPACITYTHRESHOLD:
        type: string
      USERFREECAPACITY:
        type: integer
        format: int64
      USERTOTALCAPACITY:
        type: integer
        format: int64
    title: StoragePool
  StorageRequest:
    type: object
    properties:
      ak:
        type: string
        description: AK
        pattern: '^[\S]{1,256}$'
      alarmEnable:
        type: boolean
        description: 是否开启告警
      alarmLimitValueUnit:
        type: string
        description: 告警阈值单位
      alarmThreshold:
        type: integer
        format: int64
        description: 告警阈值
      bucketName:
        type: string
        description: 数据桶名称
        pattern: '^[\S]{1,256}$'
      cloudType:
        type: integer
        format: int32
        description: 云存储类型
        minimum: 0.0
        maximum: 4.0
        exclusiveMinimum: false
        exclusiveMaximum: false
      endpoint:
        type: string
        description: 终端节点
        pattern: '^[\S]{1,256}$'
      indexBucketName:
        type: string
        description: 索引桶名称
        pattern: '^[\S]{1,256}$'
      proxyEnable:
        type: boolean
        description: 是否使用代理
      proxyHostName:
        type: string
        description: 代理主机名
      proxyUserName:
        type: string
        description: 代理用户名
      proxyUserPwd:
        type: string
        description: 代理用户密码
      sk:
        type: string
        description: SK
        pattern: '^[\S]{1,256}$'
      storageId:
        type: string
        description: 存储id
      storageName:
        type: string
        description: 存储库名字
      type:
        type: integer
        format: int32
        description: '存储库类型。   1:本地存储库  2:蓝光存储库  3:磁带存储库'
      useHttps:
        type: boolean
        description: 是否使用HTTPS
    title: StorageRequest
  UpdateArchiveStorage:
    type: object
    properties:
      alarmEnable:
        type: boolean
        description: 是否开启告警
      alarmLimitValueUnit:
        type: string
        description: 告警阈值单位
      alarmThreshold:
        type: integer
        format: int64
        description: 告警阈值
      password:
        type: string
        description: 密码
      storageId:
        type: string
        description: 存储id
      userName:
        type: string
        description: 用户名
    title: UpdateArchiveStorage
  UpdateStorageRequest:
    type: object
    properties:
      password:
        type: string
        description: 密码
        minLength: 1
        maxLength: 64
      userName:
        type: string
        description: 用户名
        minLength: 1
        maxLength: 64
    title: UpdateStorageRequest
  LogicPortResponse:
    description: 逻辑端口列表响应
    required:
      - logicPortList
    properties:
      logicPortList:
        type: array
        items:
          type: string
        description: 逻辑端口列表
