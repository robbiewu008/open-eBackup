swagger: '2.0'
info:
  title: 副本保护对象接口
  version: v1
tags:
  - name: protected_copy_object_api
paths:
  /v1/internal/protected-copy-objects/action/sync-sla:
    put:
      x-dr-role: 'N'
      x-product: OceanProtect X
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: >-
              #/definitions/Body_sync_replica_sla_change_v1_internal_protected_copy_objects_action_sync_sla_put
      responses:
        '200':
          description: Successful Response
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/HTTPValidationError'
      tags:
        - protected_copy_object_api
      operationId: internal_protected_copy_objects_action_sync_sla_put
      summary: 副本保护对象同步SLA信息变更【内部接口】
  /v1/internal/protected-copy-objects/action/count:
    get:
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      tags:
        - protected_copy_object_api
      description: 根据SLA的ID查询关联副本数量【内部接口】
      operationId: internalProtectedCopyObjectsActionCountGet
      parameters:
        - name: body
          in: body
          required: false
          schema:
            $ref: '#/definitions/Body_sync_replica_sla_change_v1_internal_protected_copy_objects_action_sync_sla_put'
          description: sla id
      responses:
        '200':
          description: Successful Response
  /v1/internal/protected-copy-objects/action/verify:
    get:
      tags:
        - protected_copy_object_api
      x-dr-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      description: 根据资源ID列表和用户ID校验复制副本资源所属用户是否正确【内部接口】
      operationId: internalProtectedCopyObjectsActionVerify
      parameters:
        - name: body
          in: body
          required: false
          schema:
            $ref: '#/definitions/Body_sync_replica_sla_change_v1_internal_protected_copy_objects_action_sync_sla_put'
          description: 资源id和用户id
      responses:
        '200':
          description: Successful Response
definitions:
  Body_sync_replica_sla_change_v1_internal_protected_copy_objects_action_sync_sla_put:
    properties:
      sla_id:
        description: SLA的ID
        title: Sla Id
        type: string
    required:
      - sla_id
    title: >-
      Body_sync_replica_sla_change_v1_internal_protected_copy_objects_action_sync_sla_put
    type: object
  HTTPValidationError:
    properties:
      detail:
        items:
          $ref: '#/definitions/ValidationError'
        title: Detail
        type: array
    title: HTTPValidationError
    type: object
  ProtectedCopyBatchOperationReq:
    properties:
      resource_ids:
        description: 批量操作资源ID列表
        items:
          type: string
        title: Resource Ids
        type: array
    required:
      - resource_ids
    title: ProtectedCopyBatchOperationReq
    type: object
  ProtectedCopyObjectId:
    properties:
      uuid:
        description: 保护副本对象的ID
        title: Uuid
        type: string
    title: ProtectedCopyObjectId
    type: object
  ProtectedCopyObjectUpdate:
    properties:
      resource_id:
        description: 保护对象对应资源的ID
        maxLength: 128
        minLength: 1
        title: Resource Id
        type: string
      sla_id:
        description: 新SLA的ID
        format: uuid
        title: Sla Id
        type: string
    required:
      - sla_id
      - resource_id
    title: ProtectedCopyObjectUpdate
    type: object
  ValidationError:
    properties:
      loc:
        items:
          type: string
        title: Location
        type: array
      msg:
        title: Message
        type: string
      type:
        title: Error Type
        type: string
    required:
      - loc
      - msg
      - type
    title: ValidationError
    type: object
x-components: {}
