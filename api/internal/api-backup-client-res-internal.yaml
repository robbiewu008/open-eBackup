swagger: '2.0'
info:
  title: 资源管理（客户端管理）
  version: v1
tags:
  - name: agent_api
paths:
  /v1/internal/agent/upgrade:
    post:
      x-dr-role: 'N'
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30081
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      produces:
        - application/json
      parameters:
        - name: agentUpdateRequest
          in: body
          required: false
          description: update agent
          schema:
            $ref: '#/definitions/AgentUpdateRequest'
      responses:
        '200':
          description: Successful Response
          schema:
            title: Response Agent Upgrade V1 Internal Agent Upgrade Get
            type: object
        '404':
          description: Not found
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/HTTPValidationError'
        '500':
          description: Internal Server Error
      tags:
        - agent_api
      description: 执行客户端升级
      operationId: agent_upgrade_v1_internal_agent_upgrade_get
      summary: 透传Agent执行客户端升级接口
  /v1/internal/agent/upgrade-status:
    get:
      x-dr-role: 'N'
      x-dm-role: 'N'
      x-impact-subsystem: 不影响
      x-access-port: 30092
      x-auth-required: 'N'
      x-rd-admin-role: 'N'
      x-auditor-role: 'N'
      x-dp-admin-role: 'N'
      x-public-api: 'N'
      x-sysadmin-role: 'N'
      x-product: OceanProtect X8000,OceanProtect X6000,OceanProtect X3000
      produces:
        - application/json
      parameters:
        - description: 主机ip
          in: query
          name: ip
          required: true
          type: string
        - description: 主机端口
          in: query
          name: port
          required: true
          type: string
      responses:
        '200':
          description: Successful Response
          schema:
            title: >-
              Response Check Agent Upgrade Status V1 Internal Agent Upgrade
              Status Get
            type: object
        '404':
          description: Not found
        '422':
          description: Validation Error
          schema:
            $ref: '#/definitions/HTTPValidationError'
        '500':
          description: Internal Server Error
      tags:
        - agent_api
      description: 查询客户端升级状态
      operationId: check_agent_upgrade_status_v1_internal_agent_upgrade_status_get
      summary: 透传Agent查询客户端升级状态接口
definitions:
  HTTPValidationError:
    properties:
      detail:
        items:
          $ref: '#/definitions/ValidationError'
        title: Detail
        type: array
    title: HTTPValidationError
    type: object
  ValidationError:
    properties:
      loc:
        items:
          type: string
        title: Location
        type: array
      msg:
        title: Message
        type: string
      type:
        title: Error Type
        type: string
    required:
      - loc
      - msg
      - type
    title: ValidationError
    type: object
  AgentUpdateRequest:
    type: object
    properties:
      ip:
        type: string
        description: host ip
      port:
        type: string
        description: host port
      downloadLink:
        type: string
        description: 下载链接
      agentId:
        type: string
        description: agent id
      agentName:
        type: string
        description: agent name
      canUseProxy:
        type: string
        description: 是否需要代理
      certSecretKey:
        type: string
        description: 密钥,已加密
      jobId:
        type: string
        description: 任务id
x-components: {}
